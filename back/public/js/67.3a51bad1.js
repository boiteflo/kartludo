"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[67],{3067:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(7808),l=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Les Combats")]),t("div",{staticClass:"m5px"},[t("pre",[e._v(e._s(e.history))])]),t("br"),t("div",{staticStyle:{color:"white"}},[t(n.Z,{staticClass:"flex-grow m5px",attrs:{"hide-details":"",label:"Écrire une commande et appuyer sur entrer"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applyCommand.apply(null,arguments)}},model:{value:e.command,callback:function(t){e.command=t},expression:"command"}})],1),t("h1",[e._v("Les Commandes")]),e._m(0),t("br")])},s=[function(){var e=this,t=e._self._c;return t("pre",[e._v("    Une valeur peut être un nombre (exemple: 12) ou un texte sans espace (TresGros) ou une formule (1d20+5*8/3-4)\n\n    "),t("b",[e._v("Définir un personnage en lui donnant un nom et des valeurs.")]),e._v("\n    "),t("b",[e._v("set")]),e._v(" (nom du personnage) (propriété 1) (valeur 1) (propriété 2) (valeur 2) ...\n    set aziel pv 20 shield 32 ca 19 ref 1d20+8 vig 1d20+8 vol 1d20+12 \n    -- aziel have been updated\n\n    "),t("b",[e._v("Attaquer un personnage")]),e._v("\n    "),t("b",[e._v("attack")]),e._v(" (nom de la victime) (formule pour toucher) (propriété de défense de la victime) (formule de dégat) (propriété de vie) (nom de l'attaque)\n    attack aziel 1d20+5 ca 1d8+3 pv Attaque de javelot \n    -- Attack:1d20(15)+5=20 vs ca:19 ### the attack succeeded Damages:1d8(4)+3=7 aziel pv:20-7=13 ###\n    \n    "),t("b",[e._v("Attaquer un personnage avec un sort de défense")]),e._v("\n    "),t("b",[e._v("spell")]),e._v(" (nom de la victime) (DD pour toucher) (propriété de défense de la victime) (formule de dégat) (propriété de vie) (nom de l'attaque)\n    spell aziel 18 ref 3d4 pv Arc électrique \n    -- Attack:18 vs ref:1d20(16)+8=24 ### The attack partially fails.  Damages:3d4(6)/2=3 aziel pv:13-3=10 ###\n    \n    "),t("b",[e._v("Augmenter la valeur de propriétés")]),e._v("\n    "),t("b",[e._v("add")]),e._v(" (nom du personnage) (propriété 1) (valeur 1) (propriété 2) (valeur 2) ...\n    add aziel pv 10 shield -2 \n    -- aziel pv 10+10=20 shield 32-2=30\n    \n    "),t("b",[e._v("Montrer les valeurs d'un personnage")]),e._v("\n    "),t("b",[e._v("show")]),e._v(" (nom du personnage) (propriété 1) (propriété 2) ...\n    show aziel pv shield \n    -- aziel pv:20 shield:30")])}];function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if("object"!==i(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=r(e,"string");return"symbol"===i(t)?t:String(t)}function u(e,t,a){return t=o(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(7658);class c{static handleAllCommand(e){const t=e.trim().toLowerCase(),a=[];return t.split(",").forEach((e=>this.handleCommand(a,e.trim()))),a.join("\n")}static handleCommand(e,t){const a=t.split(" "),n=a.shift();let l=this.getCreature(a);l||e.push(n+" doesn't exist."),t.startsWith("set")&&this.handleSet(e,l,a),t.startsWith("show")&&this.handleShow(e,l,a),t.startsWith("attack")&&this.handleAttack(e,l,a,!0),t.startsWith("spell")&&this.handleAttack(e,l,a,!1),t.startsWith("add")&&this.handleAdd(e,l,a),e.length<1&&e.push("No valid command.")}static getCreature(e){const t=e.shift();let a=this.creatures.find((e=>e.name==t));return a||(a={name:t},this.creatures.push(a),a)}static handleSet(e,t,a){let n=0;while(a[n]){const e=a[n+1],l=parseInt(e);t[a[n]]=isNaN(e)?e:l,n+=2}e.push(t.name+" have been updated")}static handleShow(e,t,a){let n=0,l=[];while(a[n]){const e=t[a[n]];e&&l.push(a[n]+":"+e),n++}e.push(t.name+" "+l.join(" "))}static handleAdd(e,t,a){let n=0,l=[];while(a[n]){const e=a[n];let s=t[e];if(isNaN(s))l.push(e+" x");else{let i=s+"+"+a[n+1];i=i.replace("+-","-");const r=this.handleRoll(i);l.push(e+" "+r.expression),t[e]=r.value}n+=2}e.push(t.name+" "+l.join(" "))}static handleAttack(e,t,a,n){const l=a.shift(),s=a.shift(),i=a.shift(),r=a.shift(),o=a.join(" "),u=this.handleRoll(t[s]),c=this.handleRoll(l);if(!u||isNaN(u.value))return void e.push("-- "+o+" versus "+t.name+" -- Attack:"+c.expression+" vs "+s+": ???");let d="-- "+o+" versus "+t.name+" -- Attack:"+c.expression+" vs "+s+":"+u.expression;d+=n?this.ApplyDamageNormal(t,c,u,i,r):this.ApplyDamageBasic(t,c,u,i,r),e.push(d)}static ApplyDamageNormal(e,t,a,n,l){return 1==t.dice||t.value+10<=a.value?" ### The attack critically fails ###":t.value<a.value?" ### The attack fails ###":t.dice>=20||t.value-10>=a.value?(n+="*2"," ### the attack critically succeeded"+this.ApplyDamage(e,n,l)+" ###"):" ### the attack succeeded"+this.ApplyDamage(e,n,l)+" ###"}static ApplyDamageBasic(e,t,a,n,l){return 20==a.dice||a.value-10>=t.value?" ### The attack critically fails ###":a.value>=t.value?(n+="/2"," ### The attack partially fails. "+this.ApplyDamage(e,n,l)+" ###"):a.dice>1&&a.value+10>t.value?" ### the attack succeeded"+this.ApplyDamage(e,n,l)+" ###":(n+="*2"," ### the attack critically succeeded "+this.ApplyDamage(e,n,l)+" ###")}static ApplyDamage(e,t,a){const n=this.handleRoll(t);let l=this.handleRoll(e[a]),s=" Damages:"+n.expression+" "+e.name+" "+a+":"+l.value+"-"+n.value+"=";return l.value-=n.value,e[a]=l.value,s+=e[a],s}static handleRoll(e){if(!e)return;const t=e.toString().replace("+"," + ").replace("-"," - ").replace("*"," * ").replace("/"," / "),a=this.isIncludingOperator(t);if(!a)return this.rollDice(t);let n=t.split(" "),l=this.rollDice(n.shift());while(n[0]&&n[1]){const e=n.shift();let t=n.shift();t=t.includes("d")?this.rollDice(t):{expression:t,value:parseInt(t)},l.expression+=e+t.expression,"+"==e&&(l.value+=t.value),"-"==e&&(l.value-=t.value),"*"==e&&(l.value*=t.value),"/"==e&&(l.value/=t.value)}return l.expression+="="+l.value,l}static isIncludingOperator(e){return e.includes("+")||e.includes("-")||e.includes("*")||e.includes("/")}static rollDice(e){if(!e.includes("d"))return{dice:10,expression:e,value:parseInt(e)};let t=e.split("d");const a=t.shift(),n=t.shift();let l=0;for(let s=0;s<a;s++)l+=Math.floor(Math.random()*n)+1;return{dice:l,expression:e+"("+l+")",value:l}}}u(c,"creatures",[]);var d=c,p=a(9043),h={name:"pageClub",components:{},data:()=>({command:"",history:""}),mounted(){p.Z.getAll("fight").then((e=>{this.history=e}))},methods:{applyCommand(){const e=d.handleAllCommand(this.command);this.history+="\n"+e,p.Z.insert("fight",{message:e})}}},v=h,m=a(1001),f=(0,m.Z)(v,l,s,!1,null,null,null),y=f.exports}}]);
//# sourceMappingURL=67.3a51bad1.js.map