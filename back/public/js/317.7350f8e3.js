"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[317],{11317:function(t,e,i){i.r(e),i.d(e,{default:function(){return $}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg2 h100p"},[e("menu-bar-gundam",{attrs:{hide:!0}}),e("game")],1)},r=[],s=i(48110),h=i(64562),d=i(4324),n=function(){var t=this,e=t._self._c;return e("div",{key:t.refreshG,staticClass:"relative w100p h100p"},[e("div",{},[t._l(16,(function(i){return e("div",{key:"x"+i,staticClass:"bgYellow absolute w100p",style:{height:t.game?.grid.box.height+"px",top:t.getGridY(i-1)+"px"}})})),t._l(16,(function(i){return e("div",{key:"y"+i,staticClass:"bgRed absolute h100p",style:{width:t.game?.grid.box.width+"px",left:t.getGridX(i-1)+"px"}})}))],2),t._l(t.game?.fields,(function(i,a){return e("div",{key:"box"+a,staticClass:"absolute bg",style:t.getFieldStyle(i.x,i.y,i.width,i.height)},[t._v(" "+t._s(i.name)+" ")])})),e("div",{staticClass:"flex absolute hide"},[e("div",{staticClass:"bg",staticStyle:{width:"300px",height:"100%"}},[e("div",{staticClass:"relative"},[t.showCardId.id?e("gameCard",{attrs:{card:t.showCardId,folder:"Gundam/cards/"}}):t._e()],1),e("div",{staticStyle:{height:"420px"}}),e(h.Z,{staticClass:"bg m5px",attrs:{target:"_blank",text:""},on:{click:t.start}},[e(d.Z,[t._v("mdi-arrow-right-thin")]),t._v(" Start ")],1),e(h.Z,{staticClass:"bg m5px",attrs:{target:"_blank",text:""},on:{click:t.nextTurn}},[e(d.Z,[t._v("mdi-arrow-right-thin")]),t._v(" End Turn ")],1),e("div",{staticClass:"mp5px",domProps:{innerHTML:t._s(t.game?.logs)}})],1)]),t._l(t.cards,(function(i){return e("div",{key:"B"+i.index},[e("gameCard",{attrs:{id:"C"+i.index,card:i,folder:"Gundam/cards/",shine:i.selectable},on:{mouseover:t.showCard,click:t.selectCard}})],1)})),e("div",{staticClass:"absolute bgWhite mask",staticStyle:{top:"80px",width:"100%",height:"0px"},attrs:{id:"divTitleParent"}},[e("div",{staticClass:"relative"},[e("div",{staticClass:"text-center absolute w100p title",staticStyle:{left:"-000px",top:"30px"}},[t._v(t._s(t.title)+" ")])])]),e("div",{staticClass:"absolute",staticStyle:{right:"100px",bottom:"25px"}},[t._v(" "+t._s(t.$vuetify.breakpoint.width)+" - "+t._s(t.$vuetify.breakpoint.height)+" ")])],2)},o=[],l=i(61711),c=i.n(l),g=i(47327);i(57658);class p{static addTasks(t,e){e.forEach((e=>{this.alreadyInclude(t,e)||t.push(e)}))}static alreadyInclude(t,e){return t.find((t=>this.isEqual(t,e)))}static isEqual(t,e){return t.task===e.task&&t.isPlayer1===t.isPlayer1}static refreshHand(t=!0){return{task:this.task.refreshHand,isPlayer1:t}}static refreshField(t=!0){return{task:this.task.refreshField,isPlayer1:t}}}(0,g.Z)(p,"task",{refreshHand:0,refreshField:1});var x=p;class u{static getLocationArrayProperty(t){return t==this.locationDeck?"deck":t==this.locationShield?"shield":t==this.locationHand?"hand":t==this.locationField?"field":t==this.locationBase?"base":"trash"}static getNextIndex(){return this.index++,this.index}static removeByIndex(t,e){return t.filter((t=>t.index!==e.index))}static addIn(t,e){if(t&&!t.includes((t=>t.index===e.index)))return t.concat([e])}static sortRandom(t){return t.sort((()=>Math.random()-.5))}static log(t){this.world.logs=t+"<br>"+this.world.logs}static clone(t){return Object.assign({},t)}}(0,g.Z)(u,"game",null),(0,g.Z)(u,"grid",void 0),(0,g.Z)(u,"index",1),(0,g.Z)(u,"isPlayer1Turn",void 0),(0,g.Z)(u,"phase",0),(0,g.Z)(u,"phaseStart",0),(0,g.Z)(u,"phaseDraw",1),(0,g.Z)(u,"phaseResource",2),(0,g.Z)(u,"phaseMain",3),(0,g.Z)(u,"phaseAttack",4),(0,g.Z)(u,"phaseBlock",5),(0,g.Z)(u,"phaseAction",6),(0,g.Z)(u,"phaseDamage",7),(0,g.Z)(u,"phaseEnd",8),(0,g.Z)(u,"locationDeck",0),(0,g.Z)(u,"locationShield",1),(0,g.Z)(u,"locationHand",2),(0,g.Z)(u,"locationField",3),(0,g.Z)(u,"locationBase",4),(0,g.Z)(u,"locationTrash",5);var m=u;class w{static createGrid(t,e){const i={};i.width=t-15,i.height=e,i.border=5;const a=16;i.widthB=i.width-i.border*(a+1),i.heightB=i.height-i.border*(a+1),i.center={height:i.heightB-2*i.border,y:i.border},i.center.width=107*i.center.height/150,i.center.x=i.widthB/2-i.center.width/2,i.box={height:i.heightB/a},i.box.width=i.widthB/a,i.boxbig={height:2*i.box.height+i.border,width:2*i.box.width+i.border},i.hand={width:(i.box.width+i.border)*a-i.border,height:4*(i.box.height+i.border)-i.border},i.field={width:i.hand.width-i.box.width-i.border,height:i.hand.height},i.card={height:e/5},i.card.width=107*i.card.height/150;for(let r=0;r<a;r++)i["x"+r]=5+r*(i.box.width+5),i["y"+r]=5+r*(i.box.height+5);return i}static getPositions(t,e){const i=e?{x:t.x15,y:t.y8,width:t.box.width,height:t.box.height,name:"shield"}:{x:t.x0,y:t.y7,width:t.box.width,height:t.box.height,name:"shield"},a=e?{x:t.x15,y:t.y9,width:t.box.width,height:t.box.height,name:"deck"}:{x:t.x0,y:t.y6,width:t.box.width,height:t.box.height,name:"deck"},r=e?{x:t.x15,y:t.y10,width:t.box.width,height:t.box.height,name:"trash"}:{x:t.x0,y:t.y5,width:t.box.width,height:t.box.height,name:"trash"},s=e?{x:t.x15,y:t.y11,width:t.box.width,height:t.box.height,name:"resource"}:{x:t.x0,y:t.y4,width:t.box.width,height:t.box.height,name:"resource"},h=e?{x:t.x0,y:t.y12,width:t.hand.width,height:t.hand.height,name:"hand"}:{x:t.x0,y:t.y0,width:t.hand.width,height:t.hand.height,name:"hand"},d=e?{x:t.x0,y:t.y8,width:t.field.width,height:t.field.height,name:"field"}:{x:t.x1,y:t.y4,width:t.field.width,height:t.field.height,name:"field"};return{deck:a,shield:i,hand:h,resource:s,field:d,trash:r}}static createField(t,e){let i=[t.deck,t.trash,t.shield,t.resource,t.hand,t.field].concat([e.deck,e.trash,e.shield,e.resource,e.hand,e.field]);return i}static refresh(t,e,i){if(i!==m.locationHand&&i!==m.locationField)return;const a=i===m.locationHand;e.forEach(((i,r)=>{i.position=a?this.getPositionHand(t,r,e.length):this.getPositionField(t,r,e.length),i.to=a?this.getPositionHand(t,r,e.length):this.getPositionField(t,r,e.length)}))}static getPositionHand(t,e,i){const a=i/2,r=t.isPlayer1?1:-1,s=-75*r/a,h=(a-e)*s,d=t.isPlayer1?0:.15*t.positions.hand.height;return t.positions.hand.name=t.positions.hand.width/i,{x:t.positions.hand.x+this.getXCenter(t.positions.hand.width,m.grid.card.width,i,e),y:d+t.positions.hand.y+r*Math.abs(h)*1,width:m.grid.card.width,height:m.grid.card.height,rotation:h}}static isPair(t){return t%2==0}static getPositionField(t,e,i){return{x:t.positions.field.x+this.getXCenter(t.positions.field.width,m.grid.card.width,i,e),y:t.positions.field.y,width:m.grid.card.width,height:m.grid.card.height}}static getXCenter(t,e,i,a){const r=t/i;return r/2+r*a-e/2}}var y=w;class f{static createGame(t,e,i){m.game={cards:[],tasks:[],popup:[]},m.cards=t.getCards(),x.addTasks(m.game.tasks,[x.refreshHand(!0),x.refreshHand(!1)]),this.nextTurn(),m.grid=y.createGrid(e,i),m.game.grid=m.grid,m.game.player1={deck:[],shield:[],hand:[],field:[],trash:[],isPlayer1:!0},m.game.player2={deck:[],shield:[],hand:[],field:[],trash:[],isPlayer1:!1},m.game.player1.positions=y.getPositions(m.grid,!0),m.game.player2.positions=y.getPositions(m.grid,!1),m.game.fields=y.createField(m.game.player1.positions,m.game.player2.positions);for(let a=0;a<10;a++)this.spawn(m.game.player1,this.createCard("GD01-028"),m.locationDeck,m.locationHand,!1),this.spawn(m.game.player2,this.createCard("GD01-028"),m.locationDeck,m.locationHand,!1),a<6&&(this.spawn(m.game.player1,this.createCard("GD01-028"),m.locationDeck,m.locationField,!1),this.spawn(m.game.player2,this.createCard("GD01-028"),m.locationDeck,m.locationField,!1));return y.refresh(m.game.player1,m.game.player1.hand,m.locationHand),y.refresh(m.game.player2,m.game.player2.hand,m.locationHand),y.refresh(m.game.player1,m.game.player1.field,m.locationField),y.refresh(m.game.player2,m.game.player2.field,m.locationField),m.game}static createCard(t){const e=m.clone(m.cards.find((e=>e.id===t)));return e.index=m.getNextIndex(),e}static spawn(t,e,i,a,r){const s=m.getLocationArrayProperty(i),h=m.getLocationArrayProperty(a);t[s]=m.removeByIndex(t[s],e.index),t[h]=m.addIn(t[h],e),m.game.cards=m.addIn(m.game.cards,e),r||(y.refresh(t,t[s],i),y.refresh(t,t[h],a))}static nextTurn(){}}var b=f,v=i(37053),k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"absolute bgYellow",style:{left:t.card.position.x+"px",top:t.card.position.y+"px",width:t.card.position.width+"px",height:t.card.position.height+"px",transform:"rotate("+t.card.position.rotation+"deg)","z-index":t.card.zindex,cursor:t.shine?"pointer":""}},[e("img",{class:{shine:t.shine,w100p:!0,h100p:!0},style:{"object-fit":"cover","object-position":t.card.bgposition},attrs:{src:i(97226)("./"+t.folder+t.card.id+".webp")},on:{mouseover:function(e){return t.$emit("mouseover",t.card)},click:function(e){return t.$emit("click",t.card)},contextmenu:function(e){return e.preventDefault(),t.$emit("clickright",t.card)}}}),t.hidestat||!t.card.ap&&!t.card.hp?t._e():e("div",{staticClass:"absolute bg cirlce10px textVerticalCenter",staticStyle:{width:"25px",height:"20px",top:"-5px",right:"-5px","font-size":"8px"}},[t._v(" "+t._s(t.card.ap)+" - "+t._s(t.card.hp)+" ")])])},C=[],Z={name:"game-card",props:["card","folder","shine","hidestat"]},_=Z,P=i(1001),G=(0,P.Z)(_,k,C,!1,null,"9d15db12",null),T=G.exports,F={name:"game-vue",props:[],components:{gameCard:T},data:()=>({refreshG:0,freeze:!1,cards:[],showCardId:{id:"",position:{x:0,y:0},width:300},game:null,title:""}),mounted(){window.addEventListener("resize",(()=>{this.refreshG++})),this.start()},methods:{showText(t){alert(t)},showCard(t){this.showCardId.id=t.id},getGridX(t){return this.game?.grid["x"+t]},getGridY(t){return this.game?.grid["y"+t]},getGridPlace(t,e){return{width:this.game?.grid.box.width+"px",height:this.game?.grid.box.height+"px",left:this.getGridX(t)+"px",top:this.getGridY(e)+"px"}},getFieldStyle(t,e,i,a){return{width:i+"px",height:a+"px",left:t+"px",top:e+"px"}},start(){this.game=b.createGame(v.Z,this.$vuetify.breakpoint.width,this.$vuetify.breakpoint.height),this.refreshGame(),this.showTitle("Draw phase")},showTitle(t){this.title=t;const e=250;setTimeout((()=>{c().animate("divTitleParent",{height:0},{height:100},!1,e)}),10),setTimeout((()=>{c().animate("divTitleParent",{height:100},{height:0},!1,e)}),4.5*(e+10))},refreshGame(){this.cards=this.game.cards,this.refreshG++},nextTurn(){},selectCard(){this.freeze||this.refreshGame()}}},H=F,D=(0,P.Z)(H,n,o,!1,null,null,null),B=D.exports,I={name:"pageGundamTcgFight",components:{menuBarGundam:s.Z,game:B},data:()=>({}),mounted(){},methods:{}},S=I,E=(0,P.Z)(S,a,r,!1,null,null,null),$=E.exports}}]);
//# sourceMappingURL=317.7350f8e3.js.map