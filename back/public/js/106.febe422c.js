(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[106],{78534:function(t,e,o){"use strict";o.d(e,{Z:function(){return g}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nodrag"},[t._l(t.sources,(function(o,i){return e("div",{key:"source"+i,class:{absolute:1,pointCircle:1,colorYellow:o.show},style:{top:o.y+"px",left:o.x+"px",width:o.width+"px",height:o.height+"px","z-index":55},attrs:{id:"source"+i},on:{mousedown:function(e){return t.drag(o)}}})})),e("div",{style:{display:t.source?"":"none"}},[t._l(t.targets.filter((t=>t)),(function(o,i){return e("div",{key:"target"+i},[e("div",{class:{absolute:1,pointCircle:1,colorYellow:t.target!=o,colorGreen:t.target==o},style:{top:o.y+"px",left:o.x+"px",width:o.width+"px",height:o.height+"px","z-index":55}}),e("div",{staticClass:"absolute text-center textVerticalCenter text-shadow-black colorWhite",style:{top:o.y+"px",left:o.x+"px",width:o.width+"px",height:o.height+"px","z-index":55}},[e("div",[t._v(t._s(o.text))])])])})),e("div",{style:{"pointer-events":"none"}},[e("div",{staticClass:"absolute",staticStyle:{top:"0px",left:"0px",width:"0px",height:"0px"},attrs:{id:"arrow0"+t.id}},[e("arrow-div",{attrs:{color:t.color}})],1),e("div",{staticClass:"absolute",staticStyle:{top:"0px",left:"0px",width:"0px",height:"0px"},attrs:{id:"arrow1"+t.id}},[e("arrow-div",{attrs:{color:t.color}})],1)])],2)],2)},s=[],r=o(61711),n=o.n(r),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w100p h100p relative"},[e("div",{staticClass:"arrow absolute",style:{top:"0px",left:"0px","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"15%",left:"15%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"30%",left:"30%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"45%",left:"45%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"60%",left:"60%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"75%",left:"75%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}})])},l=[],h={name:"arrow-div",props:["color"]},d=h,c=o(1001),u=(0,c.Z)(d,a,l,!1,null,"135b1d42",null),m=u.exports,p={name:"drag-drop-arrow",props:["id","sources"],components:{arrowDiv:m},data:()=>({delay:1500,animations:[],mouse:{x:0,y:0},color:"red",targets:[],source:null,target:null}),watch:{sources(){this.resetSources()}},mounted(){window.addEventListener("mousemove",this.updateMouse),window.addEventListener("mouseup",this.mouseUp),window.addEventListener("touchmove",this.updateMouse),window.addEventListener("touchend",this.mouseUp),this.resetSources()},beforeUnmount(){window.removeEventListener("mousemove",this.updateMouse),window.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("touchmove",this.updateMouse),window.removeEventListener("touchend",this.mouseUp)},methods:{updateMouse(t){const e=t&&t.touches&&t.touches.length>0?t.touches[0]:{};this.mouse.x=t.clientX?t.clientX:e.clientX,this.mouse.y=t.clientY?t.clientY:e.clientY,this.updateAnimation()},resetSources(){this.sources.forEach(((t,e)=>{const o=document.getElementById("source"+e);o?.addEventListener("touchstart",(()=>this.drag(t)))})),this.animate()},drag(t){this.source=t,this.targets=this.source.targets,this.animate()},mouseUp(){!this.source||!this.animations||this.animations.length<1||(this.$emit("drop",{mouse:this.mouse,source:this.source,target:this.target}),this.source=null)},animate(){this.source&&(this.updateAnimation(),n().animateMultiple(this.animations,this.delay-5),setTimeout((()=>{this.animate()}),this.delay+15))},isInside(t,e,o){const i=o.x,s=o.y,r=i+o.width,n=s+o.height;return t>=i&&t<=r&&e>=s&&e<=n},updateAnimation(){if(!this.source)return;(!this.animations||this.animations.length<1)&&(this.animations=[this.createAnimation("arrow0"+this.id,!1),this.createAnimation("arrow1"+this.id,!0)]),this.target=this.targets.find((t=>this.isInside(this.mouse.x,this.mouse.y,t))),this.color=this.target?"green":"red";const t={x:this.source.x+this.source.width/2,y:this.source.y+this.source.height/2},e=this.target?{x:this.target.x+this.target.width/2,y:this.target.y+this.target.height/2}:this.mouse;this.animations.forEach((o=>{const i=this.getAngleDeg(t,e)+135,s=(this.target,75),r=s/2;o.from.x=t.x,o.from.y=t.y,o.from.rotation=i,o.to.rotation=i,o.to.x=e.x,o.to.y=e.y,o.mid.x=o.from.x+(o.to.x-o.from.x)/2-r,o.mid.y=o.from.y+(o.to.y-o.from.y)/2-r}))},createAnimation(t,e){const o=(this.target,75),i={width:5,height:5,opacity:0},s={opacity:1,width:o,height:o},r={opacity:0,width:0,height:0};return{id:t,from:i,mid:s,to:r,delay:e,isIncrement:!1}},getAngleDeg(t,e){const o=Math.atan2(e.y-t.y,e.x-t.x);return o*(180/Math.PI)}}},x=p,f=(0,c.Z)(x,i,s,!1,null,null,null),g=f.exports},49106:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h100p w100p relative bgWhite"},[e("h2",[t._v("Page Test")]),e("drag-drop-arrow",{attrs:{id:"0",sources:t.points},on:{drop:t.dropPoint}})],1)},s=[],r=(o(57658),o(78534)),n={name:"pageTest",components:{dragDropArrow:r.Z},data:()=>({points:[{x:240,y:240,width:75,height:75,show:!0},{x:40,y:240,width:75,height:75,show:!0}]}),mounted(){const t=[],e=[],o=75,i=75;let s=40;for(let r=40;r<260;r+=100)t.push({x:r,y:s,width:o,height:i,text:"Point "+r});s=440;for(let r=40;r<260;r+=100)e.push({x:r,y:s,width:o,height:i,text:"Point "+r});this.points[0].targets=t,this.points[1].targets=e},methods:{dropPoint(t){alert(JSON.stringify(t)),this.source=null}}},a=n,l=o(1001),h=(0,l.Z)(a,i,s,!1,null,null,null),d=h.exports},61711:function(t){class e{static animateElement(t,e,o,i){const s={element:t,from:e,to:o};this.animateElements([s],i)}static animateElements(t,e){const o=performance.now();function i(s){function r(t,e,o){let i=o,s=null,r=null,n=0;return e.delay&&(i=i<.5?i+.5:i-.5),e.mid&&e.mid[t]?i<.5?(i/=.5,n=i,s=e.from,r=e.mid):(i=(i-.5)/.5,n=i,s=e.mid,r=e.to):(n=i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2,s=e.from,r=e.to),s[t]+(r[t]-s[t])*n}const n=s-o,a=Math.min(n/e,1);t.forEach((t=>{const e=r("x",t,a),o=r("y",t,a),i=r("width",t,a),s=r("height",t,a),n=r("rotation",t,a),l=r("opacity",t,a);t.element.style.left=e+"px",t.element.style.top=o+"px",t.element.style.height=s+"px",t.element.style.width=i+"px",t.element.style.opacity=l,t.element.style.transform=`rotate(${n}deg)`})),a<1&&requestAnimationFrame(i)}requestAnimationFrame(i)}static easeInOut(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}static add(t,e){const o="x,y,width,height,rotation,opacity",i={};return o.split(",").forEach((o=>{i[o]=t[o];const s=e[o];s&&(i[o]+=s)})),i}static setIfNull(t,e){const o="x,y,width,height,rotation,opacity",i={};return o.split(",").forEach((o=>{i[o]=t[o];const s=e[o];s&&(i[o]=s)})),i}static getRelativeTo0(t,e){return{x:e.x-t.x,y:e.y-t.y}}static pxStringToInt(t){return parseInt(t.replace("px",""))}static animate(t,e,o,i,s){return this.animateMultiple([{id:t,from:e,to:o,isIncrement:i}],s)}static animateMultiple(t,e=-1){t.forEach((t=>{t.to&&(t.element=document.getElementById(t.id),t.element?(t.from=t.from??{x:this.pxStringToInt(t.element.style.left),y:this.pxStringToInt(t.element.style.top),rotation:t.element.style.rotation,height:t.element.style.height,width:t.element.style.width,delay:!1},t.from.rotation=t.from.rotation??0,t.from.opacity=t.from.opacity??1,t.from.height=t.from.height??t.element.clientHeight,t.to=t.isIncrement?this.add(t.from,t.to):t.to,t.mid=t.mid?t.isIncrement?this.add(t.from,t.mid):t.mid:null):console.log("element can't be found : "+t.id))})),this.animateElements(t,e)}}t.exports=e}}]);
//# sourceMappingURL=106.febe422c.js.map