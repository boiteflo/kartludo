(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[206],{48110:function(t,e,i){"use strict";i.d(e,{Z:function(){return b}});var a=i(56843),r=i(55550),n=i(64562),o=i(99709),s=i(13687),d=function(){var t=this,e=t._self._c;return e("div",[t.hide?e("div",{staticClass:"absolute"},[e(r.Z,{staticStyle:{"z-index":"10"},attrs:{variant:"text"},on:{click:function(e){t.showDrawer=!0}}})],1):e(a.Z,{attrs:{app:"",dark:"",color:"black"}},[e("div",{staticStyle:{width:"320px",position:"absolute",bottom:"0px",top:"0px",left:"160px",overflow:"hidden"}},[e("img",{staticStyle:{width:"100px"},attrs:{src:i(70898)}})]),e("div",{staticStyle:{width:"100px",position:"absolute",bottom:"0px",top:"0px",left:"120px",overflow:"hidden"}},[e("img",{staticStyle:{width:"100px",height:"100%"},attrs:{src:i(38525)}})]),e(r.Z,{attrs:{variant:"text"},on:{click:function(e){t.showDrawer=!0}}}),e("router-link",{attrs:{to:"/gundam"}},[e(n.Z,{staticStyle:{position:"relative"},attrs:{target:"_blank",text:""},on:{click:function(e){return t.unselect()}}},[e("h3",{staticStyle:{position:"absolute",left:"0px",top:"-15px","letter-spacing":"5px"}},[t._v("GUNDAM")]),e("span",{staticStyle:{position:"absolute",top:"5px",left:"0px","font-size":"10px"}},[t._v(t._s(t.version))])])],1),e(s.Z),t._l(t.links,(function(i){return e("link-button",{key:"menuBarr"+i.Text,attrs:{url:i.Url,external:i.external,text:t.$vuetify.breakpoint.width>=1050?i.Text:"",icon:i.Icon},on:{click:function(e){return t.unselect()}}})}))],2),e(o.Z,{attrs:{absolute:"",temporary:"",color:"black"},model:{value:t.showDrawer,callback:function(e){t.showDrawer=e},expression:"showDrawer"}},[e("img",{staticStyle:{width:"300px",height:"400px","object-position":"-50px 00px","object-fit":"cover",position:"absolute"},attrs:{src:i(68499)}}),e("br"),e("div",[e("router-link",{attrs:{to:"/daggerheart"}},[e(n.Z,{attrs:{target:"_blank",text:""}},[e("h3",{staticClass:"colorWhite"},[t._v("Gundam")])])],1),t._l(t.links,(function(i){return e("link-button",{key:"navigationDrawer"+i.Text,staticClass:"m5px w100p",attrs:{url:i.Url,external:i.external,text:i.Text,icon:i.Icon},on:{click:function(e){return t.unselect()}}})}))],2)]),!t.hide&&t.$vuetify.breakpoint.width>=800?e("div",{staticClass:"bg",staticStyle:{height:"60px"}}):t._e(),!t.hide&&t.$vuetify.breakpoint.width<800?e("div",{staticClass:"bg",staticStyle:{height:"20px"}}):t._e()],1)},c=[],l=i(69092),h=i(28310),p={name:"menuBarGundam",components:{linkButton:h.Z},props:["filteractive","hide"],data:()=>({store:l.h,version:"",searchString:"",showDrawer:!1,links:[{Text:"EncyclopÃ©die",Icon:"mdi-book",external:!0,Url:"https://docs.google.com/presentation/d/13EMZDLqcDxfhsLHIzuKSSBsFIvNwjc2QLpWlew3B8Bk/edit?usp=drive_link"},{Text:"Cartes",Icon:"mdi-cards",Url:"/gundamTcgFight"}]}),mounted(){this.version=this.$version},methods:{}},g=p,u=i(1001),f=i(90490),m=i.n(f),x=(0,u.Z)(g,d,c,!1,null,null,null);"function"===typeof m()&&m()(x);var b=x.exports},9206:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return H}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg2 h100p"},[e("menu-bar-gundam",{attrs:{hide:!0}}),e("game")],1)},r=[],n=i(48110),o=i(64562),s=i(4324),d=function(){var t=this,e=t._self._c;return e("div",{key:t.refreshG,staticClass:"relative w100p h100p mask"},[e("div",{staticClass:"hide"},[t._l(16,(function(i){return e("div",{key:"x"+i,staticClass:"bgYellow absolute w100p",style:{height:t.game?.grid.box.height+"px",top:t.getGridY(i-1)+"px"}})})),t._l(16,(function(i){return e("div",{key:"y"+i,staticClass:"bgRed absolute h100p",style:{width:t.game?.grid.box.width+"px",left:t.getGridX(i-1)+"px"}})}))],2),t._l(t.game?.fields,(function(i){return e("div",{key:i.zone,class:{absolute:!0,bg3:i.zone.endsWith("2"),bg:i.zone.endsWith("1"),fontSize12:!0,textVerticalCenter:!0,"text-center":!0,bgYellow2:i.isPlayer1==t.game.isPlayer1&&3===i.location},style:t.getFieldStyle(i.x,i.y,i.width,i.height),attrs:{id:i.zone},on:{dragover:t.onDragOver,drop:function(e){return t.onDrop(e,i)}}},[t._v(" "+t._s(i.text)+" ")])})),t.aside?e("div",{staticClass:"flex absolute"},[e("div",{staticClass:"bg",staticStyle:{width:"300px",height:"100%"}},[e("div",{staticClass:"relative"},[e("gameCard",{attrs:{card:t.cardCenter,folder:"Gundam/cards/"}})],1),e("div",{staticStyle:{height:"420px"}}),e(o.Z,{staticClass:"bg m5px",attrs:{target:"_blank",text:""},on:{click:t.start}},[e(s.Z,[t._v("mdi-arrow-right-thin")]),t._v(" Start ")],1),e(o.Z,{staticClass:"bg m5px",attrs:{target:"_blank",text:""},on:{click:t.nextTurn}},[e(s.Z,[t._v("mdi-arrow-right-thin")]),t._v(" End Turn ")],1),e("div",{staticClass:"mp5px",domProps:{innerHTML:t._s(t.game?.logs)}})],1)]):t._e(),t._l(t.cards,(function(i){return e("div",{key:"B"+i.index,on:{dragover:t.onDragOver,drop:function(e){return t.onDrop(e,i)}}},[e("gameCard",{attrs:{id:"C"+i.index,card:i,folder:"Gundam/cards/",shine:i.selectable,draggable:"true"},on:{mouseover:function(e){return t.showCardMouseOver(i)},click:function(e){return t.showCard(i)},dragover:t.onDragOver,drop:function(e){return t.onDrop(e,i)}}})],1)})),e(o.Z,{staticClass:"bg m5px absolute",attrs:{target:"_blank",text:""},on:{click:t.nextTurn}},[e(s.Z,[t._v("mdi-arrow-right-thin")]),t._v(" End Turn ")],1),e("div",{staticClass:"absolute bgWhite mask",staticStyle:{top:"80px",width:"100%",height:"0px"},attrs:{id:"divTitleParent"}},[e("div",{staticClass:"relative"},[e("div",{staticClass:"text-center absolute w100p title",staticStyle:{left:"-000px",top:"30px"}},[t._v(t._s(t.title)+" ")])])]),e("gameCard",{attrs:{id:"cardCenter",card:t.cardCenter,folder:"Gundam/cards/"},on:{click:function(e){return t.showCard(null)}}}),e("div",{staticClass:"absolute hide"},[t._v(" hello world ")])],2)},c=[],l=i(61711),h=i.n(l),p=i(47327);i(57658);class g{static addTasks(t,e){e.forEach((e=>{this.alreadyInclude(t,e)||t.push(e)}))}static alreadyInclude(t,e){return t.find((t=>this.isEqual(t,e)))}static isEqual(t,e){const i=t.id===e.id&&t.isPlayer1===e.isPlayer1&&t.value===e.value;return i}static refreshField(t=!0){return{id:this.taskRefreshField,isPlayer1:t}}}(0,p.Z)(g,"taskRefreshField",1),(0,p.Z)(g,"taskShowTitle",2),(0,p.Z)(g,"taskDrawToCenter",3),(0,p.Z)(g,"taskDrawToHand",4);var u=g;class f{static getLocationArrayProperty(t){return t==this.locationEmpty?"empty":t==this.locationDeck?"deck":t==this.locationShield?"shield":t==this.locationHand?"hand":t==this.locationField?"field":t==this.locationBase?"base":t==this.locationResource?"resource":"trash"}static spawn(t,e,i,a){const r=this.spawnNotShown(t,e,i,a);return f.game.cards=f.addIn(f.game.cards,r),u.addTasks(f.game.tasks,[u.refreshField(t.isPlayer1)]),r}static spawnNotShown(t,e,i,a){const r=f.getLocationArrayProperty(i),n=f.getLocationArrayProperty(a);return e?t[r]=f.removeByIndex(t[r],e.index):e=t[r].splice(0,1)[0],e.position=e.position?e.position:this.getDefaultPosition(t,r),t[n]=f.addIn(t[n],e),e}static createCard(t){const e=this.clone(this.cards.find((e=>e.id===t)));return e.index=this.getNextIndex(),e}static getNextIndex(){return this.index++,this.index}static setActive(t,e){t.active=e;const i=t.active?0:90;t.to||(t.to=t.position),t.to={x:t.to.x,y:t.to.y,rotation:i}}static getDefaultPosition(t,e){const i=t.positions[e];return i}static getPlayerTurn(){return f.isPlayer1?f.game.player1:f.game.player2}static getPlayerTurnOpponent(){return f.isPlayer1?f.game.player2:f.game.player1}static removeByIndex(t,e){return t.filter((t=>t.index!==e.index))}static addIn(t,e){if(t&&!t.includes((t=>t.index===e.index)))return t.concat([e])}static sortRandom(t){return t.sort((()=>Math.random()-.5))}static log(t){this.world.logs=t+"<br>"+this.world.logs}static clone(t){return Object.assign({},t)}}(0,p.Z)(f,"game",null),(0,p.Z)(f,"grid",void 0),(0,p.Z)(f,"index",1),(0,p.Z)(f,"isPlayer1",void 0),(0,p.Z)(f,"phase",0),(0,p.Z)(f,"phaseStart",0),(0,p.Z)(f,"phaseDraw",1),(0,p.Z)(f,"phaseResource",2),(0,p.Z)(f,"phaseMain",3),(0,p.Z)(f,"phaseAttack",4),(0,p.Z)(f,"phaseBlock",5),(0,p.Z)(f,"phaseAction",6),(0,p.Z)(f,"phaseDamage",7),(0,p.Z)(f,"phaseEnd",8),(0,p.Z)(f,"locationEmpty",0),(0,p.Z)(f,"locationDeck",1),(0,p.Z)(f,"locationShield",2),(0,p.Z)(f,"locationHand",3),(0,p.Z)(f,"locationField",4),(0,p.Z)(f,"locationBase",5),(0,p.Z)(f,"locationTrash",6),(0,p.Z)(f,"locationResource",7);var m=f;class x{static createGrid(t,e){const i={};i.width=t,i.height=e,i.border=5,i.border2=2*i.border;const a=16;i.widthB=i.width-i.border*(a+1),i.heightB=i.height-i.border*(a+1),i.center=this.getCardSize(i.width-i.border2,i.height-i.border2,1),i.box={height:i.heightB/a},i.box.width=i.widthB/a,i.boxbig={height:2*i.box.height+i.border,width:2*i.box.width+i.border},i.hand={width:(i.box.width+i.border)*a-i.border,height:3*(i.box.height+i.border)-i.border},i.field={width:i.hand.width-i.box.width-i.border,height:i.hand.height+2*(i.box.height+i.border)},i.hand.card=this.getCardSize(i.hand.width,i.hand.height,6),i.field.card=this.getCardSize(i.field.width,i.field.height,6);for(let r=0;r<a;r++)i["x"+r]=5+r*(i.box.width+5),i["y"+r]=5+r*(i.box.height+5);return i}static getPositions(t,e){return t.box.width>50?{base:this.createZone(e,t.x15,t.y8,t.x0,t.y7,t.box.width,t.box.height,"base",m.locationBase),shield:this.createZone(e,t.x15,t.y9,t.x0,t.y6,t.box.width,t.box.height,"shield",m.locationShield),deck:this.createZone(e,t.x15,t.y10,t.x0,t.y5,t.box.width,t.box.height,"deck",m.locationDeck),trash:this.createZone(e,t.x15,t.y11,t.x0,t.y4,t.box.width,t.box.height,"trash",m.locationTrash),resource:this.createZone(e,t.x15,t.y12,t.x0,t.y3,t.box.width,t.box.height,"res",m.locationResource),hand:this.createZone(e,t.x0,t.y13,t.x0,t.y0,t.hand.width,t.hand.height,"hand",m.locationHand),field:this.createZone(e,t.x0,t.y8,t.x1,t.y3,t.field.width,t.field.height,"field",m.locationField)}:{base:this.createZone(e,t.x14,t.y8,t.x0,t.y7,2*t.box.width,t.box.height,"base",m.locationBase),shield:this.createZone(e,t.x14,t.y9,t.x0,t.y6,2*t.box.width,t.box.height,"shield",m.locationShield),deck:this.createZone(e,t.x14,t.y10,t.x0,t.y5,2*t.box.width,t.box.height,"deck",m.locationDeck),trash:this.createZone(e,t.x14,t.y11,t.x0,t.y4,2*t.box.width,t.box.height,"trash",m.locationTrash),resource:this.createZone(e,t.x14,t.y12,t.x0,t.y3,2*t.box.width,t.box.height,"res",m.locationResource),hand:this.createZone(e,t.x0,t.y13,t.x0,t.y0,t.hand.width,t.hand.height,"hand",m.locationHand),field:this.createZone(e,t.x0,t.y8,t.x2,t.y3,t.field.width-5-t.box.width,t.field.height,"field",m.locationField)}}static createZone(t,e,i,a,r,n,o,s,d){const c=t?"1":"2";return{x:t?e:a,y:t?i:r,zone:s+c,width:n,height:o,location:d,isPlayer1:t}}static createField(t,e){let i=[t.deck,t.trash,t.shield,t.resource,t.hand,t.field,t.base].concat([e.deck,e.trash,e.shield,e.resource,e.hand,e.field,e.base]);return i}static refresh(t,e,i=!1){let a=e.height;e.location==m.locationField&&(a*=.75);const r=i?e:this.getCardSize(e.width,a,t.length);t.forEach(((i,a)=>{i.to=this.getCardPosition(a,t.length,e,r)}))}static getCardSize(t,e,i){let a=t/(i+.25),r=150*a/107;r>e&&(r=e,a=107*r/150);const n=(t-a)/2,o=(e-r)/2;return{x:n,y:o,width:a,height:r}}static getCardPosition(t,e,i,a){return{x:i.x+this.getXCenter(i.width,a.width,e,t),y:i.y,width:a.width,height:a.height,rotation:0}}static getPositionHandWithRotation(t,e,i,a){const r=.75*m.grid.card.width,n=r/2,o=i<a/2?-1:1;let s=0,d=a/2,c=0;if(this.isPair(a)){const t=m.grid.hand.width/2-n+n*o;d=i<a/2?Math.floor(a/2)-1:Math.ceil(a/2),c=t+Math.abs(d-i)*r*o}else{const t=m.grid.hand.width/2-n;c=t+Math.abs(d-i)*r*o}const l=t.isPlayer1?1:-1;s=i-d;const h=l*Math.round(s/d*20),p=l*(r/4)*Math.abs(d-i);e.ap=i,e.hp=d;const g={x:t.positions.hand.x+c,y:t.positions.hand.y+p+20,width:m.grid.card.width,height:m.grid.card.height,rotation:h};return g}static isPair(t){return t%2==0}static getCenter(t,e,i,a){const r=t/2,n=i/2,o=n-a;return r-o*e}static getXCenter(t,e,i,a){const r=t/i;return r/2+r*a-e/2}}var b=x;class y{static createGame(t,e,i){m.game={cards:[],tasks:[],popup:[]},m.cards=t.getCards(),m.grid=b.createGrid(e,i),m.game.grid=m.grid;const a=t.getDeckLenth();m.game.player1=this.createPlayer(m.cards,a,!0),m.game.player2=this.createPlayer(m.cards,a,!1),m.game.player1.positions=b.getPositions(m.grid,!0),m.game.player2.positions=b.getPositions(m.grid,!1),m.game.fields=b.createField(m.game.player1.positions,m.game.player2.positions),m.game.isPlayer1Turn=1==Math.floor(2*Math.random());for(let r=0;r<t.getHandStartLength();r++)m.spawn(m.game.player1,null,m.locationDeck,m.locationHand),m.spawn(m.game.player2,null,m.locationDeck,m.locationHand);return m.game}static createPlayer(t,e,i){let a=[];return t.forEach((t=>{a.push(m.createCard(t.id)),a.push(m.createCard(t.id)),a.push(m.createCard(t.id)),a.push(m.createCard(t.id))})),a=a.splice(0,e),a.forEach((t=>{t.index=m.getNextIndex(),t.isPlayer1=i,t.location=m.locationDeck})),a=m.sortRandom(a),{deck:a,shield:[],hand:[],field:[],trash:[],isPlayer1:i,base:[],empty:[]}}}var w=y;class v{static createGame(t,e,i){return w.createGame(t,e,i),m.game.manager=t,t.setup(m.game),this.nextTurn(m.game)}static nextTurn(t){m.isPlayer1=!m.isPlayer1,t.isPlayer1=m.isPlayer1;const e=m.isPlayer1?"1":"2";return u.addTasks(t.tasks,[{id:u.taskShowTitle,value:"New turn for player "+e,isPlayer1:m.isPlayer1,delay:1200},{id:u.taskDrawToCenter,isPlayer1:m.isPlayer1,delay:500},{id:u.taskDrawToCenter,isPlayer1:m.isPlayer1,delay:500}]),this.handleTasks(t)}static handleTasks(t){let e=t.tasks.splice(0,1)[0];t.refresh=!!e;let i=0;while(e&&i<100){const a=e.isPlayer1?t.player1:t.player2;if(e.id===u.taskRefreshField)t.manager.refreshFieldAndHand(a);else if(e.id===u.taskDrawToCenter){const t=m.spawn(a,null,m.locationDeck,m.locationHand);t.to=m.grid.center,m.game.lastCard=t}else e.id===u.taskDrawToHand?t.manager.refreshFieldAndHand(a):e.id===u.taskShowTitle&&(t.showTitle=e.value);if(e.delay)return t.wait=e.delay,t;e=t.tasks.splice(0,1)[0],i++}return t}}var T=v,k=i(3270);class D{static getCards(){return k._}static getDeckLenth(){return 50}static getHandStartLength(){return 5}static setup(t){this.createDefaultBase(t.player1),this.createDefaultBase(t.player2);for(let e=0;e<6;e++)m.spawnNotShown(t.player1,null,m.locationDeck,m.locationShield),m.spawnNotShown(t.player2,null,m.locationDeck,m.locationShield)}static createDefaultBase(t){const e=m.createCard("EXBP-001");return m.spawn(t,e,m.locationBase,m.locationBase),e}static refreshFieldAndHand(t){b.refresh(t.hand,t.positions.hand),b.refresh(t.field,t.positions.field),b.refresh(t.base,t.positions.base,!0),t.positions.deck.text=t.deck.length,t.positions.shield.text=t.shield.length,t.positions.trash.text=t.trash.length,t.positions.resource.text="1/1"}}var C=D,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"absolute bgYellow",style:{left:t.card.position.x+"px",top:t.card.position.y+"px",width:t.card.position.width+"px",height:t.card.position.height+"px",transform:"rotate("+t.card.position.rotation+"deg)","z-index":t.card.zindex,cursor:t.shine?"pointer":""},on:{click:function(e){return t.$emit("click",t.card)}}},[t.card?e("img",{class:{w100p:!0,h100p:!0,shine:t.shine},style:{"object-fit":"cover","object-position":t.card.bgposition,"pointer-events":"none"},attrs:{draggable:"false",src:i(97226)("./"+t.folder+t.card.id+".webp")},on:{mouseover:function(e){return t.$emit("mouseover",t.card)},contextmenu:function(e){return e.preventDefault(),t.$emit("clickright",t.card)}}}):e("div",[t._v("No card")]),t.hidestat||!t.card.ap&&!t.card.hp?t._e():e("div",{staticClass:"absolute cirlce10px textVerticalCenter centerDiv colorBlack",staticStyle:{width:"25px",height:"15px",top:"-0px","font-size":"10px","background-color":"#FFFFFFB0"}},[t._v(" "+t._s(t.card.ap)+" - "+t._s(t.card.hp)+" ")])])},G=[],Z={name:"game-card",props:["card","folder","shine","hidestat"]},P=Z,_=i(1001),E=(0,_.Z)(P,S,G,!1,null,"c6f410b0",null),B=E.exports,M={name:"game-vue",props:[],components:{gameCard:B},data:()=>({refreshG:0,aside:!1,freeze:!1,cards:[],cardCenter:{id:"GD01-028",position:{width:0}},game:null,title:""}),mounted(){document.body.style.overflow="hidden",window.addEventListener("resize",(()=>{this.refreshG++})),this.start()},methods:{start(){this.game=T.createGame(C,this.$vuetify.breakpoint.width,this.$vuetify.breakpoint.height),this.refreshGame()},nextTurn(){this.game=T.nextTurn(this.game),this.refreshGame()},continue(){this.game=T.handleTasks(this.game),this.game.refresh&&this.refreshGame()},playCardOnZone(t,e){alert(t.name+" in "+e.zone),t.to=this.clone(t.position),t.positionOld=this.clone(t.position),t.position={...t.position,...t.positionDrag},this.beginAnimation()},playCardOnCard(t,e){alert(t.name+" in "+e.name),t.to=this.clone(t.position),t.positionOld=this.clone(t.position),t.position={...t.position,...t.positionDrag},this.beginAnimation()},refreshGame(){this.cards=this.game.cards,setTimeout((()=>{this.setDrag()}),10),this.game.showTitle&&this.showTitle(this.game.showTitle),this.refreshG++,setTimeout((()=>{this.beginAnimation()}),10)},beginAnimation(){let t=500;const e=this.cards.filter((t=>t.to));if(t=e.length<1?10:500,setTimeout((()=>{this.endAnimation()}),t+10),e.length<1)return;this.freeze=!0;const i=e.map((t=>({id:"C"+t.index,from:t.position,to:t.to,isIncrement:!1})));h().animateMultiple(i,t)},endAnimation(){this.cards.forEach((t=>{t.positionOld&&(t.position=t.positionOld),t.to&&(t.position=t.to),delete t.to})),this.freeze=!1,delete this.game.showTitle,this.game.wait&&setTimeout((()=>{this.continue()}),this.game.wait)},showTitle(t){this.title=t;const e=200;setTimeout((()=>{h().animate("divTitleParent",{height:0},{height:100},!1,e)}),10),setTimeout((()=>{h().animate("divTitleParent",{height:100},{height:0},!1,e)}),4.5*(e+10))},showCardMouseOver(t){this.aside&&this.showCard(t)},showCard(t){this.cardCenter=t?{id:t.id,position:t.position,to:{x:this.game.grid.center.x,y:this.game.grid.center.y,width:this.game.grid.center.width,height:this.game.grid.center.height}}:{id:this.cardCenter.id,position:this.cardCenter.position,to:{...this.cardCenter.position,height:0}};const e=[{id:"cardCenter",from:this.cardCenter.position,to:this.cardCenter.to,isIncrement:!1}];h().animateMultiple(e,500),setTimeout((()=>{this.cardCenter.position=this.cardCenter.to,delete this.cardCenter.to}),510)},setDrag(){this.cards.forEach((t=>{const e="C"+t.index;this.addEvent(e,"dragstart",(e=>this.startDrag(e,t))),this.addEvent(e,"dragover",(e=>this.moveCard(e,t))),this.addEvent(e,"touchmove",(e=>this.moveCard(e,t))),this.addEvent(e,"touchstart",(e=>this.touchStart(e,t))),this.addEvent(e,"touchend",(e=>this.touchEnd(e,t)))}))},addEvent(t,e,i){const a=document.getElementById(t);a&&a.addEventListener(e,(t=>i(t)))},moveCard(t,e){if(!e.moving)return;let i=t.touches?t.touches[0].clientX:t.clientX,a=t.touches?t.touches[0].clientY:t.clientY;i-=e.position.width/2,a-=e.position.height/2;const r=t.target;r.style.left=`${i}px`,r.style.top=`${a}px`,e.positionDrag={x:i,y:a}},startDrag(t,e){t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(new Image,0,0),t.dataTransfer.setData("card",e.index),e.moving=!0,t.target.style.zIndex="1000"},onDragOver(t){t.preventDefault()},onDrop(t,e){t.preventDefault();const i=t.clientX||t.pageX||(t.touches?t.touches[0].clientX:null),a=t.clientY||t.pageY||(t.touches?t.touches[0].clientY:null);t.target.style.zIndex="auto";const r=t.dataTransfer.getData("card"),n=this.getCard(r);n.moving=!1,e.index===n.index&&(e=this.getTouchZoneOrCard(i,a,n.index)),e.zone?this.playCardOnZone(n,e):this.playCardOnCard(n,e)},touchStart(t,e){e.moving=!0,t.target.style.zIndex="1000"},touchEnd(t,e){e.moving=!1,t.target.style.zIndex="auto";const i=t.changedTouches[0];let a=this.getTouchZoneOrCard(i.clientX,i.clientY,e.index);a&&e.index!=a.index&&(a.zone?this.playCardOnZone(e,a):this.playCardOnCard(e,a))},getTouchZoneOrCard(t,e,i){const a=this.cards.find((a=>a.index!==i&&this.isInside(t,e,a.position))),r=a?null:this.game.fields.find((i=>this.isInside(t,e,i)));return a||r},isInside(t,e,i){const a=i.x,r=i.y,n=a+i.width,o=r+i.height;return t>=a&&t<=n&&e>=r&&e<=o},clone(t){return Object.assign({},t)},showText(t){alert(t)},getGridX(t){return this.game?.grid["x"+t]},getGridY(t){return this.game?.grid["y"+t]},getCard(t){return this.cards.find((e=>e.index==t))},getGridPlace(t,e){return{width:this.game?.grid.box.width+"px",height:this.game?.grid.box.height+"px",left:this.getGridX(t)+"px",top:this.getGridY(e)+"px"}},getFieldStyle(t,e,i,a){return{width:i+"px",height:a+"px",left:t+"px",top:e+"px"}}}},O=M,I=(0,_.Z)(O,d,c,!1,null,"413c5d94",null),F=I.exports,U={name:"pageGundamTcgFight",components:{menuBarGundam:n.Z,game:F},data:()=>({}),mounted(){},methods:{}},z=U,A=(0,_.Z)(z,a,r,!1,null,null,null),H=A.exports},90490:function(){},61711:function(t,e,i){i(57658);class a{static animateElement(t,e,i,a){const r={element:t,from:e,to:i};this.animateElements([r],a)}static animateElements(t,e){const i=performance.now();function a(r){const n=r-i,o=Math.min(n/e,1),s=o<.5?2*o*o:1-Math.pow(-2*o+2,2)/2;t.forEach((t=>{const e=t.from.x+(t.to.x-t.from.x)*s,i=t.from.y+(t.to.y-t.from.y)*s,a=t.from.height+(t.to.height-t.from.height)*s,r=t.from.width+(t.to.width-t.from.width)*s,n=t.from.rotation+(t.to.rotation-t.from.rotation)*s;t.element.style.left=e+"px",t.element.style.top=i+"px",t.element.style.height=a+"px",t.element.style.width=r+"px",t.element.style.transform=`rotate(${n}deg)`})),o<1&&requestAnimationFrame(a)}requestAnimationFrame(a)}static easeInOut(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}static add(t,e){return{x:t.x+e.x,y:t.y+e.y,rotation:t.rotation+e.rotation}}static getRelativeTo0(t,e){return{x:e.x-t.x,y:e.y-t.y}}static pxStringToInt(t){return parseInt(t.replace("px",""))}static animate(t,e,i,a,r=500){return this.animateMultiple([{id:t,from:e,to:i,isIncrement:a}],r)}static animateMultiple(t,e=500){const i=[];t.forEach((t=>{const e=document.getElementById(t.id);if(!e)return void console.log("element can't be found : "+t.id);const a=t.from??{x:this.pxStringToInt(e.style.left),y:this.pxStringToInt(e.style.top),rotation:e.style.rotation,height:e.style.height,width:e.style.width};a.rotation=a.rotation??0,a.height=a.height??e.clientHeight;const r=t.isIncrement?this.add(a,t.to):t.to;i.push({element:e,from:a,to:r})})),this.animateElements(i,e)}}t.exports=a},97226:function(t,e,i){var a={"./Daggerheart/class/bard-banner.webp":85519,"./Daggerheart/class/druid-banner.webp":60992,"./Daggerheart/class/guardian-banner.webp":42548,"./Daggerheart/class/ranger-banner.webp":85811,"./Daggerheart/class/rogue-banner.webp":73300,"./Daggerheart/class/seraph-banner.webp":55354,"./Daggerheart/class/sorcerer-banner.webp":17294,"./Daggerheart/class/warrior-banner.webp":18201,"./Daggerheart/class/wizard-banner.webp":52234,"./Daggerheart/domain/banner-arcana.webp":63611,"./Daggerheart/domain/banner-blade.webp":62931,"./Daggerheart/domain/banner-bone.webp":33989,"./Daggerheart/domain/banner-codex.webp":79151,"./Daggerheart/domain/banner-grace.webp":64559,"./Daggerheart/domain/banner-midnight.webp":36595,"./Daggerheart/domain/banner-sage.webp":24162,"./Daggerheart/domain/banner-splendor.webp":52593,"./Daggerheart/domain/banner-valor.webp":89751,"./Daggerheart/domain/logo-arcana.webp":99903,"./Daggerheart/domain/logo-blade.webp":1753,"./Daggerheart/domain/logo-bone.webp":37935,"./Daggerheart/domain/logo-codex.webp":40820,"./Daggerheart/domain/logo-grace.webp":54010,"./Daggerheart/domain/logo-midnight.webp":7925,"./Daggerheart/domain/logo-sage.webp":99224,"./Daggerheart/domain/logo-splendor.webp":1373,"./Daggerheart/domain/logo-valor.webp":39249,"./Daggerheart/other/cost.webp":80987,"./Gundam/cards/EXBP-001.webp":69411,"./Gundam/cards/GD01-028.webp":21495,"./Gundam/cards/GD01-034.webp":63515,"./Gundam/cards/GD01-040.webp":66732,"./Gundam/cards/GD01-041.webp":70958,"./Gundam/cards/GD01-091.webp":81708,"./Gundam/cards/GD01-107.webp":66642,"./Gundam/cards/ST02-001.webp":58864,"./Gundam/cards/ST02-002.webp":23941,"./Gundam/cards/ST02-005.webp":55045,"./Gundam/cards/ST02-010.webp":99834,"./Gundam/cards/ST02-012.webp":57160,"./Gundam/cards/ST02-013.webp":55214,"./Gundam/cards/ST02-015.webp":34078,"./blue.webp":70148,"./dark.webp":87975,"./konamiCode.webp":95768};function r(t){var e=n(t);return i(e)}function n(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=n,t.exports=r,r.id=97226},68499:function(t,e,i){"use strict";t.exports=i.p+"img/GundamLogo2.e101246d.png"},69411:function(t,e,i){"use strict";t.exports=i.p+"img/EXBP-001.bf21c22f.webp"},21495:function(t,e,i){"use strict";t.exports=i.p+"img/GD01-028.d05bd1e0.webp"},63515:function(t,e,i){"use strict";t.exports=i.p+"img/GD01-034.f747b003.webp"},66732:function(t,e,i){"use strict";t.exports=i.p+"img/GD01-040.acdadefd.webp"},70958:function(t,e,i){"use strict";t.exports=i.p+"img/GD01-041.c76a26ff.webp"},81708:function(t,e,i){"use strict";t.exports=i.p+"img/GD01-091.38c07c00.webp"},66642:function(t,e,i){"use strict";t.exports=i.p+"img/GD01-107.cbcb9846.webp"},58864:function(t,e,i){"use strict";t.exports=i.p+"img/ST02-001.4b73f4fb.webp"},23941:function(t,e,i){"use strict";t.exports=i.p+"img/ST02-002.b845951e.webp"},55045:function(t,e,i){"use strict";t.exports=i.p+"img/ST02-005.8bffb70c.webp"},99834:function(t,e,i){"use strict";t.exports=i.p+"img/ST02-010.33785975.webp"},57160:function(t,e,i){"use strict";t.exports=i.p+"img/ST02-012.bb62e8de.webp"},55214:function(t,e,i){"use strict";t.exports=i.p+"img/ST02-013.f56b594e.webp"},34078:function(t,e,i){"use strict";t.exports=i.p+"img/ST02-015.7e42f5aa.webp"},70898:function(t,e,i){"use strict";t.exports=i.p+"img/wingzero2.48fd7deb.gif"},70148:function(t,e,i){"use strict";t.exports=i.p+"img/blue.de89a950.webp"},87975:function(t,e,i){"use strict";t.exports=i.p+"img/dark.fff488e7.webp"},38525:function(t,e,i){"use strict";t.exports=i.p+"img/gradientBlack.a82f0a15.png"},95768:function(t,e,i){"use strict";t.exports=i.p+"img/konamiCode.ce17ba28.webp"},3270:function(t){"use strict";t.exports=JSON.parse('{"_":[{"id":"GD01-028","level":5,"cost":3,"name":"Gundam Sandrock","type":[0],"attribute":"(Operation Meteor)","link":"[Quatre Raberba Winner]","effectText":"Deploy Hand to Field (Maganac Corps)","effect":[{"trigger":"onplay","effect":"deploy","target":"Maganac Corps"}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":4},{"id":"GD01-034","level":4,"cost":2,"name":"Gundam Heavyarms","type":[0],"attribute":"(Operation Meteor)","link":"[Trowa Barton]","effectText":"During Pair this unit gains Breach 3","effect":[{"trigger":"onpair","effect":"breach","value":3}],"pilot":"","burstText":"","targetUnit":false,"ap":3,"hp":4},{"id":"GD01-040","level":5,"cost":2,"name":"Wing Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"","effect":[],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":3},{"id":"GD01-041","level":4,"cost":3,"name":"Shenlong Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Chang Wufei]","effectText":"Breach 3","effect":[{"trigger":"onplay","effect":"breach","value":3}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":3},{"id":"GD01-091","level":4,"cost":1,"name":"Chang Wufei","type":[1],"attribute":"(Operation Meteor)","link":"","effectText":"xxx","effect":[{"trigger":"onpair","target":"pairUnit","effect":"immuneApXIfBreach","value":4},{"trigger":"burst","effect":"sendToHand"}],"pilot":"During your turn, if this Unit has Breach, it can\'t receive battle damage from enemy Units with 3 or less AP.","burstText":"Add this card to your hand","targetUnit":false,"ap":2,"hp":1},{"id":"GD01-107","level":3,"cost":3,"name":"First Contact","type":[2],"attribute":"","link":"","effectText":"Main : Place 1 rested Resource.","effect":[{"trigger":"command","effect":"placeRestedResource","value":1},{"trigger":"burst","effect":"placeExResource","value":1}],"pilot":"","burstText":"Place 1 Ex Resource.","targetUnit":false,"ap":0,"hp":0},{"id":"ST02-001","level":6,"cost":4,"name":"Wing Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"Breach 5. This Unit may choose an active enemy Unit that is Lv4 or lower as its attack target.","effect":[{"trigger":"onplay","effect":"breach","value":5},{"trigger":"onplay","effect":"attackActiveEnnemyLvXOrLower","value":5}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":5},{"id":"ST02-002","level":3,"cost":3,"name":"Wing Gundam (Bird Mode)","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"Deploy : Place 1 Ex Resource","effect":[{"trigger":"onplay","effect":"placeExResource","value":1}],"pilot":"","burstText":"","targetUnit":false,"ap":2,"hp":2},{"id":"ST02-005","level":2,"cost":2,"name":"Maganac","type":[0],"attribute":"(Maganac Corps)","effect":[],"link":"","effectText":"","pilot":"","burstText":"","targetUnit":false,"ap":3,"hp":2},{"id":"ST02-010","level":4,"cost":1,"name":"Heero Yuy","type":[1],"attribute":"(Operation Meteor)","link":"","effectText":"","effect":[{"trigger":"onlink","type":"gain","target":"pairUnit","effect":"incruise","ap":1,"hp":1},{"trigger":"burst","effect":"sendToHand"}],"pilot":"This Unit get AP+1 and HP+1 while linked.","burstText":"Add this card to your hand","targetUnit":false,"ap":2,"hp":1},{"id":"ST02-012","level":4,"cost":1,"name":"Trowa Barton","type":[1,2],"attribute":"(Operation Meteor)","link":"","effectText":"Main : Choose 1 of your Units. It gains Breach 3 during this turn.","effect":[{"trigger":"command","effect":"gainThisTurn","target":"unit","effect2":"breach","value":3}],"pilot":"","burstText":"","targetUnit":true,"ap":1,"hp":1},{"id":"ST02-013","level":4,"cost":1,"name":"Quatre Raberba Winner","type":[1,2],"attribute":"(Operation Meteor)","link":"","effectText":"Action : during this battle, your shield area cards can\'t receive damage from ennemy Units that are Lv.4 or lower.","effect":[{"trigger":"action","effect":"protectionShieldLvXOrLower","value":4}],"pilot":"","burstText":"","activateDuringBattle":true,"targetUnit":false,"ap":1,"hp":1},{"id":"ST02-015","level":2,"cost":2,"name":"Saint Gabriel Institute","type":[3],"attribute":"(Academy) (Stronghold)","link":"","effectText":"Deploy : Add 1 of your Shields to your hand. Then look at the top 2 cards of your deck and return 1 to the top and 1 to the bottom.","effect":[{"trigger":"burst","effect":"sendToField"},{"trigger":"onplay","effect":"top2DeckCard1Top1Bottom"},{"trigger":"onplay","effect":"get1ShieldToHand"}],"pilot":"","burstText":"Deploy this card","targetUnit":false,"ap":0,"hp":5},{"id":"EXBP-001","level":0,"cost":0,"name":"EX Base","type":[3],"attribute":"","link":"","effectText":"","pilot":"","burstText":"","burst":[],"targetUnit":false,"ap":0,"hp":3},{"id":"xxx","level":0,"cost":0,"name":"xxx","type":[0],"attribute":"xxx","link":"","effectText":"xxx","effect":[],"pilot":"xxx","burstText":"","burst":[],"targetUnit":false,"ap":0,"hp":0}]}')}}]);
//# sourceMappingURL=206.74368531.js.map