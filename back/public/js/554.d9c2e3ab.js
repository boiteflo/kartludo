"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[554],{7554:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var n=function(){var e=this,t=e._self._c;return t("div",[e.loading?t("div",[e._v(" Chargement ")]):t("div",[e.isNew?t("div",[t("panel-create-deck",{attrs:{themes:e.themes,staples:e.staples,ranks:e.ranks},on:{save:e.saveDeck}})],1):e._e(),e.deck?t("div",[t("panel-deck",{attrs:{deck:e.deck}})],1):e._e()])])},l=[],a=(s(7658),s(7142)),i=s.n(a),d=s(9043),c=s(9092),r=s(9199),h=s(3811),o={name:"pageDeck",components:{panelCreateDeck:h.Z,panelDeck:r.Z},data:()=>({loading:!1,ranks:null,staples:null,themes:null,isNew:!1,id:null,deck:null}),mounted(){let e=window.location.href,t=e.indexOf("id=");this.isNew=t<1,this.isNew||(this.id=e.substring(t+3),d.Z.get("decks",this.id).then((e=>{this.showDeck(e)}))),d.Z.getAll("data").then((e=>{this.staples={stapleMonster:e.find((e=>"stapleMonster"===e.Id)),stapleSpell:e.find((e=>"stapleSpell"===e.Id)),stapleTrap:e.find((e=>"stapleTrap"===e.Id))},this.ranks=JSON.parse(e.find((e=>"ranks"===e.Id)).Value)})),d.Z.getAll("themes").then((e=>{this.themes=e.concat([this.themeAll]),this.loading=!1})),d.Z.getAll("decks").then((e=>{this.decks=e}))},methods:{showDeck(e){e||(window.location.href="/error/text=Ce%20deck%20n%20existe%20pas"),e.DeckListCards=[];let t=e.DeckList.split(",");for(let s=0;s<t.length;s++){const n=t[s];let l=i().includesX2(n)?"2":"1",a=i().removeX2(i().cleanup(n));const d=c.h.cards.find((e=>e.IdName===a));d&&e.DeckListCards.push({Order:s,Quantity:l,Card:d})}this.deck=e},saveDeck(e){this.loading=!0,delete e.Themes,d.Z.insert("decks",e).then((e=>window.location.href="/deck/id="+e.data))}}},k=o,p=s(1001),u=(0,p.Z)(k,n,l,!1,null,null,null),f=u.exports}}]);
//# sourceMappingURL=554.d9c2e3ab.js.map