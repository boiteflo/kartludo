"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[795],{8625:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var n=function(){var e=this,t=e._self._c;return t("div",[e.loading?t("div",[e._v(" Chargement ")]):t("div",[e.isNew?t("div",[t("panel-create-deck",{attrs:{themes:e.themes,staples:e.staples,ranks:e.ranks},on:{save:e.saveDeck}})],1):e._e(),e.deck?t("div",[t("panel-deck",{attrs:{deck:e.deck}})],1):e._e()])])},l=[],a=(s(7658),s(7925)),i=s(7142),d=s.n(i),c=s(9043),r=s(9092),h=s(7086),o=s(3345),k={name:"pageDeck",components:{panelCreateDeck:o.Z,panelDeck:h.Z},data:()=>({loading:!0,ranks:null,staples:null,themes:null,isNew:!1,id:null,deck:null}),mounted(){let e=window.location.href,t=e.indexOf("id=");this.isNew=t<1;let s=[c.Z.getAll("data"),c.Z.getAll("theme"),c.Z.getAll("deck")];this.isNew||(this.id=e.substring(t+3),s.push(c.Z.get("deck",this.id))),(0,a.D)(s).subscribe((e=>{this.staples={stapleMonster:e[0].find((e=>"stapleMonster"===e.Id)),stapleSpell:e[0].find((e=>"stapleSpell"===e.Id)),stapleTrap:e[0].find((e=>"stapleTrap"===e.Id))},this.ranks=JSON.parse(e[0].find((e=>"ranks"===e.Id)).Value),this.themes=e[1].concat([this.themeAll]),this.decks=e[2],e.length>3&&this.showDeck(e[3]),this.loading=!1}))},methods:{showDeck(e){e||(window.location.href="/error/text=Ce%20deck%20n%20existe%20pas"),e.DeckListCards=[];let t=e.DeckList.split(",");for(let s=0;s<t.length;s++){const n=t[s];let l=d().includesX2(n)?"2":"1",a=d().removeX2(d().cleanup(n));const i=r.h.cards.find((e=>e.IdName===a));i&&e.DeckListCards.push({Order:s,Quantity:l,Card:i})}this.deck=e},saveDeck(e){this.loading=!0,delete e.Themes,c.Z.insert("deck",e).then((e=>window.location.href="/deck/id="+e.data))}}},p=k,u=s(1001),f=(0,u.Z)(p,n,l,!1,null,null,null),m=f.exports}}]);
//# sourceMappingURL=795.6abcc9df.js.map