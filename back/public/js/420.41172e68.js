(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[420],{48110:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var i=a(56843),r=a(55550),s=a(64562),n=a(99709),o=a(13687),c=function(){var e=this,t=e._self._c;return t("div",[e.hide?t("div",{staticClass:"absolute"},[t(r.Z,{staticStyle:{"z-index":"10"},attrs:{variant:"text"},on:{click:function(t){e.showDrawer=!0}}})],1):t(i.Z,{attrs:{app:"",dark:"",color:"black"}},[t("div",{staticStyle:{width:"320px",position:"absolute",bottom:"0px",top:"0px",left:"160px",overflow:"hidden"}},[t("img",{staticStyle:{width:"100px"},attrs:{src:a(70898)}})]),t("div",{staticStyle:{width:"100px",position:"absolute",bottom:"0px",top:"0px",left:"120px",overflow:"hidden"}},[t("img",{staticStyle:{width:"100px",height:"100%"},attrs:{src:a(38525)}})]),t(r.Z,{attrs:{variant:"text"},on:{click:function(t){e.showDrawer=!0}}}),t("router-link",{attrs:{to:"/gundam"}},[t(s.Z,{staticStyle:{position:"relative"},attrs:{target:"_blank",text:""},on:{click:function(t){return e.unselect()}}},[t("h3",{staticStyle:{position:"absolute",left:"0px",top:"-15px","letter-spacing":"5px"}},[e._v("GUNDAM")]),t("span",{staticStyle:{position:"absolute",top:"5px",left:"0px","font-size":"10px"}},[e._v(e._s(e.version))])])],1),t(o.Z),e._l(e.links,(function(a){return t("link-button",{key:"menuBarr"+a.Text,attrs:{url:a.Url,external:a.external,text:e.$vuetify.breakpoint.width>=1050?a.Text:"",icon:a.Icon},on:{click:function(t){return e.unselect()}}})}))],2),t(n.Z,{attrs:{absolute:"",temporary:"",color:"black"},model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[t("img",{staticStyle:{width:"300px",height:"400px","object-position":"-50px 00px","object-fit":"cover",position:"absolute"},attrs:{src:a(68499)}}),t("br"),t("div",[t("router-link",{attrs:{to:"/daggerheart"}},[t(s.Z,{attrs:{target:"_blank",text:""}},[t("h3",{staticClass:"colorWhite"},[e._v("Gundam")])])],1),e._l(e.links,(function(a){return t("link-button",{key:"navigationDrawer"+a.Text,staticClass:"m5px w100p",attrs:{url:a.Url,external:a.external,text:a.Text,icon:a.Icon},on:{click:function(t){return e.unselect()}}})}))],2)]),!e.hide&&e.$vuetify.breakpoint.width>=800?t("div",{staticClass:"bg",staticStyle:{height:"60px"}}):e._e(),!e.hide&&e.$vuetify.breakpoint.width<800?t("div",{staticClass:"bg",staticStyle:{height:"20px"}}):e._e()],1)},d=[],l=a(69092),h=a(28310),p={name:"menuBarGundam",components:{linkButton:h.Z},props:["filteractive","hide"],data:()=>({store:l.h,version:"",searchString:"",showDrawer:!1,links:[{Text:"Encyclopédie",Icon:"mdi-book",external:!0,Url:"https://docs.google.com/presentation/d/13EMZDLqcDxfhsLHIzuKSSBsFIvNwjc2QLpWlew3B8Bk/edit?usp=drive_link"},{Text:"Cartes",Icon:"mdi-cards",Url:"/gundamTcgFight"}]}),mounted(){this.version=this.$version},methods:{}},g=p,u=a(1001),f=a(90490),m=a.n(f),y=(0,u.Z)(g,c,d,!1,null,null,null);"function"===typeof m()&&m()(y);var x=y.exports},74420:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return X}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg2 h100p"},[t("menu-bar-gundam",{attrs:{hide:!0}}),t("game")],1)},r=[],s=a(48110),n=a(64562),o=a(4324),c=function(){var e=this,t=e._self._c;return t("div",{key:e.refreshG,staticClass:"relative w100p h100p mask"},[t("div",{staticClass:"hide"},[e._l(16,(function(a){return t("div",{key:"x"+a,staticClass:"bgYellow absolute w100p",style:{height:e.game?.grid.box.height+"px",top:e.getGridY(a-1)+"px"}})})),e._l(16,(function(a){return t("div",{key:"y"+a,staticClass:"bgRed absolute h100p",style:{width:e.game?.grid.box.width+"px",left:e.getGridX(a-1)+"px"}})}))],2),e._l(e.game?.fields.filter((e=>e.show)),(function(a){return t("div",{key:a.zone,class:{absolute:!0,bg3:a.zone.endsWith("2"),bg:a.zone.endsWith("1"),fontSize12:!0,textVerticalCenter:!0,"text-center":!0,bgYellow2:a.isPlayer1==e.game.isPlayer1&&3===a.location},style:e.getFieldStyle(a.x,a.y,a.width,a.height),attrs:{id:a.zone},on:{dragover:e.onDragOver,drop:function(t){return e.onDrop(t,a)}}},[e._v(" "+e._s(a.text)+" ")])})),e.game?t("div",{staticClass:"bgRed absolute hide",style:e.getFieldStyle(e.game.grid.centerMini.card1.x,e.game.grid.centerMini.card1.y,e.game.grid.centerMini.card1.width,e.game.grid.centerMini.card1.height)}):e._e(),e.game&&e.game.textEffect?t("div",{staticClass:"bgWhite absolute mask text-center textVerticalCenter fontSize20",style:{...e.getFieldStyle(e.game.textEffect?.position.x,e.game.textEffect?.position.y,e.game.textEffect?.position.width,e.game.textEffect?.position.height),"z-index":11},attrs:{id:"textEffect"}},[t("div",{domProps:{innerHTML:e._s(e.game.textEffect.text)}})]):e._e(),e.aside?t("div",{staticClass:"flex absolute"},[t("div",{staticClass:"bg",staticStyle:{width:"300px",height:"100%"}},[t("div",{staticClass:"relative"},[t("gameCard",{attrs:{card:e.cardCenter,folder:"Gundam/cards/"}})],1),t("div",{staticStyle:{height:"420px"}}),t(n.Z,{staticClass:"bg m5px",attrs:{target:"_blank",text:""},on:{click:e.start}},[t(o.Z,[e._v("mdi-arrow-right-thin")]),e._v(" Start ")],1),t(n.Z,{staticClass:"bg m5px",attrs:{target:"_blank",text:""},on:{click:e.nextTurn}},[t(o.Z,[e._v("mdi-arrow-right-thin")]),e._v(" End Turn ")],1),t("div",{staticClass:"mp5px",domProps:{innerHTML:e._s(e.game?.logs)}})],1)]):e._e(),e._l(e.cards,(function(a){return t("div",{key:"B"+a.index,on:{dragover:e.onDragOver,drop:function(t){return e.onDrop(t,a)}}},[t("gameCard",{attrs:{id:"C"+a.index,card:a,folder:"Gundam/cards/",shine:a.selectable,hidestat:a.hidestat,draggable:"true"},on:{mouseover:function(t){return e.showCardMouseOver(a)},click:function(t){return e.showCard(a)},dragover:e.onDragOver,drop:function(t){return e.onDrop(t,a)}}})],1)})),e.game?t("div",[t("div",{staticClass:"bgYellow absolute cirlce10px",style:{left:e.game.grid.x0+"px",top:"30px",height:e.game.grid.hand.height-25+"px",width:e.game.fields[0].width+"px"}},[t(n.Z,{class:{bg:!0,w100p:!0,h100p:!0,shine:!e.freeze,fontSize12:!0},staticStyle:{"min-width":"0px"},attrs:{target:"_blank",text:""},on:{click:e.nextTurn}},[e._v(" End "),t("br"),e._v("Turn ")])],1)]):e._e(),e.game?.popup?t("div",{staticClass:"textVerticalCenter",staticStyle:{"z-index":"6",width:"100%",height:"64px",position:"fixed",top:"0px",left:"0px"}},[t("div",{staticStyle:{"background-color":"#FFFF00F0",width:"100%",height:"100%"}},[t("h3",{staticClass:"text-center colorBlack textVerticalCenter w100p",domProps:{innerHTML:e._s(e.game?.popup.text)}}),t("div",{staticClass:"flex-wrap w100p"},e._l(e.game?.popup.cards,(function(i,r){return t("div",{key:"PopUpCard"+r,staticClass:"mp5px"},[t("img",{style:e.getFieldStyleObj(e.game?.grid.card6),attrs:{src:a(85182)("./"+i.id+".webp")},on:{click:function(t){return e.selectChoiceCard(i)}}})])})),0),t("span",{staticClass:"relative"},e._l([],(function(a,i){return t("span",{key:"Choice"+i},[a.text?t(n.Z,{staticClass:"m10px",on:{click:function(t){return e.selectChoice(a)}}},[e._v(" "+e._s(a.text)+" ")]):e._e()],1)})),0)])]):e._e(),e.game?.popup?t("div",[e._v(" "+e._s(e.game.popup)+" ")]):e._e(),e.game&&e.game.tasks?t("div",{staticClass:"absolute",staticStyle:{"z-index":"12"}},[e._v(" "+e._s(e.game.tasks.map((e=>e.id)))+" ")]):e._e(),t("div",{staticClass:"absolute bgWhite mask",staticStyle:{top:"80px",width:"100%",height:"0px","z-index":"2"},attrs:{id:"divTitleParent"}},[t("div",{staticClass:"relative"},[t("div",{staticClass:"text-center absolute w100p title",staticStyle:{left:"-000px",top:"30px"}},[e._v(e._s(e.title)+" ")])])]),t("gameCard",{staticStyle:{"z-index":"12"},attrs:{id:"cardCenter",card:e.cardCenter,folder:"Gundam/cards/"},on:{click:function(t){return e.showCard(null)}}}),t("div",{staticClass:"absolute hide"},[e._v(" hello world ")])],2)},d=[],l=(a(57658),a(61711)),h=a.n(l),p=a(47327);class g{static addTasks(e,t){t.forEach((t=>{e.push(t)}))}static alreadyInclude(e,t){return e.find((e=>this.isEqual(e,t)))}static isEqual(e,t){const a=e.id===t.id&&e.isPlayer1===t.isPlayer1&&e.value===t.value;return!1!==a&&(!(e.card&&!t.card)&&(!(!e.card&&t.card)&&((!e.card||!t.card||e.card.index!==t.card.index)&&a)))}static removeDelay(e,t){const a=[...e].reverse().find((e=>e.id===t&&e.delay));a&&delete a.delay}}(0,p.Z)(g,"taskRefreshField","RefreshField"),(0,p.Z)(g,"taskShowTitle","ShowTitle"),(0,p.Z)(g,"taskDrawToCenter","DrawToCenter"),(0,p.Z)(g,"taskDrawToHand","DrawToHand"),(0,p.Z)(g,"taskEndAnimation","EndAnimation"),(0,p.Z)(g,"taskCardToMiniCenter","CardToMiniCenter"),(0,p.Z)(g,"taskCardToMiniCenter2","CardToMiniCenter2"),(0,p.Z)(g,"taskTextToMiniCenter2","TextToMiniCenter2"),(0,p.Z)(g,"taskTextToTrash","TextToTrash"),(0,p.Z)(g,"taskDeleteText","DeleteText"),(0,p.Z)(g,"taskCardToCenter","CardToCenter"),(0,p.Z)(g,"taskCardToTrash","CardToTrash"),(0,p.Z)(g,"taskDeleteCard","DeleteCard"),(0,p.Z)(g,"taskAttack","Attack"),(0,p.Z)(g,"taskSelectCards","SelectCards"),(0,p.Z)(g,"taskPlayCard","PlayCard"),(0,p.Z)(g,"taskPlayCardWithEffect","PlayCardWithEffect"),(0,p.Z)(g,"taskApplyEffect","ApplyEffect"),(0,p.Z)(g,"taskCardToHand","CardToHand");var u=g;class f{static apply(e,t,a,i){const r=[this.onpair,this.onlink];let s=a.effect?a.effect:[];r.includes(e)&&(s=s.concat(i.effect)),a.effectsRemaining=s.filter((t=>t.trigger==e));let n={};if(a.effectsRemaining.length<1)return{nothing:!0};const o=[];return a.effectsRemaining.forEach(((e,r)=>{n.stop||(e.index=r,n={...n,...this.applyEffect(t,a,i,e)},o.push(e.index))})),a.effectsRemaining=a.effectsRemaining.filter((e=>!o.includes(e.index))),n}static getEffectsRemaining(e,t,a){const i=[this.onpair,this.onlink];let r=t.effect?t.effect:[];return i.includes(e)&&(r=r.concat(a.effect)),r.filter((t=>t.trigger==e))}static applyEffect(e,t,a,i){if(i.target&&!a&&"unit"===i.target)return x.logEffect(i,"Can t handle this effect (because of target=unit) : "+JSON.stringify(i)),{stop:!0};if("get1ShieldToHand"===i.effect){if(e.shield.length<1)return;const t=e.shield[0],a=this.animDuration,r="Get one shield to hand";return u.addTasks(x.game.tasks,[{id:u.taskCardToHand,delay:a,card1:t,isPlayer1:t.isPlayer1},{id:u.taskTextToTrash},{id:u.taskRefreshField,isPlayer1:t.isPlayer1},{id:u.taskDeleteText}]),x.logEffect(i,r),{}}if("top2DeckCard1Top1Bottom"===i.effect)return{};if("top2DeckCard1Top1BottomSelect"===i.effect)x.logEffect(i,`With ${t.name}, move top 2 deck cards Above or bellow`);else{if("protectionShieldLvXOrLower"===i.effect){if(e.base||a.index)return;const r=e.shield[0],s=r.level<i.value;return s&&x.logEffect(i,`attack cancel because ${t.name} has level < ${i.value}`),{cancel:s}}if("gainThisTurn"===i.effect){const r=x.clone(i);return delete r.target,r.effect=r.effect2,x.logEffect(i,`${t.name} give ${i.effect2} to ${a.name}`),this.applyEffect(e,a,null,r),a.removeEndTurn=[r],{stop:!0}}if("incruise"===i.effect)t.ap+=i.ap,t.hp+=i.hp,x.logEffect(i,`${t.name} have been incruised by AP ${i.ap} and HP ${i.hp}`);else{if("sendToHand"===i.effect)return x.spawnCard(e,t,t.location,x.locationHand),x.logEffect(i,`${t.name} is send to hand`),{stop:!0,cancel:!0,refreshHandOpponent:!0};if("sendToField"===i.effect)return x.move(e,t,x.locationShield,x.locationField),x.logEffect(i,`${t.name} is send to hand`),{stop:!0,cancel:!0,refreshHandOpponent:!0};if("sendToBase"===i.effect)return t.location=x.locationShield,t.position=e.positions.shield,u.addTasks(x.game.tasks,[{id:u.taskPlayCard,card1:e.shield[0],zone:e.positions.base}]),{stop:!0};if("placeExResource"===i.effect)e.resourcesEx+=i.value,e.resourcesAvailable+=i.value,e.resAString=e.resourcesAvailable+"/"+e.resourcesMax,x.logEffect(i,`${t.name} deploy ${i.value} ex resource`);else if("placeRestedResource"===i.effect)e.resourcesMax+=i.value,e.resAString=x.getRes(e),x.logEffect(i,`${t.name} deploy ${i.value} rested resource`);else if("breach"===i.effect)(!t.breach||t.breach<i.value)&&(t.breach=i.value,x.logEffect(i,`${t.name} has breach ${i.value}`));else if("deploy"===i.effect){const a=e.hand.filter((e=>e.name.includes(i.target)||e.attribute.includes(i.target)));if(a.length<1)return;const r=a[0];r.selectable=!1,r.canAttack=!1,x.move(e,r,r.location,x.locationField),x.logEffect(i,`${t.name} deploy ${r.name}`),this.apply(f.onplay,e,r,null)}else"attackActiveEnnemyLvXOrLower"===i.effect?(!t.attackActiveEnnemy||t.attackActiveEnnemy<i.value)&&(t.attackActiveEnnemy=i.value,x.logEffect(i,`${t.name} can attack unit with AP < ${i.value}`)):"immuneApXIfBreach"===i.effect&&t.breach&&(!t.immuneAp||t.immuneAp<i.value)&&(t.immuneAp=i.value,x.logEffect(i,`${t.name} is now immune to AP < ${i.value}`))}}}static removeOneTurnEffect(e){e.filter((e=>e.removeEndTurn)).forEach((e=>{const t=[];e.removeEndTurn.forEach((a=>{delete e[a.effect],t.push(a.effect)})),x.log(`${e.name} lost ${t.join(", ")}`)}))}}(0,p.Z)(f,"onplay","onplay"),(0,p.Z)(f,"onpair","onpair"),(0,p.Z)(f,"onlink","onlink"),(0,p.Z)(f,"battle","battle"),(0,p.Z)(f,"burst","burst"),(0,p.Z)(f,"command","command"),(0,p.Z)(f,"self","self"),(0,p.Z)(f,"unit","unit"),(0,p.Z)(f,"pairUnit","pairUnit"),(0,p.Z)(f,"gainThisTurn","gainThisTurn"),(0,p.Z)(f,"gain","gain"),(0,p.Z)(f,"hand","hand");var m=f;class y{static getLocationArrayProperty(e){return e==this.locationEmpty?"empty":e==this.locationDeck?"deck":e==this.locationShield?"shield":e==this.locationHand?"hand":e==this.locationField?"field":e==this.locationBase?"base":e==this.locationResource?"resource":"trash"}static spawn(e,t,a,i,r){const s=this.spawnNotShown(e,t,a,i);return s.zindex=11,y.game.cards=y.addIn(y.game.cards,s),r||u.addTasks(y.game.tasks,[{id:u.taskRefreshField,isPlayer1:e.isPlayer1}]),s}static spawnNotShown(e,t,a,i){const r=y.getLocationArrayProperty(a),s=y.getLocationArrayProperty(i);return t?e[r]=y.removeByIndex(e[r],t.index):t=e[r].splice(0,1)[0],t.position=e.positions[r],t.isPlayer1=e.isPlayer1,t.active=!0,e[s]=y.addIn(e[s],t),t}static spawnOrMove(e,t,a,i,r){const s=y.cards.includes((e=>e.index===t.index));s?this.spawn(e,t,a,i,r):this.move(e,t,a,i,r)}static move(e,t,a,i,r){const s=y.getLocationArrayProperty(a),n=y.getLocationArrayProperty(i);return e[s]=y.removeByIndex(e[s],t),e[n]=y.addIn(e[n],t),r||u.addTasks(y.game.tasks,[{id:u.taskRefreshField,isPlayer1:e.isPlayer1}]),t}static pair(e,t,a){const i=y.getLocationArrayProperty(a.location);e[i]=y.removeByIndex(e[i],a),t.pair=a,a.selectable=!1,a.isPaired=!0,a.zindex=1,t.zindex=2,t.ap+=a.ap,t.hp+=a.hp,m.apply(m.onpair,e,t,a),u.addTasks(y.game.tasks,[{id:u.taskRefreshField,isPlayer1:e.isPlayer1}]),this.isLink(t,a)&&(t.link=!0,a.link=!0,t.active=!0,t.selectable=!0,t.canAttack=!0,m.apply(m.onlink,e,t,a))}static isLink(e,t){return e.link.includes(t.name)}static createCard(e){const t=this.clone(this.cards.find((t=>t.id===e)));return t.index=this.getNextIndex(),t}static getNextIndex(){return this.index++,this.index}static setActive(e,t){e.active=t,e.selectable=!1,e.canAttack=t;const a=e.active?0:90;e.to||(e.to=this.clone(e.position)),e.to.rotation=a}static getPlayerTurn(){return y.isPlayer1?y.game.player1:y.game.player2}static getPlayerTurnOpponent(){return y.isPlayer1?y.game.player2:y.game.player1}static getPlayer(e){return e?y.game.player1:y.game.player2}static getOpponent(e){return e?y.game.player1:y.game.player2}static getAndRemoveFirst(e){return e.splice(0,1)[0]}static removeByIndex(e,t){return e.filter((e=>e.index!==t.index))}static addIn(e,t){if(e&&!e.includes((e=>e.index===t.index)))return e.concat([t])}static sortRandom(e){return e.sort((()=>Math.random()-.5))}static startAttackAnimation(e,t,a,i){const r=this.animDuration;u.addTasks(y.game.tasks,[{id:u.taskCardToMiniCenter,card1:a,isPlayer1:a.isPlayer1},{id:u.taskCardToMiniCenter2,delay:r,card1:i,isPlayer1:i.isPlayer1},{id:u.taskAttack,player:e,opponent:t,attacker:a,target:i,delay:r}])}static moveCardToMiniCenterThenBackToSquareOne(e,t){const a=this.animDuration;u.addTasks(y.game.tasks,[{id:u.taskCardToMiniCenter,card1:e,isPlayer1:e.isPlayer1},{id:u.taskCardToMiniCenter2,delay:2*a,card1:t,isPlayer1:t.isPlayer1},{id:u.taskRefreshField,isPlayer1:e.isPlayer1},{id:u.taskRefreshField,isPlayer1:t.isPlayer1}])}static moveCardToMiniCenterWithTextThenBackToSquareOne(e,t){const a=this.animDuration;u.addTasks(y.game.tasks,[{id:u.taskCardToMiniCenter,card1:e,isPlayer1:e.isPlayer1},{id:u.taskTextToMiniCenter2,delay:2*a,text:t},{id:u.taskTextToTrash},{id:u.taskRefreshField,isPlayer1:e.isPlayer1},{id:u.taskDeleteText}])}static moveCardToMiniCenterWithTextThenDeleteIt(e,t){const a=this.animDuration;u.addTasks(y.game.tasks,[{id:u.taskCardToMiniCenter,card1:e,isPlayer1:e.isPlayer1},{id:u.taskTextToMiniCenter2,delay:2*a,text:t},{id:u.taskTextToTrash},{id:u.taskCardToTrash,delay:a,card1:e,isPlayer1:e.isPlayer1},{id:u.taskDeleteCard,card1:e,isPlayer1:e.isPlayer1},{id:u.taskDeleteText},{id:u.taskRefreshField,isPlayer1:e.isPlayer1}])}static moveCardToCenterThenDeleteIt(e,t=!1){const a=this.animDuration;u.addTasks(y.game.tasks,[{id:u.taskCardToCenter,delay:a,card1:e,isPlayer1:e.isPlayer1},{id:u.taskCardToTrash,delay:a,card1:e,isPlayer1:e.isPlayer1},{id:u.taskDeleteCard,card1:e,removeBase:t,isPlayer1:e.isPlayer1}])}static moveCardToCenterThenBackToSquareOne(e){const t=this.animDuration;u.addTasks(y.game.tasks,[{id:u.taskCardToCenter,delay:t,card1:e,isPlayer1:e.isPlayer1},{id:u.taskRefreshField,isPlayer1:e.isPlayer1}])}static moveCardToTrashThenDeleteIt(e,t=!1){u.addTasks(y.game.tasks,[{id:u.taskCardToTrash,delay:this.animDuration,card1:e,isPlayer1:e.isPlayer1},{id:u.taskDeleteCard,card1:e,removeBase:t,isPlayer1:e.isPlayer1}])}static log(e){this.game.logs=e+"<br>"+this.game.logs}static logEffect(e,t){this.log(t),e.texts=(e.texts?e.texts:[]).concat([t])}static clone(e){return Object.assign({},e)}}(0,p.Z)(y,"game",null),(0,p.Z)(y,"grid",void 0),(0,p.Z)(y,"index",1),(0,p.Z)(y,"isPlayer1",void 0),(0,p.Z)(y,"animDuration",500),(0,p.Z)(y,"phase",0),(0,p.Z)(y,"phaseStart",0),(0,p.Z)(y,"phaseDraw",1),(0,p.Z)(y,"phaseResource",2),(0,p.Z)(y,"phaseMain",3),(0,p.Z)(y,"phaseAttack",4),(0,p.Z)(y,"phaseBlock",5),(0,p.Z)(y,"phaseAction",6),(0,p.Z)(y,"phaseDamage",7),(0,p.Z)(y,"phaseEnd",8),(0,p.Z)(y,"locationEmpty",0),(0,p.Z)(y,"locationDeck",1),(0,p.Z)(y,"locationShield",2),(0,p.Z)(y,"locationHand",3),(0,p.Z)(y,"locationField",4),(0,p.Z)(y,"locationBase",5),(0,p.Z)(y,"locationTrash",6),(0,p.Z)(y,"locationResource",7);var x=y;class b{static createGrid(e,t){const a={};a.width=e,a.height=t-0,a.border=5,a.border2=2*a.border;const i=16;a.widthB=a.width-a.border*(i+1),a.heightB=a.height-a.border*(i+1),a.box={height:a.heightB/i},a.box.width=a.widthB/i,a.boxbig={height:2*a.box.height+a.border,width:2*a.box.width+a.border},a.hand={width:(a.box.width+a.border)*i-a.border,height:3*(a.box.height+a.border)-a.border},a.field={width:a.hand.width-a.box.width-a.border,height:a.hand.height+2*(a.box.height+a.border)},a.hand.card=this.getCardSize(a.hand.width,a.hand.height,6),a.field.card=this.getCardSize(a.field.width,a.field.height,6),a.card6=this.getCardSize(a.width,a.height,6);for(let r=0;r<i;r++)a["x"+r]=5+r*(a.box.width+5),a["y"+r]=5+r*(a.box.height+5);return a.center=this.getCardSize(a.width-a.border2,a.height-a.border2,1),a.centerMini={x:a.x2,y:a.y2,width:a["x"+(i-2)]-a.x2,height:a["y"+(i-2)]-a.y2,location:0,zone:"centerMini1"},a.centerMini.card1=this.getCardSize(a.centerMini.width,a.centerMini.height,2),a.centerMini.card1.x=a.centerMini.x,a.centerMini.card1.y=a.centerMini.y,a.centerMini.card2=x.clone(a.centerMini.card1),a.centerMini.card2.x+=a.centerMini.card1.width,a}static getPositions(e,t){let a={};return a=e.box.width>50?{base:this.createZone(t,e.x15,e.y8,e.x0,e.y7,e.box.width,e.box.height,"base",x.locationBase),shield:this.createZone(t,e.x15,e.y9,e.x0,e.y6,e.box.width,e.box.height,"shield",x.locationShield),deck:this.createZone(t,e.x15,e.y10,e.x0,e.y5,e.box.width,e.box.height,"deck",x.locationDeck),trash:this.createZone(t,e.x15,e.y11,e.x0,e.y4,e.box.width,e.box.height,"trash",x.locationTrash),resource:this.createZone(t,e.x15,e.y12,e.x0,e.y3,e.box.width,e.box.height,"res",x.locationResource),hand:this.createZone(t,e.x0,e.y13,e.x1,e.y0,e.hand.width,e.hand.height,"hand",x.locationHand),field:this.createZone(t,e.x0,e.y8,e.x1,e.y3,e.field.width,e.field.height,"field",x.locationField)}:{base:this.createZone(t,e.x14,e.y8,e.x0,e.y7,2*e.box.width,e.box.height,"base",x.locationBase),shield:this.createZone(t,e.x14,e.y9,e.x0,e.y6,2*e.box.width,e.box.height,"shield",x.locationShield),deck:this.createZone(t,e.x14,e.y10,e.x0,e.y5,2*e.box.width,e.box.height,"deck",x.locationDeck),trash:this.createZone(t,e.x14,e.y11,e.x0,e.y4,2*e.box.width,e.box.height,"trash",x.locationTrash),resource:this.createZone(t,e.x14,e.y12,e.x0,e.y3,2*e.box.width,e.box.height,"res",x.locationResource),hand:this.createZone(t,e.x0,e.y13,e.x2,e.y0,e.hand.width,e.hand.height,"hand",x.locationHand),field:this.createZone(t,e.x0,e.y8,e.x2,e.y3,e.field.width-5-e.box.width,e.field.height,"field",x.locationField)},t||(a.hand.width=a.hand.width-e.box.width-3*e.border2),a}static createZone(e,t,a,i,r,s,n,o,c){const d=e?"1":"2";return{x:e?t:i,y:e?a:r,zone:o+d,width:s,height:n,location:c,isPlayer1:e,show:!0}}static createField(e,t){let a=[e.deck,e.trash,e.shield,e.resource,e.hand,e.field,e.base].concat([t.deck,t.trash,t.shield,t.resource,t.hand,t.field,t.base]).concat([x.game.grid.centerMini]);return a}static refresh(e,t,a=!1){let i=t.height;t.location==x.locationField&&(i*=.75);const r=a?t:this.getCardSize(t.width,i,e.length);e.forEach(((a,i)=>{a.to=this.getCardPosition(i,e.length,t,r,a),a.location=t.location,a.zindex=a.pair?2:1,t.location==x.locationField&&a.pair&&(a.pair.to=this.getPairPosition(a.to))}))}static getPairPosition(e){const t=x.clone(e);return t.y+=.25*t.height,t.rotation=0,t}static getCardSize(e,t,a){let i=e/(a+.25),r=150*i/107;r>t&&(r=t,i=107*r/150);const s=(e-i)/2,n=(t-r)/2;return{x:s,y:n,width:i,height:r}}static getCardPosition(e,t,a,i,r){const s=r.active?0:90;return{x:a.x+this.getXCenter(a.width,i.width,t,e),y:a.y,width:i.width,height:i.height,rotation:s}}static getPositionHandWithRotation(e,t,a,i){const r=.75*x.grid.card.width,s=r/2,n=a<i/2?-1:1;let o=0,c=i/2,d=0;if(this.isPair(i)){const e=x.grid.hand.width/2-s+s*n;c=a<i/2?Math.floor(i/2)-1:Math.ceil(i/2),d=e+Math.abs(c-a)*r*n}else{const e=x.grid.hand.width/2-s;d=e+Math.abs(c-a)*r*n}const l=e.isPlayer1?1:-1;o=a-c;const h=l*Math.round(o/c*20),p=l*(r/4)*Math.abs(c-a);t.ap=a,t.hp=c;const g={x:e.positions.hand.x+d,y:e.positions.hand.y+p+20,width:x.grid.card.width,height:x.grid.card.height,rotation:h};return g}static isPair(e){return e%2==0}static getCenter(e,t,a,i){const r=e/2,s=a/2,n=s-i;return r-n*t}static getXCenter(e,t,a,i){const r=e/a;return r/2+r*i-t/2}}var T=b;class k{static createGame(e,t,a){x.game={cards:[],tasks:[],popup:null},x.cards=e.getCards(),x.grid=T.createGrid(t,a),x.game.grid=x.grid;const i=e.getDeckLenth();x.game.player1=this.createPlayer(x.cards,i,!0),x.game.player2=this.createPlayer(x.cards,i,!1),x.game.player1.positions=T.getPositions(x.grid,!0),x.game.player2.positions=T.getPositions(x.grid,!1),x.game.fields=T.createField(x.game.player1.positions,x.game.player2.positions),x.isPlayer1=1==Math.floor(2*Math.random());for(let r=0;r<e.getHandStartLength();r++)x.spawn(x.game.player1,null,x.locationDeck,x.locationHand,!0),x.spawn(x.game.player2,null,x.locationDeck,x.locationHand,!0);return x.game}static createPlayer(e,t,a){let i=[];return e.forEach((e=>{i.push(x.createCard(e.id)),i.push(x.createCard(e.id)),i.push(x.createCard(e.id)),i.push(x.createCard(e.id))})),i=i.splice(0,t),i.forEach((e=>{e.index=x.getNextIndex(),e.isPlayer1=a,e.location=x.locationDeck})),i=x.sortRandom(i),{deck:i,shield:[],hand:[],field:[],trash:[],isPlayer1:a,base:[],empty:[]}}}var v=k;class w{static createGame(e,t,a){return v.createGame(e,t,a),x.game.manager=e,e.setup(x.game),x.animDuration=e.getAnimDuration(),this.nextTurn(x.game)}static nextTurn(e){x.isPlayer1=!x.isPlayer1,e.isPlayer1=x.isPlayer1;const t=x.isPlayer1?"1":"2";return u.addTasks(e.tasks,[{id:u.taskRefreshField,isPlayer1:!0},{id:u.taskRefreshField,isPlayer1:!1},{id:u.taskShowTitle,value:"New turn for player "+t,isPlayer1:x.isPlayer1,delay:1200},{id:u.taskDrawToCenter,isPlayer1:x.isPlayer1,delay:x.animDuration}]),e.manager.nextTurn(),this.handleTasks(e)}static continue(e){return this.endAnimation(e),this.handleTasks(e)}static endAnimation(e){e.cards.forEach((e=>{e.positionDrag&&(e.position={...e.position,x:e.positionDrag.x,y:e.positionDrag.y}),e.to&&(e.position=e.to),delete e.to,delete e.positionOld,delete e.positionDrag})),delete e.wait,delete e.showTitle,e.refresh=!0}static playCard(e,t,a,i){return e.manager.playCard(x.getPlayerTurn(),t,a,i),e}static selectChoiceCard(e,t){return e.manager.selectChoiceCard(e,t)}static handleTasks(e){let t=e.tasks[0];e.refresh=!!t;let a=0;while(t&&a<100){const i=t.isPlayer1?e.player1:e.player2;if(t.id===u.taskRefreshField)e.manager.refreshFieldAndHand(i);else if(t.id===u.taskDrawToCenter){const e=x.spawn(i,null,x.locationDeck,x.locationHand);e.to=x.grid.center,x.game.lastCard=e}else if(t.id===u.taskDrawToHand)e.manager.refreshFieldAndHand(i);else if(t.id===u.taskShowTitle)e.showTitle=t.value;else if(t.id===u.taskEndAnimation)this.endAnimation(e);else if(t.id===u.taskDeleteCard)x.game.cards=x.removeByIndex(x.game.cards,t.card1),t.removeBase&&(x.getPlayer(t.card1.isPlayer1).base=[]),t.card1.pair&&(x.game.cards=x.removeByIndex(x.game.cards,t.card1.pair),delete t.card1.pair);else if(t.id===u.taskCardToMiniCenter)t.card1.to=x.grid.centerMini.card1,t.card1.zindex=11;else if(t.id===u.taskCardToMiniCenter2)t.card1&&(t.card1.to=x.grid.centerMini.card2,t.card1.zindex=11);else if(t.id===u.taskCardToCenter)t.card1.to=x.grid.center,t.card1.zindex=11;else if(t.id===u.taskCardToTrash){const a=x.getPlayer(t.card1.isPlayer1);e.manager.refreshFieldAndHand(a),t.card1.location!==x.locationTrash&&x.move(a,t.card1,t.card1.location,x.locationTrash,!0),t.card1.to=x.clone(a.positions.trash),t.card1.pair&&(t.card1.pair.to=t.card1.to,x.move(a,t.card1.pair,t.card1.pair.location,x.locationTrash,!0)),t.card1.hidestat=!0,t.card1.to.height=0}else if(t.id===u.taskAttack)e.manager.attack(t.player,t.opponent,t.attacker,t.target);else if(t.id===u.taskTextToMiniCenter2)e.textEffect={text:t.text,position:x.clone(x.grid.centerMini.card2)},e.textEffect.to=x.clone(e.textEffect.position),e.textEffect.position.height=0;else if(t.id===u.taskTextToTrash)e.textEffect.position.height=x.grid.centerMini.card2.height,e.textEffect.to={...x.clone(e.textEffect.position),height:0},e.refreshOnlyTextEffect=!0;else if(t.id===u.taskDeleteText)e.refreshOnlyTextEffect=!1,delete e.textEffect;else{if(t.id===u.taskSelectCards)return e.popup=t,e;if(t.id===u.taskCardToHand)x.spawn(i,t.card1,t.card1.location,x.locationHand);else if(t.id===u.taskPlayCard){const a=x.getPlayer(t.card1.isPlayer1),i=e.manager.playCard(a,t.card1,t.card2,t.zone);if(i&&i.stop)return e}else if(t.id===u.taskPlayCardWithEffect){const a=x.getPlayer(t.card1.isPlayer1),i=e.manager.playCard(a,t.card1,t.card2,t.zone,!0);if(i&&i.stop)return e}}if(t.delay)return e.wait=t.delay,t=e.tasks.splice(0,1)[0],e;t=e.tasks.splice(0,1)[0],t=e.tasks[0],a++}return e}}var C=w,P=JSON.parse('{"_":[{"id":"GD01-028","level":5,"cost":3,"name":"Gundam Sandrock","type":[0],"attribute":"(Operation Meteor)","link":"[Quatre Raberba Winner]","effectText":"Deploy Hand to Field (Maganac Corps)","effect":[{"trigger":"onplay","effect":"deploy","target":"Maganac Corps"}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":4},{"id":"GD01-034","level":4,"cost":2,"name":"Gundam Heavyarms","type":[0],"attribute":"(Operation Meteor)","link":"[Trowa Barton]","effectText":"During Pair this unit gains Breach 3","effect":[{"trigger":"onpair","effect":"breach","value":3}],"pilot":"","burstText":"","targetUnit":false,"ap":3,"hp":4},{"id":"GD01-040","level":5,"cost":2,"name":"Wing Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"","effect":[],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":3},{"id":"GD01-041","level":4,"cost":3,"name":"Shenlong Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Chang Wufei]","effectText":"Breach 3","effect":[{"trigger":"onplay","effect":"breach","value":3}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":3},{"id":"GD01-091","level":4,"cost":1,"name":"Chang Wufei","type":[1],"attribute":"(Operation Meteor)","link":"","effectText":"xxx","effect":[{"trigger":"onpair","target":"pairUnit","effect":"immuneApXIfBreach","value":4},{"trigger":"burst","effect":"sendToHand"}],"pilot":"During your turn, if this Unit has Breach, it can\'t receive battle damage from enemy Units with 3 or less AP.","burstText":"Add this card to your hand","targetUnit":false,"ap":2,"hp":1},{"id":"GD01-107","level":3,"cost":3,"name":"First Contact","type":[2],"attribute":"","link":"","effectText":"Main : Place 1 rested Resource.","effect":[{"trigger":"command","effect":"placeRestedResource","value":1},{"trigger":"burst","effect":"placeExResource","value":1}],"pilot":"","burstText":"Place 1 Ex Resource.","targetUnit":false,"ap":0,"hp":0},{"id":"ST02-001","level":6,"cost":4,"name":"Wing Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"Breach 5. This Unit may choose an active enemy Unit that is Lv4 or lower as its attack target.","effect":[{"trigger":"onplay","effect":"breach","value":5},{"trigger":"onplay","effect":"attackActiveEnnemyLvXOrLower","value":5}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":5},{"id":"ST02-002","level":3,"cost":3,"name":"Wing Gundam (Bird Mode)","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"Deploy : Place 1 Ex Resource","effect":[{"trigger":"onplay","effect":"placeExResource","value":1}],"pilot":"","burstText":"","targetUnit":false,"ap":2,"hp":2},{"id":"ST02-005","level":2,"cost":2,"name":"Maganac","type":[0],"attribute":"(Maganac Corps)","effect":[],"link":"","effectText":"","pilot":"","burstText":"","targetUnit":false,"ap":3,"hp":2},{"id":"ST02-010","level":4,"cost":1,"name":"Heero Yuy","type":[1],"attribute":"(Operation Meteor)","link":"","effectText":"","effect":[{"trigger":"onlink","type":"gain","target":"pairUnit","effect":"incruise","ap":1,"hp":1},{"trigger":"burst","effect":"sendToHand"}],"pilot":"This Unit get AP+1 and HP+1 while linked.","burstText":"Add this card to your hand","targetUnit":false,"ap":2,"hp":1},{"id":"ST02-012","level":4,"cost":1,"name":"Trowa Barton","type":[1,2],"attribute":"(Operation Meteor)","link":"","effectText":"Main : Choose 1 of your Units. It gains Breach 3 during this turn.","effect":[{"trigger":"command","effect":"gainThisTurn","target":"unit","effect2":"breach","value":3}],"pilot":"","burstText":"","targetUnit":true,"ap":1,"hp":1},{"id":"ST02-013","level":4,"cost":1,"name":"Quatre Raberba Winner","type":[1,2],"attribute":"(Operation Meteor)","link":"","effectText":"Action : during this battle, your shield area cards can\'t receive damage from ennemy Units that are Lv.4 or lower.","effect":[{"trigger":"action","effect":"protectionShieldLvXOrLower","value":4}],"pilot":"","burstText":"","activateDuringBattle":true,"targetUnit":false,"ap":1,"hp":1},{"id":"ST02-015","level":2,"cost":2,"name":"Saint Gabriel Institute","type":[3],"attribute":"(Academy) (Stronghold)","link":"","effectText":"Deploy : Add 1 of your Shields to your hand. Then look at the top 2 cards of your deck and return 1 to the top and 1 to the bottom.","effect":[{"trigger":"burst","effect":"sendToBase"},{"trigger":"onplay","effect":"top2DeckCard1Top1Bottom"},{"trigger":"onplay","effect":"get1ShieldToHand"}],"pilot":"","burstText":"Deploy this card","targetUnit":false,"ap":0,"hp":5},{"id":"EXBP-001","level":0,"cost":0,"name":"EX Base","type":[3],"attribute":"","link":"","effectText":"","pilot":"","burstText":"","burst":[],"targetUnit":false,"ap":0,"hp":3},{"id":"xxx","level":0,"cost":0,"name":"xxx","type":[0],"attribute":"xxx","link":"","effectText":"xxx","effect":[],"pilot":"xxx","burstText":"","burst":[],"targetUnit":false,"ap":0,"hp":0}]}');class D{static nextTurn(e){x.game.cards.forEach((e=>e.selectable=!1)),e.field.forEach((e=>{e.active=!0,e.canAttack=!0}))}static setSelectable(e){e.hand.forEach((t=>{const a=Math.max(e.resourcesMax,e.resourcesAvailable),i=t.level<=a&&t.cost<=e.resourcesAvailable;t.selectable=i})),e.field.forEach((e=>{e.selectable=e.canAttack}))}static play(e,t,a,i,r){const s=!a&&!i;if(!s)return t.location===x.locationHand?this.playFromHand(e,t,a,i,r):t.location===x.locationField?this.attack(e,t,a,i):this.playCard(e,t,a,i,r,!1);this.sendCardBackToSquareOne(t)}static sendCardBackToSquareOne(e){const t=e.active?0:90;return e.to={...x.clone(e.position),rotation:t},e.position={...e.position,...e.positionDrag},x.game.refresh=!0,x.game}static playFromHand(e,t,a,i,r){const s=i.isPlayer1==e.isPlayer1;if(s&&i.location!=x.locationHand)return this.playCard(e,t,a,i,r,!0);this.sendCardBackToSquareOne(t)}static playCard(e,t,a,i,r,s){x.cards.includes((e=>e.index===t.index))||(x.cards=x.cards.concat([t]));const n=m.getEffectsRemaining(m.onplay,t,a),o=n.map((e=>`${e.effect} ${e.value}`)).join("<br>"),c=x.animDuration;if(n&&n.length>0){if(!r)return void u.addTasks(x.game.tasks,[{id:u.taskCardToMiniCenter,card1:t,isPlayer1:t.isPlayer1},{id:u.taskTextToMiniCenter2,delay:c,text:o},{id:u.taskPlayCardWithEffect,isPlayer1:t.isPlayer1,card1:t,card2:a,zone:i}]);u.addTasks(x.game.tasks,[{id:u.taskTextToTrash,delay:c},{id:u.taskDeleteText}])}const d=m.apply(m.onplay,e,t);if(!d.stop){if(this.isCardUnit(t))return t.canAttack=!0,s&&(e.resourcesAvailable-=t.cost),void x.spawnOrMove(e,t,t.location,e.positions.field.location);if(this.isCardBase(t))return e.base.length>0&&u.addTasks(x.game.tasks,[{id:u.taskCardToTrash,card1:e.base[0]}]),void x.spawnOrMove(e,t,t.location,x.locationBase);if(this.isCardPilot(t)&&a&&this.isCardUnit(a))return a.pair?void this.sendCardBackToSquareOne(t):(s&&(e.resourcesAvailable-=t.cost),void x.pair(e,a,t));if(this.isCardCommand(t)){const a=m.apply(m.command,e,t);if(a.stop)return;return s&&(e.resourcesAvailable-=t.cost),x.spawnOrMove(e,t,t.location,x.locationTrash),void x.moveCardToMiniCenterWithTextThenDeleteIt(t,"giant effect")}this.sendCardBackToSquareOne(t)}}static attack(e,t,a,i){const r=i.isPlayer1==e.isPlayer1;if(r)return void this.sendCardBackToSquareOne(t);const s=x.getPlayerTurnOpponent();if(a&&a.isPlayer1===s.isPlayer1)return a.active?void this.sendCardBackToSquareOne(t):void x.startAttackAnimation(e,s,t,a);if(s.shield<1&&s.base.length<1)return this.end(s);if(s.base.length>0){const a=s.base[0];x.startAttackAnimation(e,s,t,a)}else{{x.setActive(t,!1);let e=s.shield[0];const a=m.apply(m.burst,s,e,t);if(a.stop)return;x.spawn(s,e,x.locationShield,x.locationTrash),x.moveCardToCenterThenDeleteIt(e)}this.sendCardBackToSquareOne(t)}}static attackCard(e,t,a,i){const r=m.apply(m.battle,e,a);if(r.stop)return;const s=x.animDuration;let n=a.ap;i.hp-=n,n=i.ap,a.hp-=n,x.setActive(a,!1);const o=[];if(a.hp<1){x.move(e,a,a.location,e.positions.trash.location,!0),a.dead=!0;const t=i.hp<1?null:x.animDuration;o.push({id:u.taskCardToTrash,delay:t,card1:a,isPlayer1:a.isPlayer1})}else o.push({id:u.taskRefreshField,isPlayer1:a.isPlayer1});i.hp<1?(x.move(t,i,i.location,t.positions.trash.location,!0),i.dead=!0,o.push({id:u.taskCardToTrash,delay:s,card1:i,isPlayer1:i.isPlayer1})):o.push({id:u.taskRefreshField,isPlayer1:i.isPlayer1}),x.setActive(a,!1),a.hp<1&&o.push({id:u.taskDeleteCard,delay:s,card1:a,isPlayer1:a.isPlayer1}),i.hp<1&&o.push({id:u.taskDeleteCard,delay:s,card1:i,isPlayer1:i.isPlayer1}),u.addTasks(x.game.tasks,o)}static selectChoiceCard(){alert("Changer tout le système pour inclure plus de task, du genre appliquer l effet de cette CaretPosition, etc ...")}static end(e){const t=e.isPlayer1?"Defeat":"Victory";alert(t)}static isCardUnit(e){return e.type?.includes(0)}static isCardPilot(e){return e.type?.includes(1)}static isCardCommand(e){return e.type?.includes(2)}static isCardCommandPilot(e){return this.isCardPilot(e)&&this.isCardCommand(e)}static isCardBase(e){return e.type?.includes(3)}}var S=D;class E{static getCards(){return P._}static getDeckLenth(){return 50}static getAnimDuration(){return 500}static getHandStartLength(){return 5}static setup(e){e.player1={...e.player1,base:[],shield:[],resAString:"0",resourcesMax:6,resourcesAvailable:0,resourcesEx:0},e.player2={...e.player2,base:[],shield:[],resAString:"0",resourcesMax:6,resourcesAvailable:0,resourcesEx:0};for(let a=0;a<6;a++)x.spawnNotShown(e.player1,x.createCard("ST02-015"),x.locationDeck,x.locationShield),x.spawnNotShown(e.player2,x.createCard("ST02-015"),x.locationDeck,x.locationShield);e.player1.deck=[x.createCard("ST02-015")].concat(e.player1.deck),e.player2.deck=[x.createCard("ST02-015")].concat(e.player2.deck);const t=x.game.isPlayer1Turn?e.player2:e.player1;t.resourcesEx+=1}static createDefaultBase(e){const t=x.createCard("EXBP-001");return x.spawn(e,t,x.locationBase,x.locationBase),t}static nextTurn(){const e=x.getPlayerTurn();m.removeOneTurnEffect(x.game.cards),e.resourcesMax+=1,e.resourcesAvailable=e.resourcesMax+e.resourcesEx,S.nextTurn(e);const t=e.base.length>0?e.base[0].hp+"hp ":"-";x.log(`-- Turn player ${e.number}, ${e.resourcesAvailable}re, ${e.shield.length}sh, ${t}ba`)}static refreshFieldAndHand(e){T.refresh(e.hand,e.positions.hand),T.refresh(e.field,e.positions.field),T.refresh(e.base,e.positions.base,!0),S.setSelectable(e),e.positions.deck.text=e.deck.length,e.positions.shield.text=e.shield.length,e.positions.trash.text=e.trash.length,e.positions.resource.text=e.resourcesAvailable+"/"+e.resourcesMax}static playCard(e,t,a,i,r){return S.play(e,t,a,i,r)}static attack(e,t,a,i){S.attackCard(e,t,a,i)}static selectChoiceCard(e,t){return S.selectChoiceCard(e,t)}}var M=E,A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"absolute bgYellow cirlce15px",style:{left:e.card.position.x+"px",top:e.card.position.y+"px",width:e.card.position.width+"px",height:e.card.position.height+"px",transform:"rotate("+e.card.position.rotation+"deg)","z-index":e.card.zindex,cursor:e.shine?"pointer":""},on:{click:function(t){return e.$emit("click",e.card)}}},[e.card?t("img",{class:{w100p:!0,h100p:!0,shine:e.shine,absolute:!0},style:{"object-fit":"cover","object-position":e.card.bgposition,"pointer-events":"none"},attrs:{draggable:"false",src:a(97226)("./"+e.folder+e.card.id+".webp")},on:{mouseover:function(t){return e.$emit("mouseover",e.card)},contextmenu:function(t){return t.preventDefault(),e.$emit("clickright",e.card)}}}):t("div",[e._v("No card")]),e.hidestat||!e.card.ap&&!e.card.hp?e._e():t("div",{staticClass:"absolute cirlce10px textVerticalCenter centerDiv colorBlack",staticStyle:{width:"35px",height:"15px",top:"-0px","font-size":"12px","background-color":"#FFFFFFB0"}},[e._v(" "+e._s(e.card.ap)+" - "+e._s(e.card.hp)+" ")]),e.card&&e.card.dead?t("div",{staticClass:"w100p h100p absolute shine cirlce15px",staticStyle:{"background-color":"#FF000050"}}):e._e()])},Z=[],G={name:"game-card",props:["card","folder","shine","hidestat"]},B=G,_=a(1001),F=(0,_.Z)(B,A,Z,!1,null,"4b139f02",null),O=F.exports,I={name:"game-vue",props:[],components:{gameCard:O},data:()=>({refreshG:0,aside:!1,freeze:!1,cards:[],cardCenter:{id:"GD01-028",position:{width:0}},game:null,title:""}),mounted(){document.body.style.overflow="hidden",window.addEventListener("resize",(()=>{this.refreshG++})),this.start()},methods:{start(){this.game=C.createGame(M,this.$vuetify.breakpoint.width,this.$vuetify.breakpoint.height),this.refreshGame()},nextTurn(){this.game=C.nextTurn(this.game),this.refreshGame()},continue(){this.freeze=!1,this.game=C.continue(this.game),this.game.popup?this.freeze=!0:(this.game.refreshOnlyTextEffect&&this.animTextEffect(),this.game.refresh&&this.refreshGame())},playCard(e,t,a){this.game=C.playCard(this.game,e,t,a),this.refreshGame()},selectChoiceCard(e){this.game=C.selectChoiceCard(this.game,e),this.refreshGame()},refreshGame(){this.cards=this.game.cards,setTimeout((()=>{this.setDrag()}),10),this.game.showTitle&&this.showTitle(this.game.showTitle),this.refreshG++,setTimeout((()=>{this.beginAnimation()}),10)},animTextEffect(){let e=M.getAnimDuration();h().animateMultiple([{id:"textEffect",from:this.game.textEffect.position,to:this.game.textEffect.to,isIncrement:!1}],e)},beginAnimation(){let e=M.getAnimDuration();const t=!!(this.game&&this.game.textEffect&&this.game.textEffect.to),a=this.cards.filter((e=>e.to));if(e=!t&&a.length<1?10:M.getAnimDuration(),this.freeze=!0,setTimeout((()=>{this.endAnimation()}),e+10),a.length<1)return;const i=a.map((e=>({id:"C"+e.index,from:e.position,to:e.to,isIncrement:!1})));this.game&&this.game.textEffect&&this.game.textEffect.to&&i.push({id:"textEffect",from:this.game.textEffect.position,to:this.game.textEffect.to,isIncrement:!1}),h().animateMultiple(i,e)},endAnimation(){const e=this.game.wait?this.game.wait:1;this.game&&this.game.textEffect&&this.game.textEffect.to&&(this.game.textEffect.position=this.game.textEffect.to,delete this.game.textEffect.to),setTimeout((()=>{this.continue()}),e)},showTitle(e){this.title=e;const t=200;setTimeout((()=>{h().animate("divTitleParent",{height:0},{height:100},!1,t)}),10),setTimeout((()=>{h().animate("divTitleParent",{height:100},{height:0},!1,t)}),4.5*(t+10))},showCardMouseOver(e){this.aside&&this.showCard(e)},showCard(e){this.cardCenter=e?{id:e.id,position:e.position,to:{x:this.game.grid.center.x,y:this.game.grid.center.y,width:this.game.grid.center.width,height:this.game.grid.center.height}}:{id:this.cardCenter.id,position:this.cardCenter.position,to:{...this.cardCenter.position,height:0}};const t=[{id:"cardCenter",from:this.cardCenter.position,to:this.cardCenter.to,isIncrement:!1}];h().animateMultiple(t,M.getAnimDuration()),setTimeout((()=>{this.cardCenter.position=this.cardCenter.to,delete this.cardCenter.to}),510)},setDrag(){this.cards.forEach((e=>{const t="C"+e.index;this.addEvent(t,"dragstart",(t=>this.startDrag(t,e))),this.addEvent(t,"dragover",(t=>this.moveCard(t,e))),this.addEvent(t,"touchmove",(t=>this.moveCard(t,e))),this.addEvent(t,"touchstart",(t=>this.touchStart(t,e))),this.addEvent(t,"touchend",(t=>this.touchEnd(t,e)))}))},addEvent(e,t,a){const i=document.getElementById(e);i&&i.addEventListener(t,(e=>a(e)))},moveCard(e,t){if(!t.moving)return;let a=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY;a-=t.position.width/2,i-=t.position.height/2;const r=e.target;r.style.left=`${a}px`,r.style.top=`${i}px`,t.positionDrag={x:a,y:i}},startDrag(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(new Image,0,0),e.dataTransfer.setData("card",t.index),t.moving=!0,t.positionOld=this.clone(t.position),e.target.style.zIndex="1000"},onDragOver(e){e.preventDefault()},onDrop(e){e.preventDefault();const t=e.clientX||e.pageX||(e.touches?e.touches[0].clientX:null),a=e.clientY||e.pageY||(e.touches?e.touches[0].clientY:null);e.target.style.zIndex="auto";const i=e.dataTransfer.getData("card"),r=this.getCard(i);r.moving=!1;const s=this.cards.find((e=>e.index!==r.index&&this.isInside(t,a,e.position)&&!e.isPaired)),n=this.game.fields.find((e=>this.isInside(t,a,e)));this.playCard(r,s,n)},touchStart(e,t){t.moving=!0,t.positionOld=this.clone(t.position),e.target.style.zIndex="1000"},touchEnd(e,t){t.moving=!1,e.target.style.zIndex="auto";const a=e.changedTouches[0],i=this.cards.find((e=>e.index!==t.index&&this.isInside(a.clientX,a.clientY,e.position)&&!e.isPaired)),r=this.game.fields.find((e=>this.isInside(a.clientX,a.clientY,e)));this.playCard(t,i,r)},isInside(e,t,a){const i=a.x,r=a.y,s=i+a.width,n=r+a.height;return e>=i&&e<=s&&t>=r&&t<=n},clone(e){return Object.assign({},e)},showText(e){alert(e)},getGridX(e){return this.game?.grid["x"+e]},getGridY(e){return this.game?.grid["y"+e]},getCard(e){return this.cards.find((t=>t.index==e))},getGridPlace(e,t){return{width:this.game?.grid.box.width+"px",height:this.game?.grid.box.height+"px",left:this.getGridX(e)+"px",top:this.getGridY(t)+"px"}},getFieldStyleObj(e){return this.getFieldStyle(e.x,e.y,e.width,e.height)},getFieldStyle(e,t,a,i){return{width:a+"px",height:i+"px",left:e+"px",top:t+"px"}}}},z=I,R=(0,_.Z)(z,c,d,!1,null,"b22ca14c",null),H=R.exports,$={name:"pageGundamTcgFight",components:{menuBarGundam:s.Z,game:H},data:()=>({}),mounted(){},methods:{}},U=$,L=(0,_.Z)(U,i,r,!1,null,null,null),X=L.exports},90490:function(){},61711:function(e,t,a){a(57658);class i{static animateElement(e,t,a,i){const r={element:e,from:t,to:a};this.animateElements([r],i)}static animateElements(e,t){const a=performance.now();function i(r){const s=r-a,n=Math.min(s/t,1),o=n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2;e.forEach((e=>{const t=e.from.x+(e.to.x-e.from.x)*o,a=e.from.y+(e.to.y-e.from.y)*o,i=e.from.height+(e.to.height-e.from.height)*o,r=e.from.width+(e.to.width-e.from.width)*o,s=e.from.rotation+(e.to.rotation-e.from.rotation)*o;e.element.style.left=t+"px",e.element.style.top=a+"px",e.element.style.height=i+"px",e.element.style.width=r+"px",e.element.style.transform=`rotate(${s}deg)`})),n<1&&requestAnimationFrame(i)}requestAnimationFrame(i)}static easeInOut(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}static add(e,t){return{x:e.x+t.x,y:e.y+t.y,rotation:e.rotation+t.rotation}}static getRelativeTo0(e,t){return{x:t.x-e.x,y:t.y-e.y}}static pxStringToInt(e){return parseInt(e.replace("px",""))}static animate(e,t,i,r,s=a.g.animDuration){return this.animateMultiple([{id:e,from:t,to:i,isIncrement:r}],s)}static animateMultiple(e,t=-1){-1===t&&(t=a.g.animDuration);const i=[];e.forEach((e=>{const t=document.getElementById(e.id);if(!t)return void console.log("element can't be found : "+e.id);const a=e.from??{x:this.pxStringToInt(t.style.left),y:this.pxStringToInt(t.style.top),rotation:t.style.rotation,height:t.style.height,width:t.style.width};a.rotation=a.rotation??0,a.height=a.height??t.clientHeight;const r=e.isIncrement?this.add(a,e.to):e.to;i.push({element:t,from:a,to:r})})),this.animateElements(i,t)}}e.exports=i},85182:function(e,t,a){var i={"./EXBP-001.webp":69411,"./GD01-028.webp":21495,"./GD01-034.webp":63515,"./GD01-040.webp":66732,"./GD01-041.webp":70958,"./GD01-091.webp":81708,"./GD01-107.webp":66642,"./ST02-001.webp":58864,"./ST02-002.webp":23941,"./ST02-005.webp":55045,"./ST02-010.webp":99834,"./ST02-012.webp":57160,"./ST02-013.webp":55214,"./ST02-015.webp":34078};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=85182},97226:function(e,t,a){var i={"./Daggerheart/class/bard-banner.webp":85519,"./Daggerheart/class/druid-banner.webp":60992,"./Daggerheart/class/guardian-banner.webp":42548,"./Daggerheart/class/ranger-banner.webp":85811,"./Daggerheart/class/rogue-banner.webp":73300,"./Daggerheart/class/seraph-banner.webp":55354,"./Daggerheart/class/sorcerer-banner.webp":17294,"./Daggerheart/class/warrior-banner.webp":18201,"./Daggerheart/class/wizard-banner.webp":52234,"./Daggerheart/domain/banner-arcana.webp":63611,"./Daggerheart/domain/banner-blade.webp":62931,"./Daggerheart/domain/banner-bone.webp":33989,"./Daggerheart/domain/banner-codex.webp":79151,"./Daggerheart/domain/banner-grace.webp":64559,"./Daggerheart/domain/banner-midnight.webp":36595,"./Daggerheart/domain/banner-sage.webp":24162,"./Daggerheart/domain/banner-splendor.webp":52593,"./Daggerheart/domain/banner-valor.webp":89751,"./Daggerheart/domain/logo-arcana.webp":99903,"./Daggerheart/domain/logo-blade.webp":1753,"./Daggerheart/domain/logo-bone.webp":37935,"./Daggerheart/domain/logo-codex.webp":40820,"./Daggerheart/domain/logo-grace.webp":54010,"./Daggerheart/domain/logo-midnight.webp":7925,"./Daggerheart/domain/logo-sage.webp":99224,"./Daggerheart/domain/logo-splendor.webp":1373,"./Daggerheart/domain/logo-valor.webp":39249,"./Daggerheart/other/cost.webp":80987,"./Gundam/cards/EXBP-001.webp":69411,"./Gundam/cards/GD01-028.webp":21495,"./Gundam/cards/GD01-034.webp":63515,"./Gundam/cards/GD01-040.webp":66732,"./Gundam/cards/GD01-041.webp":70958,"./Gundam/cards/GD01-091.webp":81708,"./Gundam/cards/GD01-107.webp":66642,"./Gundam/cards/ST02-001.webp":58864,"./Gundam/cards/ST02-002.webp":23941,"./Gundam/cards/ST02-005.webp":55045,"./Gundam/cards/ST02-010.webp":99834,"./Gundam/cards/ST02-012.webp":57160,"./Gundam/cards/ST02-013.webp":55214,"./Gundam/cards/ST02-015.webp":34078,"./blue.webp":70148,"./dark.webp":87975,"./konamiCode.webp":95768};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=97226},60992:function(e,t,a){"use strict";e.exports=a.p+"img/druid-banner.2deb403f.webp"},52234:function(e,t,a){"use strict";e.exports=a.p+"img/wizard-banner.cd5737e8.webp"},62931:function(e,t,a){"use strict";e.exports=a.p+"img/banner-blade.30fc66e0.webp"},80987:function(e,t,a){"use strict";e.exports=a.p+"img/cost.8a36aa4e.webp"},68499:function(e,t,a){"use strict";e.exports=a.p+"img/GundamLogo2.e101246d.png"},69411:function(e,t,a){"use strict";e.exports=a.p+"img/EXBP-001.bf21c22f.webp"},21495:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-028.d05bd1e0.webp"},63515:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-034.f747b003.webp"},66732:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-040.acdadefd.webp"},70958:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-041.c76a26ff.webp"},81708:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-091.38c07c00.webp"},66642:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-107.cbcb9846.webp"},58864:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-001.4b73f4fb.webp"},23941:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-002.b845951e.webp"},55045:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-005.8bffb70c.webp"},99834:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-010.33785975.webp"},57160:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-012.bb62e8de.webp"},55214:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-013.f56b594e.webp"},34078:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-015.7e42f5aa.webp"},70898:function(e,t,a){"use strict";e.exports=a.p+"img/wingzero2.48fd7deb.gif"},70148:function(e,t,a){"use strict";e.exports=a.p+"img/blue.de89a950.webp"},87975:function(e,t,a){"use strict";e.exports=a.p+"img/dark.fff488e7.webp"},38525:function(e,t,a){"use strict";e.exports=a.p+"img/gradientBlack.a82f0a15.png"},95768:function(e,t,a){"use strict";e.exports=a.p+"img/konamiCode.ce17ba28.webp"},47327:function(e,t,a){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if("object"!==i(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e){var t=r(e,"string");return"symbol"===i(t)?t:String(t)}function n(e,t,a){return t=s(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{Z:function(){return n}})}}]);
//# sourceMappingURL=420.41172e68.js.map