(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[662],{48110:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var i=a(56843),r=a(55550),s=a(64562),n=a(99709),o=a(13687),d=function(){var e=this,t=e._self._c;return t("div",[e.hide?t("div",{staticClass:"absolute"},[t(r.Z,{staticStyle:{"z-index":"10"},attrs:{variant:"text"},on:{click:function(t){e.showDrawer=!0}}})],1):t(i.Z,{attrs:{app:"",dark:"",color:"black"}},[t("div",{staticStyle:{width:"320px",position:"absolute",bottom:"0px",top:"0px",left:"160px",overflow:"hidden"}},[t("img",{staticStyle:{width:"100px"},attrs:{src:a(70898)}})]),t("div",{staticStyle:{width:"100px",position:"absolute",bottom:"0px",top:"0px",left:"120px",overflow:"hidden"}},[t("img",{staticStyle:{width:"100px",height:"100%"},attrs:{src:a(38525)}})]),t(r.Z,{attrs:{variant:"text"},on:{click:function(t){e.showDrawer=!0}}}),t("router-link",{attrs:{to:"/gundam"}},[t(s.Z,{staticStyle:{position:"relative"},attrs:{target:"_blank",text:""},on:{click:function(t){return e.unselect()}}},[t("h3",{staticStyle:{position:"absolute",left:"0px",top:"-15px","letter-spacing":"5px"}},[e._v("GUNDAM")]),t("span",{staticStyle:{position:"absolute",top:"5px",left:"0px","font-size":"10px"}},[e._v(e._s(e.version))])])],1),t(o.Z),e._l(e.links,(function(a){return t("link-button",{key:"menuBarr"+a.Text,attrs:{url:a.Url,external:a.external,text:e.$vuetify.breakpoint.width>=1050?a.Text:"",icon:a.Icon},on:{click:function(t){return e.unselect()}}})}))],2),t(n.Z,{attrs:{absolute:"",temporary:"",color:"black"},model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[t("img",{staticStyle:{width:"300px",height:"400px","object-position":"-50px 00px","object-fit":"cover",position:"absolute"},attrs:{src:a(68499)}}),t("br"),t("div",[t("router-link",{attrs:{to:"/daggerheart"}},[t(s.Z,{attrs:{target:"_blank",text:""}},[t("h3",{staticClass:"colorWhite"},[e._v("Gundam")])])],1),e._l(e.links,(function(a){return t("link-button",{key:"navigationDrawer"+a.Text,staticClass:"m5px w100p",attrs:{url:a.Url,external:a.external,text:a.Text,icon:a.Icon},on:{click:function(t){return e.unselect()}}})}))],2)]),!e.hide&&e.$vuetify.breakpoint.width>=800?t("div",{staticClass:"bg",staticStyle:{height:"60px"}}):e._e(),!e.hide&&e.$vuetify.breakpoint.width<800?t("div",{staticClass:"bg",staticStyle:{height:"20px"}}):e._e()],1)},c=[],l=a(69092),h=a(28310),p={name:"menuBarGundam",components:{linkButton:h.Z},props:["filteractive","hide"],data:()=>({store:l.h,version:"",searchString:"",showDrawer:!1,links:[{Text:"EncyclopÃ©die",Icon:"mdi-book",external:!0,Url:"https://docs.google.com/presentation/d/13EMZDLqcDxfhsLHIzuKSSBsFIvNwjc2QLpWlew3B8Bk/edit?usp=drive_link"},{Text:"Cartes",Icon:"mdi-cards",Url:"/gundamTcgFight"}]}),mounted(){this.version=this.$version},methods:{}},g=p,u=a(1001),f=a(90490),m=a.n(f),x=(0,u.Z)(g,d,c,!1,null,null,null);"function"===typeof m()&&m()(x);var b=x.exports},91662:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg2 h100p"},[t("menu-bar-gundam",{attrs:{hide:!0}}),t("game")],1)},r=[],s=a(48110),n=a(64562),o=a(4324),d=function(){var e=this,t=e._self._c;return t("div",{key:e.refreshG,staticClass:"relative w100p h100p mask"},[t("div",{staticClass:"hide"},[e._l(16,(function(a){return t("div",{key:"x"+a,staticClass:"bgYellow absolute w100p",style:{height:e.game?.grid.box.height+"px",top:e.getGridY(a-1)+"px"}})})),e._l(16,(function(a){return t("div",{key:"y"+a,staticClass:"bgRed absolute h100p",style:{width:e.game?.grid.box.width+"px",left:e.getGridX(a-1)+"px"}})}))],2),e._l(e.game?.fields,(function(a){return t("div",{key:a.zone,class:{absolute:!0,bg3:a.zone.endsWith("2"),bg:a.zone.endsWith("1"),fontSize12:!0,textVerticalCenter:!0,"text-center":!0,bgYellow2:a.isPlayer1==e.game.isPlayer1&&3===a.location},style:e.getFieldStyle(a.x,a.y,a.width,a.height),attrs:{id:a.zone},on:{dragover:e.onDragOver,drop:function(t){return e.onDrop(t,a)}}},[e._v(" "+e._s(a.text)+" ")])})),e.aside?t("div",{staticClass:"flex absolute"},[t("div",{staticClass:"bg",staticStyle:{width:"300px",height:"100%"}},[t("div",{staticClass:"relative"},[t("gameCard",{attrs:{card:e.cardCenter,folder:"Gundam/cards/"}})],1),t("div",{staticStyle:{height:"420px"}}),t(n.Z,{staticClass:"bg m5px",attrs:{target:"_blank",text:""},on:{click:e.start}},[t(o.Z,[e._v("mdi-arrow-right-thin")]),e._v(" Start ")],1),t(n.Z,{staticClass:"bg m5px",attrs:{target:"_blank",text:""},on:{click:e.nextTurn}},[t(o.Z,[e._v("mdi-arrow-right-thin")]),e._v(" End Turn ")],1),t("div",{staticClass:"mp5px",domProps:{innerHTML:e._s(e.game?.logs)}})],1)]):e._e(),e._l(e.cards,(function(a){return t("div",{key:"B"+a.index,on:{dragover:e.onDragOver,drop:function(t){return e.onDrop(t,a)}}},[t("gameCard",{attrs:{id:"C"+a.index,card:a,folder:"Gundam/cards/",shine:a.selectable,hidestat:a.hidestat,draggable:"true"},on:{mouseover:function(t){return e.showCardMouseOver(a)},click:function(t){return e.showCard(a)},dragover:e.onDragOver,drop:function(t){return e.onDrop(t,a)}}})],1)})),e.game?t("div",[t("div",{staticClass:"bgYellow absolute cirlce10px",style:{left:e.game.grid.x0+"px",top:"30px",height:e.game.grid.hand.height-25+"px",width:e.game.fields[0].width+"px"}},[t(n.Z,{class:{bg:!0,w100p:!0,h100p:!0,shine:!e.freeze,fontSize12:!0},staticStyle:{"min-width":"0px"},attrs:{target:"_blank",text:""},on:{click:e.nextTurn}},[e._v(" End "),t("br"),e._v("Turn ")])],1)]):e._e(),t("div",{staticClass:"absolute bgWhite mask",staticStyle:{top:"80px",width:"100%",height:"0px"},attrs:{id:"divTitleParent"}},[t("div",{staticClass:"relative"},[t("div",{staticClass:"text-center absolute w100p title",staticStyle:{left:"-000px",top:"30px"}},[e._v(e._s(e.title)+" ")])])]),t("gameCard",{staticStyle:{"z-index":"12"},attrs:{id:"cardCenter",card:e.cardCenter,folder:"Gundam/cards/"},on:{click:function(t){return e.showCard(null)}}}),t("div",{staticClass:"absolute hide"},[e._v(" hello world ")])],2)},c=[],l=a(61711),h=a.n(l),p=a(47327);a(57658);class g{static addTasks(e,t){t.forEach((t=>{this.alreadyInclude(e,t)||e.push(t)}))}static alreadyInclude(e,t){return e.find((e=>this.isEqual(e,t)))}static isEqual(e,t){const a=e.id===t.id&&e.isPlayer1===t.isPlayer1&&e.value===t.value;return a}}(0,p.Z)(g,"taskRefreshField",1),(0,p.Z)(g,"taskShowTitle",2),(0,p.Z)(g,"taskDrawToCenter",3),(0,p.Z)(g,"taskDrawToHand",4),(0,p.Z)(g,"taskEndAnimation",5),(0,p.Z)(g,"taskCardToCenter",6),(0,p.Z)(g,"taskCardToTrash",7),(0,p.Z)(g,"taskDeleteCard",8);var u=g;class f{static getLocationArrayProperty(e){return e==this.locationEmpty?"empty":e==this.locationDeck?"deck":e==this.locationShield?"shield":e==this.locationHand?"hand":e==this.locationField?"field":e==this.locationBase?"base":e==this.locationResource?"resource":"trash"}static spawn(e,t,a,i){const r=this.spawnNotShown(e,t,a,i);return f.game.cards=f.addIn(f.game.cards,r),u.addTasks(f.game.tasks,[{id:u.taskRefreshField,isPlayer1:e.isPlayer1}]),r}static spawnNotShown(e,t,a,i){const r=f.getLocationArrayProperty(a),s=f.getLocationArrayProperty(i);return t?e[r]=f.removeByIndex(e[r],t.index):t=e[r].splice(0,1)[0],t.position=e.positions[r],t.isPlayer1=e.isPlayer1,t.active=!0,e[s]=f.addIn(e[s],t),t}static move(e,t,a,i){const r=f.getLocationArrayProperty(a),s=f.getLocationArrayProperty(i);return e[r]=f.removeByIndex(e[r],t),e[s]=f.addIn(e[s],t),u.addTasks(f.game.tasks,[{id:u.taskRefreshField,isPlayer1:e.isPlayer1}]),t}static createCard(e){const t=this.clone(this.cards.find((t=>t.id===e)));return t.index=this.getNextIndex(),t}static getNextIndex(){return this.index++,this.index}static setActive(e,t){e.active=t,e.canAttack=t;const a=e.active?0:90;e.to||(e.to=e.position),e.to.rotation=a}static getPlayerTurn(){return f.isPlayer1?f.game.player1:f.game.player2}static getPlayerTurnOpponent(){return f.isPlayer1?f.game.player2:f.game.player1}static getPlayer(e){return e?f.game.player1:f.game.player2}static getOpponent(e){return e?f.game.player1:f.game.player2}static getAndRemoveFirst(e){return e.splice(0,1)[0]}static removeByIndex(e,t){return e.filter((e=>e.index!==t.index))}static addIn(e,t){if(e&&!e.includes((e=>e.index===t.index)))return e.concat([t])}static sortRandom(e){return e.sort((()=>Math.random()-.5))}static log(e){this.world.logs=e+"<br>"+this.world.logs}static clone(e){return Object.assign({},e)}}(0,p.Z)(f,"game",null),(0,p.Z)(f,"grid",void 0),(0,p.Z)(f,"index",1),(0,p.Z)(f,"isPlayer1",void 0),(0,p.Z)(f,"phase",0),(0,p.Z)(f,"phaseStart",0),(0,p.Z)(f,"phaseDraw",1),(0,p.Z)(f,"phaseResource",2),(0,p.Z)(f,"phaseMain",3),(0,p.Z)(f,"phaseAttack",4),(0,p.Z)(f,"phaseBlock",5),(0,p.Z)(f,"phaseAction",6),(0,p.Z)(f,"phaseDamage",7),(0,p.Z)(f,"phaseEnd",8),(0,p.Z)(f,"locationEmpty",0),(0,p.Z)(f,"locationDeck",1),(0,p.Z)(f,"locationShield",2),(0,p.Z)(f,"locationHand",3),(0,p.Z)(f,"locationField",4),(0,p.Z)(f,"locationBase",5),(0,p.Z)(f,"locationTrash",6),(0,p.Z)(f,"locationResource",7);var m=f;class x{static createGrid(e,t){const a={};a.width=e,a.height=t-0,a.border=5,a.border2=2*a.border;const i=16;a.widthB=a.width-a.border*(i+1),a.heightB=a.height-a.border*(i+1),a.center=this.getCardSize(a.width-a.border2,a.height-a.border2,1),a.box={height:a.heightB/i},a.box.width=a.widthB/i,a.boxbig={height:2*a.box.height+a.border,width:2*a.box.width+a.border},a.hand={width:(a.box.width+a.border)*i-a.border,height:3*(a.box.height+a.border)-a.border},a.field={width:a.hand.width-a.box.width-a.border,height:a.hand.height+2*(a.box.height+a.border)},a.hand.card=this.getCardSize(a.hand.width,a.hand.height,6),a.field.card=this.getCardSize(a.field.width,a.field.height,6);for(let r=0;r<i;r++)a["x"+r]=5+r*(a.box.width+5),a["y"+r]=5+r*(a.box.height+5);return a}static getPositions(e,t){let a={};return a=e.box.width>50?{base:this.createZone(t,e.x15,e.y8,e.x0,e.y7,e.box.width,e.box.height,"base",m.locationBase),shield:this.createZone(t,e.x15,e.y9,e.x0,e.y6,e.box.width,e.box.height,"shield",m.locationShield),deck:this.createZone(t,e.x15,e.y10,e.x0,e.y5,e.box.width,e.box.height,"deck",m.locationDeck),trash:this.createZone(t,e.x15,e.y11,e.x0,e.y4,e.box.width,e.box.height,"trash",m.locationTrash),resource:this.createZone(t,e.x15,e.y12,e.x0,e.y3,e.box.width,e.box.height,"res",m.locationResource),hand:this.createZone(t,e.x0,e.y13,e.x1,e.y0,e.hand.width,e.hand.height,"hand",m.locationHand),field:this.createZone(t,e.x0,e.y8,e.x1,e.y3,e.field.width,e.field.height,"field",m.locationField)}:{base:this.createZone(t,e.x14,e.y8,e.x0,e.y7,2*e.box.width,e.box.height,"base",m.locationBase),shield:this.createZone(t,e.x14,e.y9,e.x0,e.y6,2*e.box.width,e.box.height,"shield",m.locationShield),deck:this.createZone(t,e.x14,e.y10,e.x0,e.y5,2*e.box.width,e.box.height,"deck",m.locationDeck),trash:this.createZone(t,e.x14,e.y11,e.x0,e.y4,2*e.box.width,e.box.height,"trash",m.locationTrash),resource:this.createZone(t,e.x14,e.y12,e.x0,e.y3,2*e.box.width,e.box.height,"res",m.locationResource),hand:this.createZone(t,e.x0,e.y13,e.x0,e.y0,e.hand.width,e.hand.height,"hand",m.locationHand),field:this.createZone(t,e.x0,e.y8,e.x2,e.y3,e.field.width-5-e.box.width,e.field.height,"field",m.locationField)},t||(a.hand.width=a.hand.width-e.box.width-2*e.border2),a}static createZone(e,t,a,i,r,s,n,o,d){const c=e?"1":"2";return{x:e?t:i,y:e?a:r,zone:o+c,width:s,height:n,location:d,isPlayer1:e}}static createField(e,t){let a=[e.deck,e.trash,e.shield,e.resource,e.hand,e.field,e.base].concat([t.deck,t.trash,t.shield,t.resource,t.hand,t.field,t.base]);return a}static refresh(e,t,a=!1){let i=t.height;t.location==m.locationField&&(i*=.75);const r=a?t:this.getCardSize(t.width,i,e.length);e.forEach(((a,i)=>{a.to=this.getCardPosition(i,e.length,t,r,a),a.location=t.location}))}static getCardSize(e,t,a){let i=e/(a+.25),r=150*i/107;r>t&&(r=t,i=107*r/150);const s=(e-i)/2,n=(t-r)/2;return{x:s,y:n,width:i,height:r}}static getCardPosition(e,t,a,i,r){const s=r.active?0:90;return{x:a.x+this.getXCenter(a.width,i.width,t,e),y:a.y,width:i.width,height:i.height,rotation:s}}static getPositionHandWithRotation(e,t,a,i){const r=.75*m.grid.card.width,s=r/2,n=a<i/2?-1:1;let o=0,d=i/2,c=0;if(this.isPair(i)){const e=m.grid.hand.width/2-s+s*n;d=a<i/2?Math.floor(i/2)-1:Math.ceil(i/2),c=e+Math.abs(d-a)*r*n}else{const e=m.grid.hand.width/2-s;c=e+Math.abs(d-a)*r*n}const l=e.isPlayer1?1:-1;o=a-d;const h=l*Math.round(o/d*20),p=l*(r/4)*Math.abs(d-a);t.ap=a,t.hp=d;const g={x:e.positions.hand.x+c,y:e.positions.hand.y+p+20,width:m.grid.card.width,height:m.grid.card.height,rotation:h};return g}static isPair(e){return e%2==0}static getCenter(e,t,a,i){const r=e/2,s=a/2,n=s-i;return r-n*t}static getXCenter(e,t,a,i){const r=e/a;return r/2+r*i-t/2}}var b=x;class y{static createGame(e,t,a){m.game={cards:[],tasks:[],popup:[]},m.cards=e.getCards(),m.grid=b.createGrid(t,a),m.game.grid=m.grid;const i=e.getDeckLenth();m.game.player1=this.createPlayer(m.cards,i,!0),m.game.player2=this.createPlayer(m.cards,i,!1),m.game.player1.positions=b.getPositions(m.grid,!0),m.game.player2.positions=b.getPositions(m.grid,!1),m.game.fields=b.createField(m.game.player1.positions,m.game.player2.positions),m.isPlayer1=1==Math.floor(2*Math.random());for(let r=0;r<e.getHandStartLength();r++)m.spawn(m.game.player1,null,m.locationDeck,m.locationHand),m.spawn(m.game.player2,null,m.locationDeck,m.locationHand);return m.game}static createPlayer(e,t,a){let i=[];return e.forEach((e=>{i.push(m.createCard(e.id)),i.push(m.createCard(e.id)),i.push(m.createCard(e.id)),i.push(m.createCard(e.id))})),i=i.splice(0,t),i.forEach((e=>{e.index=m.getNextIndex(),e.isPlayer1=a,e.location=m.locationDeck})),i=m.sortRandom(i),{deck:i,shield:[],hand:[],field:[],trash:[],isPlayer1:a,base:[],empty:[]}}}var w=y;class v{static createGame(e,t,a){return w.createGame(e,t,a),m.game.manager=e,e.setup(m.game),this.nextTurn(m.game)}static nextTurn(e){m.isPlayer1=!m.isPlayer1,e.isPlayer1=m.isPlayer1;const t=m.isPlayer1?"1":"2";return u.addTasks(e.tasks,[{id:u.taskShowTitle,value:"New turn for player "+t,isPlayer1:m.isPlayer1,delay:1200},{id:u.taskDrawToCenter,isPlayer1:m.isPlayer1,delay:500},{id:u.taskDrawToCenter,isPlayer1:m.isPlayer1,delay:500}]),e.manager.nextTurn(),this.handleTasks(e)}static continue(e){return this.endAnimation(e),this.handleTasks(e)}static endAnimation(e){e.cards.forEach((e=>{e.positionDrag&&(e.position={...e.position,x:e.positionDrag.x,y:e.positionDrag.y}),e.to&&(e.position=e.to),delete e.to,delete e.positionOld,delete e.positionDrag})),delete e.wait,delete e.showTitle,e.refresh=!0}static playCard(e,t,a,i){return e.manager.playCard(e,t,a,i)}static handleTasks(e){let t=e.tasks.splice(0,1)[0];e.refresh=!!t;let a=0;while(t&&a<100){const i=t.isPlayer1?e.player1:e.player2,r=t.isPlayer1?e.player2:e.player1;if(t.id===u.taskRefreshField)e.manager.refreshFieldAndHand(i);else if(t.id===u.taskDrawToCenter){const e=m.spawn(i,null,m.locationDeck,m.locationHand);e.to=m.grid.center,m.game.lastCard=e}else t.id===u.taskDrawToHand?e.manager.refreshFieldAndHand(i):t.id===u.taskShowTitle?e.showTitle=t.value:t.id===u.taskEndAnimation?this.endAnimation(e):t.id===u.taskDeleteCard?(m.game.cards=m.removeByIndex(m.game.cards,t.card),t.removeBase&&(m.getPlayer(t.card.isPlayer1).base=[])):t.id===u.taskCardToCenter?(t.card.to=m.grid.center,t.card.zindex=11):t.id===u.taskCardToTrash&&(e.manager.refreshFieldAndHand(i),e.manager.refreshFieldAndHand(r),t.card.to=m.clone(m.getPlayer(t.card.isPlayer1).positions.trash),t.card.hidestat=!0,t.card.to.height=0);if(t.delay)return e.wait=t.delay,e;t=e.tasks.splice(0,1)[0],a++}return e}}var T=v,k=a(3270);class C{static nextTurn(e){m.game.cards.forEach((e=>e.selectable=!1)),e.field.forEach((e=>{e.active=!0,e.canAttack=!0}))}static setSelectable(e){e.hand.forEach((t=>{const a=Math.max(e.resourcesMax,e.resourcesAvailable),i=t.level<=a&&t.cost<=e.resourcesAvailable;t.selectable=i})),e.field.forEach((e=>{e.selectable=e.canAttack}))}static play(e,t,a,i){t.isPlayer1===e.isPlayer1&&t.selectable||this.sendCardBackToSquareOne(t),t.location===m.locationHand?this.playFromHand(e,t,a,i):t.location===m.locationField&&this.attack(e,t,a,i)}static sendCardBackToSquareOne(e){return e.to=m.clone(e.position),e.position={...e.position,...e.positionDrag},m.game.refresh=!0,m.game}static playFromHand(e,t,a,i){const r=i.isPlayer1==e.isPlayer1;r?(this.isCardUnit(t)&&(t.canAttack=!0),e.resourcesAvailable-=t.cost,m.move(e,t,t.location,e.positions.field.location)):this.sendCardBackToSquareOne(t)}static attack(e,t,a,i){const r=i.isPlayer1==e.isPlayer1;if(r)return void this.sendCardBackToSquareOne(t);const s=m.getPlayerTurnOpponent();if(s.shield<1&&s.base.length<1)return this.end(s);if(s.base.length>0){const a=s.base[0];this.attackCard(e,s,t,a)}else{const e=m.getAndRemoveFirst(s.shield);m.spawn(s,e,m.locationShield,m.locationTrash),this.moveCardToCenterThenDeleteIt(e)}this.sendCardBackToSquareOne(t),m.setActive(t,!1)}static attackCard(e,t,a,i){let r=a.ap;i.hp-=r,r=i.ap,a.hp-=r,a.hp<1&&(m.move(e,a,a.location,e.positions.trash.location),this.moveCardToCenterThenDeleteIt(a)),i.hp<1&&(m.move(t,i,t.location,t.positions.trash.location),this.moveCardToCenterThenDeleteIt(i))}static moveCardToCenterThenDeleteIt(e){const t=500;u.addTasks(m.game.tasks,[{id:u.taskCardToCenter,delay:t,card:e},{id:u.taskCardToTrash,delay:t,card:e},{id:u.taskDeleteCard,card:e,removeBase:!0}])}static end(e){const t=e.isPlayer1?"Defeat":"Victory";alert(t)}static isCardUnit(e){return e.type?.includes(0)}static isCardPilot(e){return e.type?.includes(1)}static isCardCommand(e){return e.type?.includes(2)}static isCardCommandPilot(e){return this.isCardPilot(e)&&this.isCardCommand(e)}static isCardBase(e){return e.type?.includes(3)}}var D=C;class S{static getCards(){return k._}static getDeckLenth(){return 50}static getHandStartLength(){return 5}static setup(e){e.player1={...e.player1,base:[],shield:[],resAString:"0",resourcesMax:5,resourcesAvailable:0,resourcesEx:0},e.player2={...e.player2,base:[],shield:[],resAString:"0",resourcesMax:5,resourcesAvailable:0,resourcesEx:0},this.createDefaultBase(e.player1),this.createDefaultBase(e.player2);for(let a=0;a<6;a++)m.spawnNotShown(e.player1,null,m.locationDeck,m.locationShield),m.spawnNotShown(e.player2,null,m.locationDeck,m.locationShield);const t=m.game.isPlayer1Turn?e.player2:e.player1;t.resourcesEx+=1}static createDefaultBase(e){const t=m.createCard("EXBP-001");return m.spawn(e,t,m.locationBase,m.locationBase),t}static nextTurn(){const e=m.getPlayerTurn();e.resourcesMax+=1,e.resourcesAvailable=e.resourcesMax+e.resourcesEx,D.nextTurn(e)}static refreshFieldAndHand(e){b.refresh(e.hand,e.positions.hand),b.refresh(e.field,e.positions.field),b.refresh(e.base,e.positions.base,!0),D.setSelectable(e),e.positions.deck.text=e.deck.length,e.positions.shield.text=e.shield.length,e.positions.trash.text=e.trash.length,e.positions.resource.text=e.resourcesAvailable+"/"+e.resourcesMax}static playCard(e,t,a,i){const r=m.getPlayerTurn();return D.play(r,t,a,i),e}}var P=S,G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"absolute bgYellow",style:{left:e.card.position.x+"px",top:e.card.position.y+"px",width:e.card.position.width+"px",height:e.card.position.height+"px",transform:"rotate("+e.card.position.rotation+"deg)","z-index":e.card.zindex,cursor:e.shine?"pointer":""},on:{click:function(t){return e.$emit("click",e.card)}}},[e.card?t("img",{class:{w100p:!0,h100p:!0,shine:e.shine},style:{"object-fit":"cover","object-position":e.card.bgposition,"pointer-events":"none"},attrs:{draggable:"false",src:a(97226)("./"+e.folder+e.card.id+".webp")},on:{mouseover:function(t){return e.$emit("mouseover",e.card)},contextmenu:function(t){return t.preventDefault(),e.$emit("clickright",e.card)}}}):t("div",[e._v("No card")]),e.hidestat||!e.card.ap&&!e.card.hp?e._e():t("div",{staticClass:"absolute cirlce10px textVerticalCenter centerDiv colorBlack",staticStyle:{width:"25px",height:"15px",top:"-0px","font-size":"10px","background-color":"#FFFFFFB0"}},[e._v(" "+e._s(e.card.ap)+" - "+e._s(e.card.hp)+" ")])])},Z=[],E={name:"game-card",props:["card","folder","shine","hidestat"]},B=E,A=a(1001),_=(0,A.Z)(B,G,Z,!1,null,"c6f410b0",null),M=_.exports,I={name:"game-vue",props:[],components:{gameCard:M},data:()=>({refreshG:0,aside:!1,freeze:!1,cards:[],cardCenter:{id:"GD01-028",position:{width:0}},game:null,title:""}),mounted(){document.body.style.overflow="hidden",window.addEventListener("resize",(()=>{this.refreshG++})),this.start()},methods:{start(){this.game=T.createGame(P,this.$vuetify.breakpoint.width,this.$vuetify.breakpoint.height),this.refreshGame()},nextTurn(){this.game=T.nextTurn(this.game),this.refreshGame()},continue(){this.freeze=!1,this.game=T.continue(this.game),this.game.refresh&&this.refreshGame()},playCardOnZone(e,t){this.game=T.playCard(this.game,e,null,t),this.refreshGame()},playCardOnCard(e,t){this.game=T.playCard(this.game,e,t,null),this.refreshGame()},refreshGame(){this.cards=this.game.cards,setTimeout((()=>{this.setDrag()}),10),this.game.showTitle&&this.showTitle(this.game.showTitle),this.refreshG++,setTimeout((()=>{this.beginAnimation()}),10)},beginAnimation(){let e=500;const t=this.cards.filter((e=>e.to));if(e=t.length<1?10:500,this.freeze=!0,setTimeout((()=>{this.endAnimation()}),e+10),t.length<1)return;const a=t.map((e=>({id:"C"+e.index,from:e.position,to:e.to,isIncrement:!1})));h().animateMultiple(a,e)},endAnimation(){const e=this.game.wait?this.game.wait:1;setTimeout((()=>{this.continue()}),e)},showTitle(e){this.title=e;const t=200;setTimeout((()=>{h().animate("divTitleParent",{height:0},{height:100},!1,t)}),10),setTimeout((()=>{h().animate("divTitleParent",{height:100},{height:0},!1,t)}),4.5*(t+10))},showCardMouseOver(e){this.aside&&this.showCard(e)},showCard(e){this.cardCenter=e?{id:e.id,position:e.position,to:{x:this.game.grid.center.x,y:this.game.grid.center.y,width:this.game.grid.center.width,height:this.game.grid.center.height}}:{id:this.cardCenter.id,position:this.cardCenter.position,to:{...this.cardCenter.position,height:0}};const t=[{id:"cardCenter",from:this.cardCenter.position,to:this.cardCenter.to,isIncrement:!1}];h().animateMultiple(t,500),setTimeout((()=>{this.cardCenter.position=this.cardCenter.to,delete this.cardCenter.to}),510)},setDrag(){this.cards.forEach((e=>{const t="C"+e.index;this.addEvent(t,"dragstart",(t=>this.startDrag(t,e))),this.addEvent(t,"dragover",(t=>this.moveCard(t,e))),this.addEvent(t,"touchmove",(t=>this.moveCard(t,e))),this.addEvent(t,"touchstart",(t=>this.touchStart(t,e))),this.addEvent(t,"touchend",(t=>this.touchEnd(t,e)))}))},addEvent(e,t,a){const i=document.getElementById(e);i&&i.addEventListener(t,(e=>a(e)))},moveCard(e,t){if(!t.moving)return;let a=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY;a-=t.position.width/2,i-=t.position.height/2;const r=e.target;r.style.left=`${a}px`,r.style.top=`${i}px`,t.positionDrag={x:a,y:i}},startDrag(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(new Image,0,0),e.dataTransfer.setData("card",t.index),t.moving=!0,t.positionOld=this.clone(t.position),e.target.style.zIndex="1000"},onDragOver(e){e.preventDefault()},onDrop(e,t){e.preventDefault();const a=e.clientX||e.pageX||(e.touches?e.touches[0].clientX:null),i=e.clientY||e.pageY||(e.touches?e.touches[0].clientY:null);e.target.style.zIndex="auto";const r=e.dataTransfer.getData("card"),s=this.getCard(r);s.moving=!1,t.index===s.index&&(t=this.getTouchZoneOrCard(a,i,s.index)),t.zone?this.playCardOnZone(s,t):this.playCardOnCard(s,t)},touchStart(e,t){t.moving=!0,t.positionOld=this.clone(t.position),e.target.style.zIndex="1000"},touchEnd(e,t){t.moving=!1,e.target.style.zIndex="auto";const a=e.changedTouches[0];let i=this.getTouchZoneOrCard(a.clientX,a.clientY,t.index);i&&t.index!=i.index&&(i.zone?this.playCardOnZone(t,i):this.playCardOnCard(t,i))},getTouchZoneOrCard(e,t,a){const i=this.cards.find((i=>i.index!==a&&this.isInside(e,t,i.position))),r=i?null:this.game.fields.find((a=>this.isInside(e,t,a)));return i||r},isInside(e,t,a){const i=a.x,r=a.y,s=i+a.width,n=r+a.height;return e>=i&&e<=s&&t>=r&&t<=n},clone(e){return Object.assign({},e)},showText(e){alert(e)},getGridX(e){return this.game?.grid["x"+e]},getGridY(e){return this.game?.grid["y"+e]},getCard(e){return this.cards.find((t=>t.index==e))},getGridPlace(e,t){return{width:this.game?.grid.box.width+"px",height:this.game?.grid.box.height+"px",left:this.getGridX(e)+"px",top:this.getGridY(t)+"px"}},getFieldStyle(e,t,a,i){return{width:a+"px",height:i+"px",left:e+"px",top:t+"px"}}}},O=I,F=(0,A.Z)(O,d,c,!1,null,"3dfe1e13",null),z=F.exports,H={name:"pageGundamTcgFight",components:{menuBarGundam:s.Z,game:z},data:()=>({}),mounted(){},methods:{}},U=H,R=(0,A.Z)(U,i,r,!1,null,null,null),L=R.exports},90490:function(){},61711:function(e,t,a){a(57658);class i{static animateElement(e,t,a,i){const r={element:e,from:t,to:a};this.animateElements([r],i)}static animateElements(e,t){const a=performance.now();function i(r){const s=r-a,n=Math.min(s/t,1),o=n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2;e.forEach((e=>{const t=e.from.x+(e.to.x-e.from.x)*o,a=e.from.y+(e.to.y-e.from.y)*o,i=e.from.height+(e.to.height-e.from.height)*o,r=e.from.width+(e.to.width-e.from.width)*o,s=e.from.rotation+(e.to.rotation-e.from.rotation)*o;e.element.style.left=t+"px",e.element.style.top=a+"px",e.element.style.height=i+"px",e.element.style.width=r+"px",e.element.style.transform=`rotate(${s}deg)`})),n<1&&requestAnimationFrame(i)}requestAnimationFrame(i)}static easeInOut(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}static add(e,t){return{x:e.x+t.x,y:e.y+t.y,rotation:e.rotation+t.rotation}}static getRelativeTo0(e,t){return{x:t.x-e.x,y:t.y-e.y}}static pxStringToInt(e){return parseInt(e.replace("px",""))}static animate(e,t,a,i,r=500){return this.animateMultiple([{id:e,from:t,to:a,isIncrement:i}],r)}static animateMultiple(e,t=500){const a=[];e.forEach((e=>{const t=document.getElementById(e.id);if(!t)return void console.log("element can't be found : "+e.id);const i=e.from??{x:this.pxStringToInt(t.style.left),y:this.pxStringToInt(t.style.top),rotation:t.style.rotation,height:t.style.height,width:t.style.width};i.rotation=i.rotation??0,i.height=i.height??t.clientHeight;const r=e.isIncrement?this.add(i,e.to):e.to;a.push({element:t,from:i,to:r})})),this.animateElements(a,t)}}e.exports=i},97226:function(e,t,a){var i={"./Daggerheart/class/bard-banner.webp":85519,"./Daggerheart/class/druid-banner.webp":60992,"./Daggerheart/class/guardian-banner.webp":42548,"./Daggerheart/class/ranger-banner.webp":85811,"./Daggerheart/class/rogue-banner.webp":73300,"./Daggerheart/class/seraph-banner.webp":55354,"./Daggerheart/class/sorcerer-banner.webp":17294,"./Daggerheart/class/warrior-banner.webp":18201,"./Daggerheart/class/wizard-banner.webp":52234,"./Daggerheart/domain/banner-arcana.webp":63611,"./Daggerheart/domain/banner-blade.webp":62931,"./Daggerheart/domain/banner-bone.webp":33989,"./Daggerheart/domain/banner-codex.webp":79151,"./Daggerheart/domain/banner-grace.webp":64559,"./Daggerheart/domain/banner-midnight.webp":36595,"./Daggerheart/domain/banner-sage.webp":24162,"./Daggerheart/domain/banner-splendor.webp":52593,"./Daggerheart/domain/banner-valor.webp":89751,"./Daggerheart/domain/logo-arcana.webp":99903,"./Daggerheart/domain/logo-blade.webp":1753,"./Daggerheart/domain/logo-bone.webp":37935,"./Daggerheart/domain/logo-codex.webp":40820,"./Daggerheart/domain/logo-grace.webp":54010,"./Daggerheart/domain/logo-midnight.webp":7925,"./Daggerheart/domain/logo-sage.webp":99224,"./Daggerheart/domain/logo-splendor.webp":1373,"./Daggerheart/domain/logo-valor.webp":39249,"./Daggerheart/other/cost.webp":80987,"./Gundam/cards/EXBP-001.webp":69411,"./Gundam/cards/GD01-028.webp":21495,"./Gundam/cards/GD01-034.webp":63515,"./Gundam/cards/GD01-040.webp":66732,"./Gundam/cards/GD01-041.webp":70958,"./Gundam/cards/GD01-091.webp":81708,"./Gundam/cards/GD01-107.webp":66642,"./Gundam/cards/ST02-001.webp":58864,"./Gundam/cards/ST02-002.webp":23941,"./Gundam/cards/ST02-005.webp":55045,"./Gundam/cards/ST02-010.webp":99834,"./Gundam/cards/ST02-012.webp":57160,"./Gundam/cards/ST02-013.webp":55214,"./Gundam/cards/ST02-015.webp":34078,"./blue.webp":70148,"./dark.webp":87975,"./konamiCode.webp":95768};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=97226},68499:function(e,t,a){"use strict";e.exports=a.p+"img/GundamLogo2.e101246d.png"},69411:function(e,t,a){"use strict";e.exports=a.p+"img/EXBP-001.bf21c22f.webp"},21495:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-028.d05bd1e0.webp"},63515:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-034.f747b003.webp"},66732:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-040.acdadefd.webp"},70958:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-041.c76a26ff.webp"},81708:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-091.38c07c00.webp"},66642:function(e,t,a){"use strict";e.exports=a.p+"img/GD01-107.cbcb9846.webp"},58864:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-001.4b73f4fb.webp"},23941:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-002.b845951e.webp"},55045:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-005.8bffb70c.webp"},99834:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-010.33785975.webp"},57160:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-012.bb62e8de.webp"},55214:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-013.f56b594e.webp"},34078:function(e,t,a){"use strict";e.exports=a.p+"img/ST02-015.7e42f5aa.webp"},70898:function(e,t,a){"use strict";e.exports=a.p+"img/wingzero2.48fd7deb.gif"},70148:function(e,t,a){"use strict";e.exports=a.p+"img/blue.de89a950.webp"},87975:function(e,t,a){"use strict";e.exports=a.p+"img/dark.fff488e7.webp"},38525:function(e,t,a){"use strict";e.exports=a.p+"img/gradientBlack.a82f0a15.png"},95768:function(e,t,a){"use strict";e.exports=a.p+"img/konamiCode.ce17ba28.webp"},3270:function(e){"use strict";e.exports=JSON.parse('{"_":[{"id":"GD01-028","level":5,"cost":3,"name":"Gundam Sandrock","type":[0],"attribute":"(Operation Meteor)","link":"[Quatre Raberba Winner]","effectText":"Deploy Hand to Field (Maganac Corps)","effect":[{"trigger":"onplay","effect":"deploy","target":"Maganac Corps"}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":4},{"id":"GD01-034","level":4,"cost":2,"name":"Gundam Heavyarms","type":[0],"attribute":"(Operation Meteor)","link":"[Trowa Barton]","effectText":"During Pair this unit gains Breach 3","effect":[{"trigger":"onpair","effect":"breach","value":3}],"pilot":"","burstText":"","targetUnit":false,"ap":3,"hp":4},{"id":"GD01-040","level":5,"cost":2,"name":"Wing Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"","effect":[],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":3},{"id":"GD01-041","level":4,"cost":3,"name":"Shenlong Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Chang Wufei]","effectText":"Breach 3","effect":[{"trigger":"onplay","effect":"breach","value":3}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":3},{"id":"GD01-091","level":4,"cost":1,"name":"Chang Wufei","type":[1],"attribute":"(Operation Meteor)","link":"","effectText":"xxx","effect":[{"trigger":"onpair","target":"pairUnit","effect":"immuneApXIfBreach","value":4},{"trigger":"burst","effect":"sendToHand"}],"pilot":"During your turn, if this Unit has Breach, it can\'t receive battle damage from enemy Units with 3 or less AP.","burstText":"Add this card to your hand","targetUnit":false,"ap":2,"hp":1},{"id":"GD01-107","level":3,"cost":3,"name":"First Contact","type":[2],"attribute":"","link":"","effectText":"Main : Place 1 rested Resource.","effect":[{"trigger":"command","effect":"placeRestedResource","value":1},{"trigger":"burst","effect":"placeExResource","value":1}],"pilot":"","burstText":"Place 1 Ex Resource.","targetUnit":false,"ap":0,"hp":0},{"id":"ST02-001","level":6,"cost":4,"name":"Wing Gundam","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"Breach 5. This Unit may choose an active enemy Unit that is Lv4 or lower as its attack target.","effect":[{"trigger":"onplay","effect":"breach","value":5},{"trigger":"onplay","effect":"attackActiveEnnemyLvXOrLower","value":5}],"pilot":"","burstText":"","targetUnit":false,"ap":4,"hp":5},{"id":"ST02-002","level":3,"cost":3,"name":"Wing Gundam (Bird Mode)","type":[0],"attribute":"(Operation Meteor)","link":"[Heero Yuy]","effectText":"Deploy : Place 1 Ex Resource","effect":[{"trigger":"onplay","effect":"placeExResource","value":1}],"pilot":"","burstText":"","targetUnit":false,"ap":2,"hp":2},{"id":"ST02-005","level":2,"cost":2,"name":"Maganac","type":[0],"attribute":"(Maganac Corps)","effect":[],"link":"","effectText":"","pilot":"","burstText":"","targetUnit":false,"ap":3,"hp":2},{"id":"ST02-010","level":4,"cost":1,"name":"Heero Yuy","type":[1],"attribute":"(Operation Meteor)","link":"","effectText":"","effect":[{"trigger":"onlink","type":"gain","target":"pairUnit","effect":"incruise","ap":1,"hp":1},{"trigger":"burst","effect":"sendToHand"}],"pilot":"This Unit get AP+1 and HP+1 while linked.","burstText":"Add this card to your hand","targetUnit":false,"ap":2,"hp":1},{"id":"ST02-012","level":4,"cost":1,"name":"Trowa Barton","type":[1,2],"attribute":"(Operation Meteor)","link":"","effectText":"Main : Choose 1 of your Units. It gains Breach 3 during this turn.","effect":[{"trigger":"command","effect":"gainThisTurn","target":"unit","effect2":"breach","value":3}],"pilot":"","burstText":"","targetUnit":true,"ap":1,"hp":1},{"id":"ST02-013","level":4,"cost":1,"name":"Quatre Raberba Winner","type":[1,2],"attribute":"(Operation Meteor)","link":"","effectText":"Action : during this battle, your shield area cards can\'t receive damage from ennemy Units that are Lv.4 or lower.","effect":[{"trigger":"action","effect":"protectionShieldLvXOrLower","value":4}],"pilot":"","burstText":"","activateDuringBattle":true,"targetUnit":false,"ap":1,"hp":1},{"id":"ST02-015","level":2,"cost":2,"name":"Saint Gabriel Institute","type":[3],"attribute":"(Academy) (Stronghold)","link":"","effectText":"Deploy : Add 1 of your Shields to your hand. Then look at the top 2 cards of your deck and return 1 to the top and 1 to the bottom.","effect":[{"trigger":"burst","effect":"sendToField"},{"trigger":"onplay","effect":"top2DeckCard1Top1Bottom"},{"trigger":"onplay","effect":"get1ShieldToHand"}],"pilot":"","burstText":"Deploy this card","targetUnit":false,"ap":0,"hp":5},{"id":"EXBP-001","level":0,"cost":0,"name":"EX Base","type":[3],"attribute":"","link":"","effectText":"","pilot":"","burstText":"","burst":[],"targetUnit":false,"ap":0,"hp":3},{"id":"xxx","level":0,"cost":0,"name":"xxx","type":[0],"attribute":"xxx","link":"","effectText":"xxx","effect":[],"pilot":"xxx","burstText":"","burst":[],"targetUnit":false,"ap":0,"hp":0}]}')}}]);
//# sourceMappingURL=662.dd8e2fb3.js.map