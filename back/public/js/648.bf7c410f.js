"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[648],{3266:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var l=a(4562),s=a(4324),n=a(7808),i=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Les Salons")]),t("div",{staticClass:"flex-wrap p5px bg",staticStyle:{top:"0px",right:"0px"}},[t(l.Z,{class:{bgWhite:"help"==e.salon,bg2:"help"!=e.salon,m5px:!0},attrs:{text:""},on:{click:function(t){return e.selectSalon("help")}}},[t(s.Z,[e._v("mdi-help")]),e._v(" Aide ")],1),t(l.Z,{class:{bgWhite:"Temp"==e.salon,bg2:"Temp"!=e.salon,m5px:!0},attrs:{text:""},on:{click:function(t){return e.selectSalon("Temp")}}},[t(s.Z,[e._v("mdi-cube")]),e._v(" Salon Temporaire ")],1)],1),"help"==e.salon?t("div",[t("h1",[e._v("Les Commandes")]),e._m(0),t("br"),t("h1",[e._v("Exemple Pathfinder 2")]),e._m(1),t("br")]):t("div",["Temp"==e.salon?t("div",{staticClass:"bg p5px"},[e._v("Les données de ce salon ne sont pas sauvegardées.")]):e._e(),t("div",{staticClass:"flex-wrap p5px bg",staticStyle:{top:"0px",right:"0px"}},e._l(e.fight.creatures,(function(a){return t(l.Z,{key:"Creature"+a.name,staticClass:"bg2 m5px",attrs:{text:""}},[e._v(" "+e._s(e.toCreatureString(a))+" ")])})),1),t("br"),t("div",{staticClass:"m5px"},[t("pre",[e._v(e._s(e.fight.history))])]),t("br"),t("div",{staticStyle:{color:"white"}},[t("div",{staticClass:"flex-wrap p5px",staticStyle:{top:"0px",right:"0px"}},e._l(e.commands,(function(a){return t(l.Z,{key:"Command"+a.id,staticClass:"bg2 m5px",attrs:{text:""},on:{click:function(t){return e.selectCommand(a.value)}}},[e._v(" "+e._s(a.id)+" ")])})),1),t(n.Z,{staticClass:"flex-grow m5px",attrs:{"hide-details":"",label:"Écrire une commande et appuyer sur entrer"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.applyCommand("")}},model:{value:e.command,callback:function(t){e.command=t},expression:"command"}})],1)])])},r=[function(){var e=this,t=e._self._c;return t("pre",[e._v("        Une valeur peut être un nombre (exemple: 12) ou un texte sans espace (TresGros) ou une formule (1d20+5*8/3-4)\n\n        "),t("b",[e._v("Définir un personnage en lui donnant un nom et des valeurs.")]),e._v("\n        "),t("b",[e._v("set")]),e._v(" (nom du personnage) (propriété 1) (valeur 1) (propriété 2) (valeur 2) ...\n        set aziel pv 20 shield 32 ca 19 ref 1d20+8 vig 1d20+8 vol 1d20+12 \n        -- aziel have been updated\n\n        "),t("b",[e._v("Attaquer un personnage")]),e._v("\n        "),t("b",[e._v("attack")]),e._v(" (nom de la victime) (formule pour toucher) (propriété de défense de la victime) (formule de dégat) (propriété de vie) (nom de l'attaque)\n        attack aziel 1d20+5 ca 1d8+3 pv Attaque de javelot \n        -- Attack:1d20(15)+5=20 vs ca:19 ### the attack succeeded Damages:1d8(4)+3=7 aziel pv:20-7=13 ###\n        \n        "),t("b",[e._v("Attaquer un personnage avec un sort de défense")]),e._v("\n        "),t("b",[e._v("spell")]),e._v(" (nom de la victime) (DD pour toucher) (propriété de défense de la victime) (formule de dégat) (propriété de vie) (nom de l'attaque)\n        spell aziel 18 ref 3d4 pv Arc électrique \n        -- Attack:18 vs ref:1d20(16)+8=24 ### The attack partially fails.  Damages:3d4(6)/2=3 aziel pv:13-3=10 ###\n        \n        "),t("b",[e._v("Augmenter la valeur de propriétés")]),e._v("\n        "),t("b",[e._v("add")]),e._v(" (nom du personnage) (propriété 1) (valeur 1) (propriété 2) (valeur 2) ...\n        add aziel pv 10 shield -2 \n        -- aziel pv 10+10=20 shield 32-2=30\n        \n        "),t("b",[e._v("Montrer les valeurs d'un personnage")]),e._v("\n        "),t("b",[e._v("show")]),e._v(" (nom du personnage) (propriété 1) (propriété 2) ...\n        show aziel pv shield \n        -- aziel pv:20 shield:30\n        ")])},function(){var e=this,t=e._self._c;return t("pre",[e._v("        "),t("b",[e._v("Aziel Niveau 4")]),e._v("\n        Il a 39PV, une classe d'armure de 20, des jets de sauvegardes réflexes: +9, vigueur +8, volonté +12 et un bouclier ayant 32pv\n        Il attaque avec un javelot boomerang qui inflige 2d6+1 dégats avec une première attaque a +9, une seconde a +4 et une dernière a -1.\n        Il possède un sort d'arc électrique qui impose un jet de réflexe basique DD 19 et inflige 2d4 dégats et un sort de morsure du froid qui impose un jet de vigueur basique DD 19 qui inflige 2d6+3 dégats\n\n        Voici les différentes commandes :\n        "),t("b",[e._v("Définir le personnage")]),e._v("\n        set aziel pv 39 bouclier 32 ca 20 ref 1d20+9 vig 1d20+8 vol 1d20+12\n        \n        "),t("b",[e._v("Effectuer trois attaques le même tour contre un loup. La première a +9, la seconde a +4 et la dernière a -1")]),e._v("\n        attack loup 1d20+9 ca 2d6+1 pv Javelot 1 \n        attack loup 1d20+4 ca 2d6+1 pv Javelot 2\n        attack loup 1d20-1 ca 2d6+1 pv Javelot 3\n\n        Remarque : Il est possible d'écrire les trois commandes en une seul ligne avec la virgule en guise de séparateur\n        attack loup 1d20+9 ca 2d6+1 pv Javelot 1, attack loup 1d20+4 ca 2d6+1 pv Javelot 2, attack loup 1d20-1 ca 2d6+1 pv Javelot 3\n        \n        "),t("b",[e._v("Parer avec son bouclier")]),e._v("\n        add aziel pv 5 bouclier -5\n\n        "),t("b",[e._v("Faire une attaque de sort sur le loup")]),e._v("\n        spell loup 19 ref 2d4 pv Arc électrique \n        spell loup 19 vig 2d6+3 pv Morsure du froid \n        ")])}];function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function u(e,t){if("object"!==o(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!==o(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e){var t=u(e,"string");return"symbol"===o(t)?t:String(t)}function d(e,t,a){return t=c(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(7658);class p{static handleAllCommand(e,t){this.creatures=t||this.creatures;const a=e.trim().toLowerCase(),l=[];return a.split(",").forEach((e=>this.handleCommand(l,e.trim()))),l.join("\n")}static handleCommand(e,t){const a=t.split(" "),l=a.shift();let s=this.getCreature(a);s||e.push(l+" doesn't exist."),t.startsWith("set")&&this.handleSet(e,s,a),t.startsWith("show")&&this.handleShow(e,s,a),t.startsWith("attack")&&this.handleAttack(e,s,a,!0),t.startsWith("spell")&&this.handleAttack(e,s,a,!1),t.startsWith("add")&&this.handleAdd(e,s,a),e.length<1&&e.push("No valid command.")}static getCreature(e){const t=e.shift();let a=this.creatures.find((e=>e.name==t));return a||(a={name:t},this.creatures.push(a),a)}static handleSet(e,t,a){let l=0;while(a[l]){const e=a[l+1],s=parseInt(e);t[a[l]]=isNaN(e)?e:s,l+=2}e.push(t.name+" have been updated")}static handleShow(e,t,a){let l=0,s=[];while(a[l]){const e=t[a[l]];e&&s.push(a[l]+":"+e),l++}e.push(t.name+" "+s.join(" "))}static handleAdd(e,t,a){let l=0,s=[];while(a[l]){const e=a[l];let n=t[e];if(isNaN(n))s.push(e+" x");else{let i=n+"+"+a[l+1];i=i.replaceAll("+-","-");const r=this.handleRoll(i);s.push(e+" "+r.expression),t[e]=r.value}l+=2}e.push(t.name+" "+s.join(" "))}static handleAttack(e,t,a,l){const s=a.shift(),n=a.shift(),i=a.shift(),r=a.shift(),o=a.join(" "),u=this.handleRoll(t[n]),c=this.handleRoll(s);if(!u||isNaN(u.value))return void e.push("-- "+o+" versus "+t.name+" -- Attack:"+c.expression+" vs "+n+": ???");let d="-- "+o+" versus "+t.name+" -- Attack:"+c.expression+" vs "+n+":"+u.expression;d+=l?this.ApplyDamageNormal(t,c,u,i,r):this.ApplyDamageBasic(t,c,u,i,r),e.push(d)}static ApplyDamageNormal(e,t,a,l,s){return 1==t.dice||t.value+10<=a.value?" ### The attack critically fails ###":t.value<a.value?" ### The attack fails ###":t.dice>=20||t.value-10>=a.value?(l+="*2"," ### the attack critically succeeded"+this.ApplyDamage(e,l,s)+" ###"):" ### the attack succeeded"+this.ApplyDamage(e,l,s)+" ###"}static ApplyDamageBasic(e,t,a,l,s){return 20==a.dice||a.value-10>=t.value?" ### The attack critically fails ###":a.value>=t.value?(l+="/2"," ### The attack partially fails. "+this.ApplyDamage(e,l,s)+" ###"):a.dice>1&&a.value+10>t.value?" ### the attack succeeded"+this.ApplyDamage(e,l,s)+" ###":(l+="*2"," ### the attack critically succeeded "+this.ApplyDamage(e,l,s)+" ###")}static ApplyDamage(e,t,a){const l=this.handleRoll(t);let s=this.handleRoll(e[a]),n=" Damages:"+l.expression+" "+e.name+" "+a+":"+s.value+"-"+l.value+"=";return s.value-=l.value,e[a]=s.value,n+=e[a],n}static handleRoll(e){if(!e)return;const t=e.toString().replaceAll("+"," + ").replaceAll("-"," - ").replaceAll("*"," * ").replaceAll("/"," / "),a=this.isIncludingOperator(t);if(!a)return this.rollDice(t);let l=t.split(" "),s=this.rollDice(l.shift());while(l[0]&&l[1]){const e=l.shift();let t=l.shift();t=t.includes("d")?this.rollDice(t):{expression:t,value:parseInt(t)},s.expression+=e+t.expression,"+"==e&&(s.value+=t.value),"-"==e&&(s.value-=t.value),"*"==e&&(s.value*=t.value),"/"==e&&(s.value/=t.value)}return s.expression+="="+s.value,s}static isIncludingOperator(e){return e.includes("+")||e.includes("-")||e.includes("*")||e.includes("/")}static rollDice(e){if(!e.includes("d"))return{dice:10,expression:e,value:parseInt(e)};let t=e.split("d");const a=t.shift(),l=t.shift();let s=[];for(let r=0;r<a;r++)s.push(Math.floor(Math.random()*l)+1);const n=s.reduce(((e,t)=>e+t),0),i=s.length<2?n:s.join("+")+"="+n;return{dice:n,expression:e+"("+i+")",value:n}}}d(p,"creatures",[]);var v=p,h=a(9043),m={name:"pageClub",components:{},data:()=>({command:"",history:"",fights:null,salon:"help",fight:null,fightTemp:{creatures:[],history:"Start of the channel Temp"},commands:[{id:"set",value:"set aziel pv 20 shield 32 ca 19 ref 1d20+8 vig 1d20+8 vol 1d20+12"},{id:"show",value:"show aziel pv shield"},{id:"add",value:"add aziel pv 5 shield -5"},{id:"attack",value:"attack aziel 1d20+5 ca 1d8+3 pv Attaque de javelot"},{id:"spell",value:"spell aziel 18 ref 3d4 pv Arc électrique"}]}),mounted(){h.Z.getAll("fight").then((e=>{this.fights=e}))},methods:{selectSalon(e){this.salon=e,"help"!=this.salon&&(this.fight="Temp"==this.salon?this.fightTemp:this.fights[e])},applyCommand(e){const t=e||this.command;if("Temp"==this.salon){const e=v.handleAllCommand(t,this.fightTemp.creatures);this.fight.history+="\n"+e}else h.Z.insert("fight",{id:this.fight.id,commands:t}).then((e=>{this.fight=e.data}));this.command=""},selectCommand(e){this.command+=e},toCreatureString(e){return e.name+" "+Object.keys(e).filter((e=>"name"!=e)).map((t=>t+":"+e[t])).join(" ")}}},f=m,g=a(1001),b=(0,g.Z)(f,i,r,!1,null,null,null),_=b.exports}}]);
//# sourceMappingURL=648.bf7c410f.js.map