(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[81],{50229:function(t,e,i){"use strict";i.d(e,{Z:function(){return f}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nodrag"},[t._l(t.sources,(function(i,o){return e("div",{key:"source"+o,class:{absolute:1,pointCircle:1,colorYellow:i.show},style:{top:i.y+"px",left:i.x+"px",width:i.width+"px",height:i.height+"px","z-index":55},attrs:{id:"source"+o},on:{mousedown:function(e){return t.drag(i)},click:function(e){return t.$emit("click",i)}}})})),e("div",{style:{display:t.source?"":"none"}},[t._l(t.targets.filter((t=>t)),(function(i,o){return e("div",{key:"target"+o},[e("div",{class:{absolute:1,pointCircle:1,colorYellow:t.target!=i,colorGreen:t.target==i},style:{top:i.y+"px",left:i.x+"px",width:i.width+"px",height:i.height+"px","z-index":60}}),e("div",{staticClass:"absolute text-center textVerticalCenter text-shadow-black colorWhite",style:{top:i.y+"px",left:i.x+"px",width:i.width+"px",height:i.height+"px","z-index":60}},[e("div",[t._v(t._s(i.text))])])])})),e("div",{style:{"pointer-events":"none"}},[e("div",{staticClass:"absolute",staticStyle:{top:"0px",left:"0px",width:"0px",height:"0px"},attrs:{id:"arrow0"+t.id}},[e("arrow-div",{attrs:{color:t.color}})],1),e("div",{staticClass:"absolute",staticStyle:{top:"0px",left:"0px",width:"0px",height:"0px"},attrs:{id:"arrow1"+t.id}},[e("arrow-div",{attrs:{color:t.color}})],1)])],2)],2)},s=[],r=i(61711),a=i.n(r),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w100p h100p relative"},[e("div",{staticClass:"arrow absolute",style:{top:"0px",left:"0px","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"15%",left:"15%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"30%",left:"30%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"45%",left:"45%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"60%",left:"60%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"75%",left:"75%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}})])},l=[],h={name:"arrow-div",props:["color"]},d=h,c=i(1001),p=(0,c.Z)(d,n,l,!1,null,"135b1d42",null),u=p.exports,m={name:"drag-drop-arrow",props:["id","sources","freeze"],components:{arrowDiv:u},data:()=>({delay:1500,animations:[],mouse:{x:0,y:0},color:"red",targets:[],source:null,target:null}),watch:{sources(){this.resetSources()}},mounted(){window.addEventListener("mousemove",this.updateMouse),window.addEventListener("mouseup",this.mouseUp),window.addEventListener("touchmove",this.updateMouse),window.addEventListener("touchend",this.mouseUp),this.resetSources()},beforeUnmount(){window.removeEventListener("mousemove",this.updateMouse),window.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("touchmove",this.updateMouse),window.removeEventListener("touchend",this.mouseUp)},methods:{updateMouse(t){const e=t&&t.touches&&t.touches.length>0?t.touches[0]:{};this.mouse.x=t.clientX?t.clientX:e.clientX,this.mouse.y=t.clientY?t.clientY:e.clientY,this.updateAnimation()},resetSources(){this.sources.forEach(((t,e)=>{const i=document.getElementById("source"+e);i?.addEventListener("touchstart",(()=>this.drag(t)))})),this.animate()},drag(t){this.freeze||(this.source=t,this.targets=this.source.targets,this.animate())},mouseUp(){!this.source||!this.animations||this.animations.length<1||this.freeze||(this.$emit("drop",{mouse:this.mouse,source:this.source,target:this.target}),this.source=null)},animate(){this.source&&(this.updateAnimation(),a().animateMultiple(this.animations,this.delay-5),setTimeout((()=>{this.animate()}),this.delay+15))},isInside(t,e,i){const o=i.x,s=i.y,r=o+i.width,a=s+i.height;return t>=o&&t<=r&&e>=s&&e<=a},updateAnimation(){if(!this.source)return;(!this.animations||this.animations.length<1)&&(this.animations=[this.createAnimation("arrow0"+this.id,!1),this.createAnimation("arrow1"+this.id,!0)]),this.target=this.targets.find((t=>this.isInside(this.mouse.x,this.mouse.y,t))),this.color=this.target?"green":"red";const t={x:this.source.x+this.source.width/2,y:this.source.y+this.source.height/2},e=this.target?{x:this.target.x+this.target.width/2,y:this.target.y+this.target.height/2}:this.mouse;this.animations.forEach((i=>{const o=this.getAngleDeg(t,e)+135,s=(this.target,75),r=s/2;i.from.x=t.x,i.from.y=t.y,i.from.rotation=o,i.to.rotation=o,i.to.x=e.x,i.to.y=e.y,i.mid.x=i.from.x+(i.to.x-i.from.x)/2-r,i.mid.y=i.from.y+(i.to.y-i.from.y)/2-r}))},createAnimation(t,e){const i=(this.target,75),o={opacity:1,width:5,height:5},s={opacity:1,width:i,height:i},r={opacity:0,width:0,height:0};return{id:t,from:o,mid:s,to:r,delay:e,isIncrement:!1}},getAngleDeg(t,e){const i=Math.atan2(e.y-t.y,e.x-t.x);return i*(180/Math.PI)}}},x=m,g=(0,c.Z)(x,o,s,!1,null,null,null),f=g.exports},1081:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return d}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h100p w100p relative bgWhite"},[e("h2",[t._v("Page Test")]),e("drag-drop-arrow",{attrs:{id:"0",sources:t.points},on:{drop:t.dropPoint}}),e("div",{directives:[{name:"fit-text",rawName:"v-fit-text"}],staticClass:"bg",staticStyle:{width:"200px","font-size":"32px",overflow:"hidden","z-index":"200"}},[t._v(" Ce texte doit s’adapter à la largeur ! ")]),e("div",{class:{bgRed:1,"anim-height":1,height0:t.popupShow},staticStyle:{width:"500px",height:"500px",transform:"scale(0.5)"}}),t._m(0)],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgYellow absolute",staticStyle:{top:"50px",left:"500px",width:"300px",height:"150px"}},[e("div",{staticClass:"relative w100p h100p"},[e("div",{staticClass:"bgRed absolute",staticStyle:{width:"25px",height:"25px",transform:"rotate(45deg)",top:"45%",right:"-12.5px"}}),e("div",{staticClass:"bgRed absolute",staticStyle:{width:"25px",height:"25px",transform:"rotate(45deg)",left:"45%",top:"-12.5px"}}),e("div",{staticClass:"bgRed absolute",staticStyle:{width:"25px",height:"25px",transform:"rotate(45deg)",top:"45%",left:"-12.5px"}}),e("div",{staticClass:"bgRed absolute",staticStyle:{width:"25px",height:"25px",transform:"rotate(45deg)",left:"45%",bottom:"-12.5px"}})])])}],r=(i(57658),i(50229)),a={name:"pageTest",components:{dragDropArrow:r.Z},data:()=>({popupShow:!1,game:{popup:{cards:[],text:"Title",choices:[{text:"yes"},{text:"no"}]}},points:[{x:240,y:240,width:75,height:75,show:!0},{x:40,y:240,width:75,height:75,show:!0}]}),mounted(){const t=[],e=[],i=75,o=75;let s=40;for(let r=40;r<260;r+=100)t.push({x:r,y:s,width:i,height:o,text:"Point "+r});s=440;for(let r=40;r<260;r+=100)e.push({x:r,y:s,width:i,height:o,text:"Point "+r});this.points[0].targets=t,this.points[1].targets=e,setTimeout((()=>{this.popupShow=!0}),2e3)},methods:{dropPoint(t){alert(JSON.stringify(t)),this.source=null}}},n=a,l=i(1001),h=(0,l.Z)(n,o,s,!1,null,null,null),d=h.exports},61711:function(t){class e{static animateElement(t,e,i,o){const s={element:t,from:e,to:i};this.animateElements([s],o)}static animateElements(t,e){const i=performance.now();function o(s){function r(t,e,i){let o=i,s=null,r=null,a=0;return e.delay&&(o=o<.5?o+.5:o-.5),e.mid&&e.mid[t]?o<.5?(o/=.5,a=o,s=e.from,r=e.mid):(o=(o-.5)/.5,a=o,s=e.mid,r=e.to):(a=o<.5?2*o*o:1-Math.pow(-2*o+2,2)/2,s=e.from,r=e.to),s[t]+(r[t]-s[t])*a}const a=s-i,n=Math.min(a/e,1);t.forEach((t=>{const e=r("x",t,n),i=r("y",t,n),o=r("width",t,n),s=r("height",t,n),a=r("rotation",t,n),l=r("opacity",t,n);t.element.style.left=e+"px",t.element.style.top=i+"px",t.element.style.height=s+"px",t.element.style.width=o+"px",t.element.style.opacity=l,t.element.style.transform=`rotate(${a}deg)`})),n<1&&requestAnimationFrame(o)}requestAnimationFrame(o)}static easeInOut(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}static add(t,e){const i="x,y,width,height,rotation,opacity",o={};return i.split(",").forEach((i=>{o[i]=t[i];const s=e[i];s&&(o[i]+=s)})),o}static setIfNull(t,e){const i="x,y,width,height,rotation,opacity",o={};return i.split(",").forEach((i=>{o[i]=t[i];const s=e[i];s&&(o[i]=s)})),o}static getRelativeTo0(t,e){return{x:e.x-t.x,y:e.y-t.y}}static pxStringToInt(t){return parseInt(t.replace("px",""))}static animate(t,e,i,o,s){return this.animateMultiple([{id:t,from:e,to:i,isIncrement:o}],s)}static animateMultiple(t,e=-1){t.forEach((t=>{t.to&&(t.element=document.getElementById(t.id),t.element?(t.from=t.from??{x:this.pxStringToInt(t.element.style.left),y:this.pxStringToInt(t.element.style.top),rotation:t.element.style.rotation,height:t.element.style.height,width:t.element.style.width,delay:!1},t.from.rotation=t.from.rotation??0,t.from.opacity=t.from.opacity??1,t.from.height=t.from.height??t.element.clientHeight,t.to=t.isIncrement?this.add(t.from,t.to):t.to,t.mid=t.mid?t.isIncrement?this.add(t.from,t.mid):t.mid:null):console.log("element can't be found : "+t.id))})),this.animateElements(t,e)}}t.exports=e}}]);
//# sourceMappingURL=81.7595b572.js.map