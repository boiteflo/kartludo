"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[824],{1824:function(t,e,s){s.r(e),s.d(e,{default:function(){return ct}});var i=function(){var t=this,e=t._self._c;return e("div",[t.loading?e("div",[t._v(" Chargement ")]):t.cube?e("panel-cube-config",{attrs:{cube:t.cube,boosters:t.boosters}}):e("div",[t._v(" Création d'un cube ")])],1)},a=[],o=s(7925),r=s(9043),l=s(9092),n=(s(7658),s(573)),c=s(7069),u=s(144),h=u.ZP.extend({name:"rippleable",directives:{ripple:c.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),d=s(6174),p=s(7678);function b(t){t.preventDefault()}var m=(0,p.Z)(n.Z,h,d.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=n.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:b},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:b},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const s=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===s&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}}),v=s(5352);const f=t=>{const{touchstartX:e,touchendX:s,touchstartY:i,touchendY:a}=t,o=.5,r=16;t.offsetX=s-e,t.offsetY=a-i,Math.abs(t.offsetY)<o*Math.abs(t.offsetX)&&(t.left&&s<e-r&&t.left(t),t.right&&s>e+r&&t.right(t)),Math.abs(t.offsetX)<o*Math.abs(t.offsetY)&&(t.up&&a<i-r&&t.up(t),t.down&&a>i+r&&t.down(t))};function C(t,e){const s=t.changedTouches[0];e.touchstartX=s.clientX,e.touchstartY=s.clientY,e.start&&e.start(Object.assign(t,e))}function g(t,e){const s=t.changedTouches[0];e.touchendX=s.clientX,e.touchendY=s.clientY,e.end&&e.end(Object.assign(t,e)),f(e)}function x(t,e){const s=t.changedTouches[0];e.touchmoveX=s.clientX,e.touchmoveY=s.clientY,e.move&&e.move(Object.assign(t,e))}function w(t){const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:t=>C(t,e),touchend:t=>g(t,e),touchmove:t=>x(t,e)}}function y(t,e,s){const i=e.value,a=i.parent?t.parentElement:t,o=i.options||{passive:!0};if(!a)return;const r=w(e.value);a._touchHandlers=Object(a._touchHandlers),a._touchHandlers[s.context._uid]=r,(0,v.XP)(r).forEach((t=>{a.addEventListener(t,r[t],o)}))}function _(t,e,s){const i=e.value.parent?t.parentElement:t;if(!i||!i._touchHandlers)return;const a=i._touchHandlers[s.context._uid];(0,v.XP)(a).forEach((t=>{i.removeEventListener(t,a[t])})),delete i._touchHandlers[s.context._uid]}const S={inserted:y,unbind:_};var P=S,k=s(7394),B=s(3305),R=m.extend({name:"v-switch",directives:{Touch:P},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...n.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(k.b0,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(B.Z,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===v.Do.left&&this.isActive||t.keyCode===v.Do.right&&!this.isActive)&&this.onChange()}}}),Z=s(7808),D=function(){var t=this,e=t._self._c;return t.cube?e("div",{staticStyle:{position:"relative"}},[e("h1",[t._v(t._s(t.cube.Title))]),e("h2",[t._v("Réglage des options")]),e("img",{staticStyle:{position:"absolute",top:"10px",right:"10px",width:"180px"},attrs:{src:t.cube.Image}}),e("div",{staticClass:"p5px flex-wrap"},[e(Z.Z,{staticClass:"m5px",attrs:{label:"Nombre de Commune dans un lot"},model:{value:t.commonCardPerBatch,callback:function(e){t.commonCardPerBatch=e},expression:"commonCardPerBatch"}}),e(Z.Z,{staticClass:"m5px",attrs:{label:"Nombre de Rare dans un lot"},model:{value:t.rareCardPerBatch,callback:function(e){t.rareCardPerBatch=e},expression:"rareCardPerBatch"}}),e(Z.Z,{staticClass:"m5px",attrs:{label:"Nombre de Holo ou Commune dans un lot"},model:{value:t.holoCardPerBatch,callback:function(e){t.holoCardPerBatch=e},expression:"holoCardPerBatch"}}),e(Z.Z,{staticClass:"m5px",attrs:{label:"Nombre de lot dans un cube"},model:{value:t.batchPerCube,callback:function(e){t.batchPerCube=e},expression:"batchPerCube"}}),e(Z.Z,{staticClass:"m5px",attrs:{label:"Probabilité des Super Rare (%)"},model:{value:t.probabilitySr,callback:function(e){t.probabilitySr=e},expression:"probabilitySr"}}),e(Z.Z,{staticClass:"m5px",attrs:{label:"Probabilité des Ultra Rare (%)"},model:{value:t.probabilityUr,callback:function(e){t.probabilityUr=e},expression:"probabilityUr"}}),e(Z.Z,{staticClass:"m5px",attrs:{label:"Probabilité des Secret Rare (%)"},model:{value:t.probabilityScr,callback:function(e){t.probabilityScr=e},expression:"probabilityScr"}})],1),e("div",{staticClass:"p5px flex-wrap"},[e("div",{staticClass:"flex"},[e(R,{staticClass:"m5px w250",attrs:{disabled:"",label:"Carte unique"},model:{value:t.NoDuplicate,callback:function(e){t.NoDuplicate=e},expression:"NoDuplicate"}}),e("text-border",{attrs:{text:"Aucun doublon parmis toutes les cartes."}})],1),e("div",{staticClass:"flex"},[e(R,{staticClass:"m5px w250",attrs:{disabled:"",label:"Holographique unique"},model:{value:t.NoDuplicateHolo,callback:function(e){t.NoDuplicateHolo=e},expression:"NoDuplicateHolo"}}),e("text-border",{attrs:{text:"Aucun doublon parmis toutes les SR, UR et Scr."}})],1)]),e("h2",[t._v("Les Cubes à ouvrir")]),e("div",{staticClass:"flex flex-wrap bg2"},t._l(t.cube.Steps.filter((e=>!t.cubesOpenedIds.includes(e.Booster))),(function(s,i){return e("div",{key:"Step"+i},t._l(t.getBooster(s),(function(s){return e("card-booster",{key:s.Id,attrs:{booster:s,title:s.Title,image:s.Image},on:{open:t.openCubeBooster}})})),1)})),0),e("h2",[t._v("Les Cubes ouverts")]),t._l(t.cubesOpened,(function(s,i){return e("div",{key:"cubeOpened"+i,staticClass:"bg2"},[e("panel-spoiler",{staticClass:"p5px colorWhite",attrs:{title:s.cube,show:!0}},t._l(s.batchs,(function(t,s){return e("panel-cards",{key:i+"Batch"+s,staticClass:"bg2",attrs:{cards:t.Cards,keyid:i+"Batch"+s+"Cards",tooltip:"image"}})})),1)],1)})),e("div",{staticClass:"bg2 h50"})],2):t._e()},V=[],A=s(7142),I=s.n(A),E=s(9548),H=s(4562),N=s(4324),O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m5px bg cursorHand",staticStyle:{width:"180px"}},[e("div",{staticClass:"textCenter h42 bg colorWhite"},[t._v(t._s(t.title))]),e("img",{staticStyle:{width:"180px"},attrs:{src:t.image}}),e(H.Z,{staticClass:"w100p",on:{click:function(e){return t.$emit("open",t.booster)}}},[e(N.Z,[t._v("mdi-cube")]),t._v("Ouvrir le cube")],1)],1)},X=[],Y={name:"card-booster",props:["title","image","booster"]},$=Y,L=s(1001),T=(0,L.Z)($,O,X,!1,null,null,null),M=T.exports,U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg2 colorWhite m5px",staticStyle:{"border-radius":"15px",height:"32px"}},[t.icon?e(N.Z,[t._v(t._s(t.icon))]):t._e(),e("div",{staticClass:"m5px"},[t._v(t._s(t.text))])],1)},j=[],F={name:"text-border",props:["text","icon"]},q=F,z=(0,L.Z)(q,U,j,!1,null,null,null),K=z.exports,W=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"flex bg2"},[e(H.Z,{staticClass:"m5px bg",on:{click:t.showOrHide}},[e(N.Z,[t._v(t._s(t.showPanel?"mdi-chevron-up":"mdi-chevron-down"))])],1),e("div",{staticClass:"flex-grow m5px",staticStyle:{"padding-top":"5px"}},[t._v(t._s(t.title))])],1),e(k.Fx,[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPanel,expression:"showPanel"}]},[t._t("default")],2)]),t.showPanel?e(H.Z,{staticClass:"m5px bg w100p",on:{click:t.showOrHide}},[e(N.Z,[t._v(t._s(t.showPanel?"mdi-chevron-up":"mdi-chevron-down"))])],1):t._e()],1)},G=[],J={name:"panelSpoiler",data:()=>({showPanel:!1}),props:["title","show"],methods:{showOrHide(){this.showPanel=!this.showPanel}}},Q=J,tt=(0,L.Z)(Q,W,G,!1,null,null,null),et=tt.exports,st={name:"panel-cube-config",props:["cube","boosters"],components:{textBorder:K,cardBooster:M,panelCards:E.Z,panelSpoiler:et},data:()=>({store:l.h,NoDuplicate:!1,NoDuplicateHolo:!1,commonCardPerBatch:7,rareCardPerBatch:1,holoCardPerBatch:1,batchPerCube:25,probabilitySr:20,probabilityUr:8,probabilityScr:1,cubesOpened:[],cubesOpenedIds:[]}),methods:{getBooster(t){if(!t.Booster)return[];let e=this.boosters.find((e=>e.Ref===t.Booster));return e?[e]:[]},getRandomInt(t){return Math.floor(Math.random()*t)},getRandomItem(t){return t[this.getRandomInt(t.length)]},openCubeBooster(t){let e=[],s=[],i=[];t.Cards.forEach((t=>{let e=this.store.cards.find((e=>e.IdName===I().cleanup(t.NameEn)));e?s.push({...e,Rarity:t.Rarity}):i.push(t.NameEn)})),i.length>0&&alert("Ces cartes n'ont pas été trouvées : "+i.join("\n"));let a=s.filter((t=>"C"===t.Rarity)),o=s.filter((t=>"R"===t.Rarity)),r=s.filter((t=>"SR"===t.Rarity)),l=s.filter((t=>"UR"===t.Rarity)),n=s.filter((t=>"SCR"===t.Rarity));for(let c=0;c<this.batchPerCube;c++){let t={CardList:[],Cards:[]};for(let e=0;e<this.commonCardPerBatch;e++)t.Cards.push(this.getRandomItem(a));for(let e=0;e<this.rareCardPerBatch;e++)t.Cards.push(this.getRandomItem(o));for(let e=0;e<this.holoCardPerBatch;e++){let e=this.getRandomInt(100),s=e<this.probabilityScr?n:e<this.probabilityUr?l:e<this.probabilitySr?r:a;t.Cards.push(this.getRandomItem(s))}e.push(t)}this.cubesOpened.push({cube:`${t.Ref}-${t.Title}`,batchs:e}),this.cubesOpenedIds.push(t.Ref),window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight)}}},it=st,at=(0,L.Z)(it,D,V,!1,null,null,null),ot=at.exports,rt={name:"pageDeck",components:{panelCubeConfig:ot},data:()=>({store:l.h,loading:!0,isNew:!1,id:null,cube:null,boosters:null}),mounted(){let t=window.location.href,e=t.indexOf("id=");this.isNew=e<1,this.id=t.substring(e+3),(0,o.D)([r.Z.get("cube",this.id),r.Z.getAll("booster")]).subscribe((t=>{this.cube=t[0],this.boosters=t[1],this.loading=!1}))},methods:{openCube(){alert("Bientôt disponible")}}},lt=rt,nt=(0,L.Z)(lt,i,a,!1,null,null,null),ct=nt.exports}}]);
//# sourceMappingURL=824.5c80d0f3.js.map