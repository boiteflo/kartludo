"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[918],{5918:function(t,e,s){s.r(e),s.d(e,{default:function(){return it}});var i=function(){var t=this,e=t._self._c;return e("div",[t.loading?e("div",[t._v(" Chargement ")]):t.cube?e("panel-cube-config",{attrs:{cube:t.cube,boosters:t.boosters}}):e("div",[t._v(" Création d'un cube ")])],1)},a=[],o=s(7925),n=s(9043),r=s(9092),l=(s(7658),s(573)),c=s(7069),u=s(144),h=u.ZP.extend({name:"rippleable",directives:{ripple:c.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),d=s(6174),p=s(7678);function m(t){t.preventDefault()}var b=(0,p.Z)(l.Z,h,d.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=l.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:m},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:m},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const s=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===s&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}}),v=s(5352);const f=t=>{const{touchstartX:e,touchendX:s,touchstartY:i,touchendY:a}=t,o=.5,n=16;t.offsetX=s-e,t.offsetY=a-i,Math.abs(t.offsetY)<o*Math.abs(t.offsetX)&&(t.left&&s<e-n&&t.left(t),t.right&&s>e+n&&t.right(t)),Math.abs(t.offsetX)<o*Math.abs(t.offsetY)&&(t.up&&a<i-n&&t.up(t),t.down&&a>i+n&&t.down(t))};function g(t,e){const s=t.changedTouches[0];e.touchstartX=s.clientX,e.touchstartY=s.clientY,e.start&&e.start(Object.assign(t,e))}function C(t,e){const s=t.changedTouches[0];e.touchendX=s.clientX,e.touchendY=s.clientY,e.end&&e.end(Object.assign(t,e)),f(e)}function x(t,e){const s=t.changedTouches[0];e.touchmoveX=s.clientX,e.touchmoveY=s.clientY,e.move&&e.move(Object.assign(t,e))}function _(t){const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:t=>g(t,e),touchend:t=>C(t,e),touchmove:t=>x(t,e)}}function w(t,e,s){const i=e.value,a=i.parent?t.parentElement:t,o=i.options||{passive:!0};if(!a)return;const n=_(e.value);a._touchHandlers=Object(a._touchHandlers),a._touchHandlers[s.context._uid]=n,(0,v.XP)(n).forEach((t=>{a.addEventListener(t,n[t],o)}))}function y(t,e,s){const i=e.value.parent?t.parentElement:t;if(!i||!i._touchHandlers)return;const a=i._touchHandlers[s.context._uid];(0,v.XP)(a).forEach((t=>{i.removeEventListener(t,a[t])})),delete i._touchHandlers[s.context._uid]}const B={inserted:w,unbind:y};var S=B,k=s(7394),P=s(3305),R=b.extend({name:"v-switch",directives:{Touch:S},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...l.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(k.b0,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(P.Z,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===v.Do.left&&this.isActive||t.keyCode===v.Do.right&&!this.isActive)&&this.onChange()}}}),D=s(7808),V=function(){var t=this,e=t._self._c;return t.cube?e("div",{staticStyle:{position:"relative"}},[e("h1",[t._v(t._s(t.cube.Title))]),e("h2",[t._v("Réglage des options")]),e("img",{staticStyle:{position:"absolute",top:"10px",right:"10px",width:"180px"},attrs:{src:t.cube.Image}}),e("div",{staticClass:"p5px flex-wrap"},[e(D.Z,{staticClass:"m5px",attrs:{label:"Nombre de Commune dans un lot"},model:{value:t.commonCardPerBatch,callback:function(e){t.commonCardPerBatch=e},expression:"commonCardPerBatch"}}),e(D.Z,{staticClass:"m5px",attrs:{label:"Nombre de Rare dans un lot"},model:{value:t.rareCardPerBatch,callback:function(e){t.rareCardPerBatch=e},expression:"rareCardPerBatch"}}),e(D.Z,{staticClass:"m5px",attrs:{label:"Nombre de Holo ou Commune dans un lot"},model:{value:t.holoCardPerBatch,callback:function(e){t.holoCardPerBatch=e},expression:"holoCardPerBatch"}}),e(D.Z,{staticClass:"m5px",attrs:{label:"Nombre de lot dans un cube"},model:{value:t.batchPerCube,callback:function(e){t.batchPerCube=e},expression:"batchPerCube"}})],1),e("div",{staticClass:"p5px flex-wrap"},[e("div",{staticClass:"flex"},[e(R,{staticClass:"m5px w250",attrs:{label:"Carte unique"},model:{value:t.NoDuplicate,callback:function(e){t.NoDuplicate=e},expression:"NoDuplicate"}}),e("text-border",{attrs:{text:"Aucun doublon parmis toutes les cartes."}})],1),e("div",{staticClass:"flex"},[e(R,{staticClass:"m5px w250",attrs:{label:"Holographique unique"},model:{value:t.NoDuplicateHolo,callback:function(e){t.NoDuplicateHolo=e},expression:"NoDuplicateHolo"}}),e("text-border",{attrs:{text:"Aucun doublon parmis toutes les SR, UR et Scr."}})],1)]),e("h2",[t._v("Les Cubes à ouvrir")]),e("div",{staticClass:"flex flex-wrap bg2"},t._l(t.cube.Steps.filter((e=>!t.cubesOpenedIds.includes(e.Booster))),(function(s,i){return e("div",{key:"Step"+i},t._l(t.getBooster(s),(function(s){return e("card-booster",{key:s.Id,attrs:{booster:s,title:s.Title,image:s.Image},on:{open:t.openCubeBooster}})})),1)})),0),e("h2",[t._v("Les Cubes ouvert")]),t._l(t.cubesOpened,(function(s,i){return e("div",{key:"cubeOpened"+i,staticClass:"bg2"},[e("h3",{staticClass:"p5px colorWhite bg w100p"},[t._v(t._s(s.cube))]),t._l(s.batchs,(function(t,s){return e("panel-cards",{key:i+"Batch"+s,staticClass:"bg2",attrs:{cards:t.Cards,tooltip:"image"}})}))],2)}))],2):t._e()},Z=[],I=s(7142),A=s.n(I),E=s(9548),N=s(4562),X=s(4324),H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m5px bg cursorHand",staticStyle:{width:"180px"}},[e("div",{staticClass:"textCenter h42 bg colorWhite"},[t._v(t._s(t.title))]),e("img",{staticStyle:{width:"180px"},attrs:{src:t.image}}),e(N.Z,{staticClass:"w100p",on:{click:function(e){return t.$emit("open",t.booster)}}},[e(X.Z,[t._v("mdi-cube")]),t._v("Ouvrir le cube")],1)],1)},O=[],Y={name:"card-booster",props:["title","image","booster"]},$=Y,L=s(1001),T=(0,L.Z)($,H,O,!1,null,null,null),M=T.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg2 colorWhite m5px",staticStyle:{"border-radius":"15px",height:"32px"}},[t.icon?e(X.Z,[t._v(t._s(t.icon))]):t._e(),e("div",{staticClass:"m5px"},[t._v(t._s(t.text))])],1)},F=[],q={name:"text-border",props:["text","icon"]},z=q,K=(0,L.Z)(z,j,F,!1,null,null,null),W=K.exports,U={name:"panel-cube-config",props:["cube","boosters"],components:{textBorder:W,cardBooster:M,panelCards:E.Z},data:()=>({store:r.h,NoDuplicate:!1,NoDuplicateHolo:!1,commonCardPerBatch:7,rareCardPerBatch:1,holoCardPerBatch:1,batchPerCube:25,cubesOpened:[],cubesOpenedIds:[]}),methods:{getBooster(t){if(!t.Booster)return[];let e=this.boosters.find((e=>e.Ref===t.Booster));return e?[e]:[]},getRandomInt(t){return Math.floor(Math.random()*t)},getRandomItem(t){return t[this.getRandomInt(t.length)]},openCubeBooster(t){let e=[];const s=["SR","UR","SCR"];let i=t.Cards.filter((t=>"C"===t.Rarity)).map((t=>A().cleanup(t.NameEn))),a=t.Cards.filter((t=>"R"===t.Rarity)).map((t=>A().cleanup(t.NameEn))),o=t.Cards.filter((t=>s.includes(t.Rarity))).map((t=>A().cleanup(t.NameEn)));for(let n=0;n<this.batchPerCube;n++){let t={CardList:[],Cards:[]};for(let e=0;e<this.commonCardPerBatch;e++)t.CardList.push(this.getRandomItem(i));for(let e=0;e<this.rareCardPerBatch;e++)t.CardList.push(this.getRandomItem(a));for(let e=0;e<this.holoCardPerBatch;e++)t.CardList.push(1===this.getRandomInt(2)?this.getRandomItem(o):this.getRandomItem(i));t.Cards=this.store.cards.filter((e=>t.CardList.includes(e.IdName))),e.push(t)}this.cubesOpened.push({cube:`${t.Ref}-${t.Title}`,batchs:e}),this.cubesOpenedIds.push(t.Ref),window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight)}}},G=U,J=(0,L.Z)(G,V,Z,!1,null,null,null),Q=J.exports,tt={name:"pageDeck",components:{panelCubeConfig:Q},data:()=>({store:r.h,loading:!0,isNew:!1,id:null,cube:null,boosters:null}),mounted(){let t=window.location.href,e=t.indexOf("id=");this.isNew=e<1,this.id=t.substring(e+3),(0,o.D)([n.Z.get("cube",this.id),n.Z.getAll("booster")]).subscribe((t=>{this.cube=t[0],this.boosters=t[1],this.loading=!1}))},methods:{openCube(){alert("Bientôt disponible")}}},et=tt,st=(0,L.Z)(et,i,a,!1,null,null,null),it=st.exports}}]);
//# sourceMappingURL=918.8edc436d.js.map