(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[232],{50229:function(t,e,o){"use strict";o.d(e,{Z:function(){return g}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nodrag"},[t._l(t.sources,(function(o,i){return e("div",{key:"source"+i,class:{absolute:1,pointCircle:1,colorYellow:o.show},style:{top:o.y+"px",left:o.x+"px",width:o.width+"px",height:o.height+"px","z-index":55},attrs:{id:"source"+i},on:{mousedown:function(e){return t.drag(o)},click:function(e){return t.$emit("click",o)}}})})),e("div",{style:{display:t.source?"":"none"}},[t._l(t.targets.filter((t=>t)),(function(o,i){return e("div",{key:"target"+i},[e("div",{class:{absolute:1,pointCircle:1,colorYellow:t.target!=o,colorGreen:t.target==o},style:{top:o.y+"px",left:o.x+"px",width:o.width+"px",height:o.height+"px","z-index":60}}),e("div",{staticClass:"absolute text-center textVerticalCenter text-shadow-black colorWhite",style:{top:o.y+"px",left:o.x+"px",width:o.width+"px",height:o.height+"px","z-index":60}},[e("div",[t._v(t._s(o.text))])])])})),e("div",{style:{"pointer-events":"none"}},[e("div",{staticClass:"absolute",staticStyle:{top:"0px",left:"0px",width:"0px",height:"0px"},attrs:{id:"arrow0"+t.id}},[e("arrow-div",{attrs:{color:t.color}})],1),e("div",{staticClass:"absolute",staticStyle:{top:"0px",left:"0px",width:"0px",height:"0px"},attrs:{id:"arrow1"+t.id}},[e("arrow-div",{attrs:{color:t.color}})],1)])],2)],2)},s=[],r=o(61711),a=o.n(r),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w100p h100p relative"},[e("div",{staticClass:"arrow absolute",style:{top:"0px",left:"0px","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"15%",left:"15%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"30%",left:"30%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"45%",left:"45%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"60%",left:"60%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}}),e("div",{staticClass:"arrow absolute",style:{top:"75%",left:"75%","border-top":"5px solid "+t.color,"border-left":"5px solid "+t.color}})])},l=[],h={name:"arrow-div",props:["color"]},d=h,c=o(1001),p=(0,c.Z)(d,n,l,!1,null,"135b1d42",null),u=p.exports,m={name:"drag-drop-arrow",props:["id","sources","freeze"],components:{arrowDiv:u},data:()=>({delay:1500,animations:[],mouse:{x:0,y:0},color:"red",targets:[],source:null,target:null}),watch:{sources(){this.resetSources()}},mounted(){window.addEventListener("mousemove",this.updateMouse),window.addEventListener("mouseup",this.mouseUp),window.addEventListener("touchmove",this.updateMouse),window.addEventListener("touchend",this.mouseUp),this.resetSources()},beforeUnmount(){window.removeEventListener("mousemove",this.updateMouse),window.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("touchmove",this.updateMouse),window.removeEventListener("touchend",this.mouseUp)},methods:{updateMouse(t){const e=t&&t.touches&&t.touches.length>0?t.touches[0]:{};this.mouse.x=t.clientX?t.clientX:e.clientX,this.mouse.y=t.clientY?t.clientY:e.clientY,this.updateAnimation()},resetSources(){this.sources.forEach(((t,e)=>{const o=document.getElementById("source"+e);o?.addEventListener("touchstart",(()=>this.drag(t)))})),this.animate()},drag(t){this.freeze||(this.source=t,this.targets=this.source.targets,this.animate())},mouseUp(){!this.source||!this.animations||this.animations.length<1||this.freeze||(this.$emit("drop",{mouse:this.mouse,source:this.source,target:this.target}),this.source=null)},animate(){this.source&&(this.updateAnimation(),a().animateMultiple(this.animations,this.delay-5),setTimeout((()=>{this.animate()}),this.delay+15))},isInside(t,e,o){const i=o.x,s=o.y,r=i+o.width,a=s+o.height;return t>=i&&t<=r&&e>=s&&e<=a},updateAnimation(){if(!this.source)return;(!this.animations||this.animations.length<1)&&(this.animations=[this.createAnimation("arrow0"+this.id,!1),this.createAnimation("arrow1"+this.id,!0)]),this.target=this.targets.find((t=>this.isInside(this.mouse.x,this.mouse.y,t))),this.color=this.target?"green":"red";const t={x:this.source.x+this.source.width/2,y:this.source.y+this.source.height/2},e=this.target?{x:this.target.x+this.target.width/2,y:this.target.y+this.target.height/2}:this.mouse;this.animations.forEach((o=>{const i=this.getAngleDeg(t,e)+135,s=(this.target,75),r=s/2;o.from.x=t.x,o.from.y=t.y,o.from.rotation=i,o.to.rotation=i,o.to.x=e.x,o.to.y=e.y,o.mid.x=o.from.x+(o.to.x-o.from.x)/2-r,o.mid.y=o.from.y+(o.to.y-o.from.y)/2-r}))},createAnimation(t,e){const o=(this.target,75),i={opacity:1,width:5,height:5},s={opacity:1,width:o,height:o},r={opacity:0,width:0,height:0};return{id:t,from:i,mid:s,to:r,delay:e,isIncrement:!1}},getAngleDeg(t,e){const o=Math.atan2(e.y-t.y,e.x-t.x);return o*(180/Math.PI)}}},x=m,f=(0,c.Z)(x,i,s,!1,null,null,null),g=f.exports},55232:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return p}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h100p w100p relative bgWhite"},[t._m(0),e("h2",[t._v("Page Test")]),e("drag-drop-arrow",{attrs:{id:"0",sources:t.points},on:{drop:t.dropPoint}}),e("div",{class:{bgRed:1,"anim-height":1,height0:t.popupShow},staticStyle:{width:"500px",height:"500px",transform:"scale(0.5)"}}),e("button",{attrs:{id:"moveButton"}},[t._v("Bouge-moi !")]),t._m(1),e("div",{staticClass:"absolute bgGreen",staticStyle:{top:"200px",left:"200px",width:"50px",height:"50px"},attrs:{id:"divToMove"}})],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"div3d"},[e("div",{staticClass:"plan-incline"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"bgYellow absolute",staticStyle:{top:"50px",left:"500px",width:"300px",height:"150px"}},[e("div",{staticClass:"relative w100p h100p"},[e("div",{staticClass:"bgRed absolute",staticStyle:{width:"25px",height:"25px",transform:"rotate(45deg)",top:"45%",right:"-12.5px"}}),e("div",{staticClass:"bgRed absolute",staticStyle:{width:"25px",height:"25px",transform:"rotate(45deg)",left:"45%",top:"-12.5px"}}),e("div",{staticClass:"bgRed absolute",staticStyle:{width:"25px",height:"25px",transform:"rotate(45deg)",top:"45%",left:"-12.5px"}}),e("div",{staticClass:"bgRed absolute",staticStyle:{width:"25px",height:"25px",transform:"rotate(45deg)",left:"45%",bottom:"-12.5px"}})])])}],r=(o(57658),o(61711)),a=o.n(r),n=o(50229),l={name:"pageTest",components:{dragDropArrow:n.Z},data:()=>({popupShow:!1,game:{popup:{cards:[],text:"Title",choices:[{text:"yes"},{text:"no"}]}},points:[{x:240,y:240,width:75,height:75,show:!0},{x:40,y:240,width:75,height:75,show:!0}]}),mounted(){const t=[],e=[],o=75,i=75;let s=40;for(let a=40;a<260;a+=100)t.push({x:a,y:s,width:o,height:i,text:"Point "+a});s=440;for(let a=40;a<260;a+=100)e.push({x:a,y:s,width:o,height:i,text:"Point "+a});this.points[0].targets=t,this.points[1].targets=e,setTimeout((()=>{this.popupShow=!0}),2e3);const r=document.getElementById("moveButton");r.addEventListener("click",(()=>{const t=Math.floor(401*Math.random())+100,e=Math.floor(401*Math.random())+100;r.style.left=`${t}px`,r.style.top=`${e}px`})),setInterval((()=>{const t=Math.floor(401*Math.random())+100,e=Math.floor(401*Math.random())+100,o=[{id:"divToMove",to:{x:t,y:e,width:75,height:75,rotation:0,opacity:1}}];a().animateMultipleByCss(o,500)}),3e3)},methods:{dropPoint(t){alert(JSON.stringify(t)),this.source=null}}},h=l,d=o(1001),c=(0,d.Z)(h,i,s,!1,null,null,null),p=c.exports},61711:function(t){class e{static animateElement(t,e,o,i){const s={element:t,from:e,to:o};this.animateElements([s],i)}static animateElements(t,e){const o=performance.now();function i(s){function r(t,e,o){let i=o,s=null,r=null,a=0;return e.delay&&(i=i<.5?i+.5:i-.5),e.mid&&e.mid[t]?i<.5?(i/=.5,a=i,s=e.from,r=e.mid):(i=(i-.5)/.5,a=i,s=e.mid,r=e.to):(a=i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2,s=e.from,r=e.to),s[t]+(r[t]-s[t])*a}const a=s-o,n=Math.min(a/e,1);t.forEach((t=>{const e=r("x",t,n),o=r("y",t,n),i=r("width",t,n),s=r("height",t,n),a=r("rotation",t,n),l=r("opacity",t,n);t.element.style.left=e+"px",t.element.style.top=o+"px",t.element.style.height=s+"px",t.element.style.width=i+"px",t.element.style.opacity=l,t.element.style.transform=`rotate(${a}deg)`})),n<1&&requestAnimationFrame(i)}requestAnimationFrame(i)}static easeInOut(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}static add(t,e){const o="x,y,width,height,rotation,opacity",i={};return o.split(",").forEach((o=>{i[o]=t[o];const s=e[o];s&&(i[o]+=s)})),i}static setIfNull(t,e){const o="x,y,width,height,rotation,opacity",i={};return o.split(",").forEach((o=>{i[o]=t[o];const s=e[o];s&&(i[o]=s)})),i}static getRelativeTo0(t,e){return{x:e.x-t.x,y:e.y-t.y}}static pxStringToInt(t){return parseInt(t.replace("px",""))}static animate(t,e,o,i,s){return this.animateMultiple([{id:t,from:e,to:o,isIncrement:i}],s)}static animateMultipleByCss(t,e){t.forEach((t=>{if(!t.to)return;if(t.element=document.getElementById(t.id),!t.element)return void console.log("element can't be found : "+t.id);let o="0."+e+"s";t.element.style.transition=`top ${o} ease, left ${o} ease, height ${o} ease, width ${o} ease, opacity ${o} ease, transform ${o} ease`})),t.forEach((t=>t.element?.offsetHeight)),t.filter((t=>t.element)).forEach((t=>{t.element.style.left=t.to.x+"px",t.element.style.top=t.to.y+"px",t.element.style.height=t.to.height+"px",t.element.style.width=t.to.width+"px",t.element.style.opacity=t.to.opacity,t.element.style.transform=`rotate(${t.to.rotation}deg)`}))}static animateMultiple(t,e=-1){t.forEach((t=>{t.to&&(t.element=document.getElementById(t.id),t.element?(t.from=t.from??{x:this.pxStringToInt(t.element.style.left),y:this.pxStringToInt(t.element.style.top),rotation:t.element.style.rotation,height:t.element.style.height,width:t.element.style.width,delay:!1},t.from.rotation=t.from.rotation??0,t.from.opacity=t.from.opacity??1,t.from.height=t.from.height??t.element.clientHeight,t.to=t.isIncrement?this.add(t.from,t.to):t.to,t.mid=t.mid?t.isIncrement?this.add(t.from,t.mid):t.mid:null):console.log("element can't be found : "+t.id))})),this.animateElements(t,e)}}t.exports=e}}]);
//# sourceMappingURL=232.b1aabdfe.js.map